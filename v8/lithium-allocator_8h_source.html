<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>V8 API Reference Guide: /home/codex/apps/v8/src/lithium-allocator.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="logo.jpg"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">V8 API Reference Guide
   
   </div>
   <div id="projectbrief">If this is out of date tweet @Contra</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('lithium-allocator_8h.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/home/codex/apps/v8/src/lithium-allocator.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="lithium-allocator_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright 2012 the V8 project authors. All rights reserved.</span>
<a name="l00002"></a>00002 <span class="comment">// Redistribution and use in source and binary forms, with or without</span>
<a name="l00003"></a>00003 <span class="comment">// modification, are permitted provided that the following conditions are</span>
<a name="l00004"></a>00004 <span class="comment">// met:</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">//     * Redistributions of source code must retain the above copyright</span>
<a name="l00007"></a>00007 <span class="comment">//       notice, this list of conditions and the following disclaimer.</span>
<a name="l00008"></a>00008 <span class="comment">//     * Redistributions in binary form must reproduce the above</span>
<a name="l00009"></a>00009 <span class="comment">//       copyright notice, this list of conditions and the following</span>
<a name="l00010"></a>00010 <span class="comment">//       disclaimer in the documentation and/or other materials provided</span>
<a name="l00011"></a>00011 <span class="comment">//       with the distribution.</span>
<a name="l00012"></a>00012 <span class="comment">//     * Neither the name of Google Inc. nor the names of its</span>
<a name="l00013"></a>00013 <span class="comment">//       contributors may be used to endorse or promote products derived</span>
<a name="l00014"></a>00014 <span class="comment">//       from this software without specific prior written permission.</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00017"></a>00017 <span class="comment">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00018"></a>00018 <span class="comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00019"></a>00019 <span class="comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00020"></a>00020 <span class="comment">// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00021"></a>00021 <span class="comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00022"></a>00022 <span class="comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00023"></a>00023 <span class="comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00024"></a>00024 <span class="comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00025"></a>00025 <span class="comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00026"></a>00026 <span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#ifndef V8_LITHIUM_ALLOCATOR_H_</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define V8_LITHIUM_ALLOCATOR_H_</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="src_2v8_8h.html">v8.h</a>&quot;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="allocation_8h.html">allocation.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="lithium_8h.html">lithium.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="zone_8h.html">zone.h</a>&quot;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="keyword">namespace </span>v8 {
<a name="l00038"></a>00038 <span class="keyword">namespace </span>internal {
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="comment">// Forward declarations.</span>
<a name="l00041"></a>00041 <span class="keyword">class </span>HBasicBlock;
<a name="l00042"></a>00042 <span class="keyword">class </span>HGraph;
<a name="l00043"></a>00043 <span class="keyword">class </span>HInstruction;
<a name="l00044"></a>00044 <span class="keyword">class </span>HPhi;
<a name="l00045"></a>00045 <span class="keyword">class </span>HTracer;
<a name="l00046"></a>00046 <span class="keyword">class </span>HValue;
<a name="l00047"></a>00047 <span class="keyword">class </span>BitVector;
<a name="l00048"></a>00048 <span class="keyword">class </span>StringStream;
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="keyword">class </span>LArgument;
<a name="l00051"></a>00051 <span class="keyword">class </span>LChunk;
<a name="l00052"></a>00052 <span class="keyword">class </span>LOperand;
<a name="l00053"></a>00053 <span class="keyword">class </span>LUnallocated;
<a name="l00054"></a>00054 <span class="keyword">class </span>LConstantOperand;
<a name="l00055"></a>00055 <span class="keyword">class </span>LGap;
<a name="l00056"></a>00056 <span class="keyword">class </span>LParallelMove;
<a name="l00057"></a>00057 <span class="keyword">class </span>LPointerMap;
<a name="l00058"></a>00058 <span class="keyword">class </span>LStackSlot;
<a name="l00059"></a>00059 <span class="keyword">class </span>LRegister;
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 
<a name="l00062"></a>00062 <span class="comment">// This class represents a single point of a LOperand&#39;s lifetime.</span>
<a name="l00063"></a>00063 <span class="comment">// For each lithium instruction there are exactly two lifetime positions:</span>
<a name="l00064"></a>00064 <span class="comment">// the beginning and the end of the instruction. Lifetime positions for</span>
<a name="l00065"></a>00065 <span class="comment">// different lithium instructions are disjoint.</span>
<a name="l00066"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">00066</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> {
<a name="l00067"></a>00067  <span class="keyword">public</span>:
<a name="l00068"></a>00068   <span class="comment">// Return the lifetime position that corresponds to the beginning of</span>
<a name="l00069"></a>00069   <span class="comment">// the instruction with the given index.</span>
<a name="l00070"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#ac4b9a791bc55646e45284a74d932dd6b">00070</a>   <span class="keyword">static</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#ac4b9a791bc55646e45284a74d932dd6b">FromInstructionIndex</a>(<span class="keywordtype">int</span> index) {
<a name="l00071"></a>00071     <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a98dca7ee9e754ffebdacced5ab260c23">LifetimePosition</a>(index * kStep);
<a name="l00072"></a>00072   }
<a name="l00073"></a>00073 
<a name="l00074"></a>00074   <span class="comment">// Returns a numeric representation of this lifetime position.</span>
<a name="l00075"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">00075</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>()<span class="keyword"> const </span>{
<a name="l00076"></a>00076     <span class="keywordflow">return</span> value_;
<a name="l00077"></a>00077   }
<a name="l00078"></a>00078 
<a name="l00079"></a>00079   <span class="comment">// Returns the index of the instruction to which this lifetime position</span>
<a name="l00080"></a>00080   <span class="comment">// corresponds.</span>
<a name="l00081"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a7a498629cbc7bc82839b310ec83c934e">00081</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a7a498629cbc7bc82839b310ec83c934e">InstructionIndex</a>()<span class="keyword"> const </span>{
<a name="l00082"></a>00082     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#aba12f6295305aaee8e589f5a158e1d00">IsValid</a>());
<a name="l00083"></a>00083     <span class="keywordflow">return</span> value_ / kStep;
<a name="l00084"></a>00084   }
<a name="l00085"></a>00085 
<a name="l00086"></a>00086   <span class="comment">// Returns true if this lifetime position corresponds to the instruction</span>
<a name="l00087"></a>00087   <span class="comment">// start.</span>
<a name="l00088"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#aa021cee120d284219295efceb21bc4fd">00088</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#aa021cee120d284219295efceb21bc4fd">IsInstructionStart</a>()<span class="keyword"> const </span>{
<a name="l00089"></a>00089     <span class="keywordflow">return</span> (value_ &amp; (kStep - 1)) == 0;
<a name="l00090"></a>00090   }
<a name="l00091"></a>00091 
<a name="l00092"></a>00092   <span class="comment">// Returns the lifetime position for the start of the instruction which</span>
<a name="l00093"></a>00093   <span class="comment">// corresponds to this lifetime position.</span>
<a name="l00094"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a3a03ef3e810f20e03c5293e9fd39fcc3">00094</a>   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a3a03ef3e810f20e03c5293e9fd39fcc3">InstructionStart</a>()<span class="keyword"> const </span>{
<a name="l00095"></a>00095     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#aba12f6295305aaee8e589f5a158e1d00">IsValid</a>());
<a name="l00096"></a>00096     <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a98dca7ee9e754ffebdacced5ab260c23">LifetimePosition</a>(value_ &amp; ~(kStep - 1));
<a name="l00097"></a>00097   }
<a name="l00098"></a>00098 
<a name="l00099"></a>00099   <span class="comment">// Returns the lifetime position for the end of the instruction which</span>
<a name="l00100"></a>00100   <span class="comment">// corresponds to this lifetime position.</span>
<a name="l00101"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a8bee4e68757da53c5b38e93dc86bb8e3">00101</a>   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a8bee4e68757da53c5b38e93dc86bb8e3">InstructionEnd</a>()<span class="keyword"> const </span>{
<a name="l00102"></a>00102     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#aba12f6295305aaee8e589f5a158e1d00">IsValid</a>());
<a name="l00103"></a>00103     <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a98dca7ee9e754ffebdacced5ab260c23">LifetimePosition</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a3a03ef3e810f20e03c5293e9fd39fcc3">InstructionStart</a>().<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>() + kStep/2);
<a name="l00104"></a>00104   }
<a name="l00105"></a>00105 
<a name="l00106"></a>00106   <span class="comment">// Returns the lifetime position for the beginning of the next instruction.</span>
<a name="l00107"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a167e49987ca14bcf7d4f03ec0e2903e9">00107</a>   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a167e49987ca14bcf7d4f03ec0e2903e9">NextInstruction</a>()<span class="keyword"> const </span>{
<a name="l00108"></a>00108     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#aba12f6295305aaee8e589f5a158e1d00">IsValid</a>());
<a name="l00109"></a>00109     <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a98dca7ee9e754ffebdacced5ab260c23">LifetimePosition</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a3a03ef3e810f20e03c5293e9fd39fcc3">InstructionStart</a>().<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>() + kStep);
<a name="l00110"></a>00110   }
<a name="l00111"></a>00111 
<a name="l00112"></a>00112   <span class="comment">// Returns the lifetime position for the beginning of the previous</span>
<a name="l00113"></a>00113   <span class="comment">// instruction.</span>
<a name="l00114"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a8673fbe3f9c1751d76a74920c524948b">00114</a>   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a8673fbe3f9c1751d76a74920c524948b">PrevInstruction</a>()<span class="keyword"> const </span>{
<a name="l00115"></a>00115     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#aba12f6295305aaee8e589f5a158e1d00">IsValid</a>());
<a name="l00116"></a>00116     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(value_ &gt; 1);
<a name="l00117"></a>00117     <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a98dca7ee9e754ffebdacced5ab260c23">LifetimePosition</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a3a03ef3e810f20e03c5293e9fd39fcc3">InstructionStart</a>().<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>() - kStep);
<a name="l00118"></a>00118   }
<a name="l00119"></a>00119 
<a name="l00120"></a>00120   <span class="comment">// Constructs the lifetime position which does not correspond to any</span>
<a name="l00121"></a>00121   <span class="comment">// instruction.</span>
<a name="l00122"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a98dca7ee9e754ffebdacced5ab260c23">00122</a>   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a98dca7ee9e754ffebdacced5ab260c23">LifetimePosition</a>() : value_(-1) {}
<a name="l00123"></a>00123 
<a name="l00124"></a>00124   <span class="comment">// Returns true if this lifetime positions corrensponds to some</span>
<a name="l00125"></a>00125   <span class="comment">// instruction.</span>
<a name="l00126"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#aba12f6295305aaee8e589f5a158e1d00">00126</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#aba12f6295305aaee8e589f5a158e1d00">IsValid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> value_ != -1; }
<a name="l00127"></a>00127 
<a name="l00128"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#aa06cda95a32c3b1a18ed08d82daacb8a">00128</a>   <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#aa06cda95a32c3b1a18ed08d82daacb8a">Invalid</a>() { <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a98dca7ee9e754ffebdacced5ab260c23">LifetimePosition</a>(); }
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a26a6570b7b12c52d5e301f1c55c6780c">00130</a>   <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a26a6570b7b12c52d5e301f1c55c6780c">MaxPosition</a>() {
<a name="l00131"></a>00131     <span class="comment">// We have to use this kind of getter instead of static member due to</span>
<a name="l00132"></a>00132     <span class="comment">// crash bug in GDB.</span>
<a name="l00133"></a>00133     <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a98dca7ee9e754ffebdacced5ab260c23">LifetimePosition</a>(<a class="code" href="namespacev8_1_1internal.html#a5b727e42b93f6f06fe1d68a69d23e4d7">kMaxInt</a>);
<a name="l00134"></a>00134   }
<a name="l00135"></a>00135 
<a name="l00136"></a>00136  <span class="keyword">private</span>:
<a name="l00137"></a>00137   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kStep = 2;
<a name="l00138"></a>00138 
<a name="l00139"></a>00139   <span class="comment">// Code relies on kStep being a power of two.</span>
<a name="l00140"></a>00140   STATIC_ASSERT(<a class="code" href="utils_8h.html#a52d277cbf33f76350b2fcb21c24640ee">IS_POWER_OF_TWO</a>(kStep));
<a name="l00141"></a>00141 
<a name="l00142"></a>00142   <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a98dca7ee9e754ffebdacced5ab260c23">LifetimePosition</a>(<span class="keywordtype">int</span> value) : value_(value) { }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144   <span class="keywordtype">int</span> value_;
<a name="l00145"></a>00145 };
<a name="l00146"></a>00146 
<a name="l00147"></a>00147 
<a name="l00148"></a><a class="code" href="namespacev8_1_1internal.html#ad982f28a2e3b17d41ff0d89d3df056f7">00148</a> <span class="keyword">enum</span> <a class="code" href="namespacev8_1_1internal.html#ad982f28a2e3b17d41ff0d89d3df056f7">RegisterKind</a> {
<a name="l00149"></a><a class="code" href="namespacev8_1_1internal.html#ad982f28a2e3b17d41ff0d89d3df056f7ab9d131e9732faa630e67a0ec2e3ba5ec">00149</a>   <a class="code" href="namespacev8_1_1internal.html#ad982f28a2e3b17d41ff0d89d3df056f7ab9d131e9732faa630e67a0ec2e3ba5ec">GENERAL_REGISTERS</a>,
<a name="l00150"></a><a class="code" href="namespacev8_1_1internal.html#ad982f28a2e3b17d41ff0d89d3df056f7adee876e518abb66ea56df11dfaed4300">00150</a>   <a class="code" href="namespacev8_1_1internal.html#ad982f28a2e3b17d41ff0d89d3df056f7adee876e518abb66ea56df11dfaed4300">DOUBLE_REGISTERS</a>
<a name="l00151"></a>00151 };
<a name="l00152"></a>00152 
<a name="l00153"></a>00153 
<a name="l00154"></a>00154 <span class="comment">// A register-allocator view of a Lithium instruction. It contains the id of</span>
<a name="l00155"></a>00155 <span class="comment">// the output operand and a list of input operand uses.</span>
<a name="l00156"></a>00156 
<a name="l00157"></a>00157 <span class="keyword">class </span>LInstruction;
<a name="l00158"></a>00158 <span class="keyword">class </span>LEnvironment;
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="comment">// Iterator for non-null temp operands.</span>
<a name="l00161"></a>00161 <span class="keyword">class </span>TempIterator <a class="code" href="allocation_8h.html#abab81306d90d0b82732d5bed93a0a588">BASE_EMBEDDED</a> {
<a name="l00162"></a>00162  <span class="keyword">public</span>:
<a name="l00163"></a>00163   <span class="keyword">inline</span> <span class="keyword">explicit</span> TempIterator(LInstruction* instr);
<a name="l00164"></a>00164   <span class="keyword">inline</span> <span class="keywordtype">bool</span> Done();
<a name="l00165"></a>00165   <span class="keyword">inline</span> LOperand* Current();
<a name="l00166"></a>00166   <span class="keyword">inline</span> <span class="keywordtype">void</span> Advance();
<a name="l00167"></a>00167 
<a name="l00168"></a>00168  <span class="keyword">private</span>:
<a name="l00169"></a>00169   <span class="keyword">inline</span> <span class="keywordtype">void</span> SkipUninteresting();
<a name="l00170"></a>00170   LInstruction* instr_;
<a name="l00171"></a>00171   <span class="keywordtype">int</span> limit_;
<a name="l00172"></a>00172   <span class="keywordtype">int</span> <a class="code" href="v8conversions_8cc.html#aa94ac41f5ae06f3794120fd6dfc00201">current_</a>;
<a name="l00173"></a>00173 };
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 <span class="comment">// Iterator for non-constant input operands.</span>
<a name="l00177"></a>00177 <span class="keyword">class </span>InputIterator <a class="code" href="allocation_8h.html#abab81306d90d0b82732d5bed93a0a588">BASE_EMBEDDED</a> {
<a name="l00178"></a>00178  <span class="keyword">public</span>:
<a name="l00179"></a>00179   <span class="keyword">inline</span> <span class="keyword">explicit</span> InputIterator(LInstruction* instr);
<a name="l00180"></a>00180   <span class="keyword">inline</span> <span class="keywordtype">bool</span> Done();
<a name="l00181"></a>00181   <span class="keyword">inline</span> LOperand* Current();
<a name="l00182"></a>00182   <span class="keyword">inline</span> <span class="keywordtype">void</span> Advance();
<a name="l00183"></a>00183 
<a name="l00184"></a>00184  <span class="keyword">private</span>:
<a name="l00185"></a>00185   <span class="keyword">inline</span> <span class="keywordtype">void</span> SkipUninteresting();
<a name="l00186"></a>00186   LInstruction* instr_;
<a name="l00187"></a>00187   <span class="keywordtype">int</span> limit_;
<a name="l00188"></a>00188   <span class="keywordtype">int</span> <a class="code" href="v8conversions_8cc.html#aa94ac41f5ae06f3794120fd6dfc00201">current_</a>;
<a name="l00189"></a>00189 };
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 <span class="keyword">class </span>UseIterator <a class="code" href="allocation_8h.html#abab81306d90d0b82732d5bed93a0a588">BASE_EMBEDDED</a> {
<a name="l00193"></a>00193  <span class="keyword">public</span>:
<a name="l00194"></a>00194   <span class="keyword">inline</span> <span class="keyword">explicit</span> UseIterator(LInstruction* instr);
<a name="l00195"></a>00195   <span class="keyword">inline</span> <span class="keywordtype">bool</span> Done();
<a name="l00196"></a>00196   <span class="keyword">inline</span> LOperand* Current();
<a name="l00197"></a>00197   <span class="keyword">inline</span> <span class="keywordtype">void</span> Advance();
<a name="l00198"></a>00198 
<a name="l00199"></a>00199  <span class="keyword">private</span>:
<a name="l00200"></a>00200   InputIterator input_iterator_;
<a name="l00201"></a>00201   DeepIterator env_iterator_;
<a name="l00202"></a>00202 };
<a name="l00203"></a>00203 
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 <span class="comment">// Representation of the non-empty interval [start,end[.</span>
<a name="l00206"></a><a class="code" href="classv8_1_1internal_1_1_use_interval.html">00206</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_use_interval.html">UseInterval</a>: <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1_zone_object.html">ZoneObject</a> {
<a name="l00207"></a>00207  <span class="keyword">public</span>:
<a name="l00208"></a><a class="code" href="classv8_1_1internal_1_1_use_interval.html#a5ada41231a966eef06660d76594d2978">00208</a>   <a class="code" href="classv8_1_1internal_1_1_use_interval.html#a5ada41231a966eef06660d76594d2978">UseInterval</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_use_interval.html#a2369c7ea2441ada344f402b186c65761">start</a>, <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_use_interval.html#a4331fe0f698e0e0743bd4790c57c707d">end</a>)
<a name="l00209"></a>00209       : start_(start), end_(end), next_(<a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>) {
<a name="l00210"></a>00210     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(start.<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>() &lt; end.<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>());
<a name="l00211"></a>00211   }
<a name="l00212"></a>00212 
<a name="l00213"></a><a class="code" href="classv8_1_1internal_1_1_use_interval.html#a2369c7ea2441ada344f402b186c65761">00213</a>   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_use_interval.html#a2369c7ea2441ada344f402b186c65761">start</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> start_; }
<a name="l00214"></a><a class="code" href="classv8_1_1internal_1_1_use_interval.html#a4331fe0f698e0e0743bd4790c57c707d">00214</a>   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_use_interval.html#a4331fe0f698e0e0743bd4790c57c707d">end</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> end_; }
<a name="l00215"></a><a class="code" href="classv8_1_1internal_1_1_use_interval.html#a05fa4219f07880d45c2809806927a219">00215</a>   <a class="code" href="classv8_1_1internal_1_1_use_interval.html">UseInterval</a>* <a class="code" href="classv8_1_1internal_1_1_use_interval.html#a05fa4219f07880d45c2809806927a219">next</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> next_; }
<a name="l00216"></a>00216 
<a name="l00217"></a>00217   <span class="comment">// Split this interval at the given position without effecting the</span>
<a name="l00218"></a>00218   <span class="comment">// live range that owns it. The interval must contain the position.</span>
<a name="l00219"></a>00219   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_use_interval.html#ad15d04d041c4c694baffa1dc4403c672">SplitAt</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> pos, <a class="code" href="classv8_1_1internal_1_1_zone.html">Zone</a>* zone);
<a name="l00220"></a>00220 
<a name="l00221"></a>00221   <span class="comment">// If this interval intersects with other return smallest position</span>
<a name="l00222"></a>00222   <span class="comment">// that belongs to both of them.</span>
<a name="l00223"></a><a class="code" href="classv8_1_1internal_1_1_use_interval.html#a50dfdde985f53e17a8da26f2661168c4">00223</a>   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_use_interval.html#a50dfdde985f53e17a8da26f2661168c4">Intersect</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_use_interval.html">UseInterval</a>* other)<span class="keyword"> const </span>{
<a name="l00224"></a>00224     <span class="keywordflow">if</span> (other-&gt;<a class="code" href="classv8_1_1internal_1_1_use_interval.html#a2369c7ea2441ada344f402b186c65761">start</a>().<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>() &lt; start_.<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>()) <span class="keywordflow">return</span> other-&gt;<a class="code" href="classv8_1_1internal_1_1_use_interval.html#a50dfdde985f53e17a8da26f2661168c4">Intersect</a>(<span class="keyword">this</span>);
<a name="l00225"></a>00225     <span class="keywordflow">if</span> (other-&gt;<a class="code" href="classv8_1_1internal_1_1_use_interval.html#a2369c7ea2441ada344f402b186c65761">start</a>().<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>() &lt; end_.<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>()) <span class="keywordflow">return</span> other-&gt;<a class="code" href="classv8_1_1internal_1_1_use_interval.html#a2369c7ea2441ada344f402b186c65761">start</a>();
<a name="l00226"></a>00226     <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#aa06cda95a32c3b1a18ed08d82daacb8a">LifetimePosition::Invalid</a>();
<a name="l00227"></a>00227   }
<a name="l00228"></a>00228 
<a name="l00229"></a><a class="code" href="classv8_1_1internal_1_1_use_interval.html#ac3b5d1ad4f84a492a52b7db5fa107e6b">00229</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_use_interval.html#ac3b5d1ad4f84a492a52b7db5fa107e6b">Contains</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> point)<span class="keyword"> const </span>{
<a name="l00230"></a>00230     <span class="keywordflow">return</span> start_.<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>() &lt;= point.<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>() &amp;&amp; point.<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>() &lt; end_.<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html#a571e7248741e5573f1025506e4aecb71">Value</a>();
<a name="l00231"></a>00231   }
<a name="l00232"></a>00232 
<a name="l00233"></a>00233  <span class="keyword">private</span>:
<a name="l00234"></a>00234   <span class="keywordtype">void</span> set_start(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_use_interval.html#a2369c7ea2441ada344f402b186c65761">start</a>) { start_ = <a class="code" href="classv8_1_1internal_1_1_use_interval.html#a2369c7ea2441ada344f402b186c65761">start</a>; }
<a name="l00235"></a>00235   <span class="keywordtype">void</span> set_next(<a class="code" href="classv8_1_1internal_1_1_use_interval.html#a5ada41231a966eef06660d76594d2978">UseInterval</a>* <a class="code" href="classv8_1_1internal_1_1_use_interval.html#a05fa4219f07880d45c2809806927a219">next</a>) { next_ = <a class="code" href="classv8_1_1internal_1_1_use_interval.html#a05fa4219f07880d45c2809806927a219">next</a>; }
<a name="l00236"></a>00236 
<a name="l00237"></a>00237   LifetimePosition start_;
<a name="l00238"></a>00238   LifetimePosition end_;
<a name="l00239"></a>00239   <a class="code" href="classv8_1_1internal_1_1_use_interval.html#a5ada41231a966eef06660d76594d2978">UseInterval</a>* next_;
<a name="l00240"></a>00240 
<a name="l00241"></a><a class="code" href="classv8_1_1internal_1_1_use_interval.html#a05b53ec81357069e15d5d0e582589f6a">00241</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>;  <span class="comment">// Assigns to start_.</span>
<a name="l00242"></a>00242 };
<a name="l00243"></a>00243 
<a name="l00244"></a>00244 <span class="comment">// Representation of a use position.</span>
<a name="l00245"></a><a class="code" href="classv8_1_1internal_1_1_use_position.html">00245</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_use_position.html">UsePosition</a>: <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1_zone_object.html">ZoneObject</a> {
<a name="l00246"></a>00246  <span class="keyword">public</span>:
<a name="l00247"></a>00247   <a class="code" href="classv8_1_1internal_1_1_use_position.html#af458b5b7127e433dd37b4b10684ce68c">UsePosition</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_use_position.html#a0deec9e990d82cd40149d2d680ae592b">pos</a>, <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* <a class="code" href="classv8_1_1internal_1_1_use_position.html#a0190d80a08f786552122d126defa46e2">operand</a>);
<a name="l00248"></a>00248 
<a name="l00249"></a><a class="code" href="classv8_1_1internal_1_1_use_position.html#a0190d80a08f786552122d126defa46e2">00249</a>   <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* <a class="code" href="classv8_1_1internal_1_1_use_position.html#a0190d80a08f786552122d126defa46e2">operand</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> operand_; }
<a name="l00250"></a><a class="code" href="classv8_1_1internal_1_1_use_position.html#a59dcf5faa98834b835d9ea27f7be61de">00250</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_use_position.html#a59dcf5faa98834b835d9ea27f7be61de">HasOperand</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> operand_ != <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>; }
<a name="l00251"></a>00251 
<a name="l00252"></a><a class="code" href="classv8_1_1internal_1_1_use_position.html#aa52bbe57f7c73b31a0915235d8598401">00252</a>   <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* <a class="code" href="classv8_1_1internal_1_1_use_position.html#aa52bbe57f7c73b31a0915235d8598401">hint</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> hint_; }
<a name="l00253"></a><a class="code" href="classv8_1_1internal_1_1_use_position.html#a1e5cf9585b2dcd760fc3bcab1b575592">00253</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_use_position.html#a1e5cf9585b2dcd760fc3bcab1b575592">set_hint</a>(<a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* <a class="code" href="classv8_1_1internal_1_1_use_position.html#aa52bbe57f7c73b31a0915235d8598401">hint</a>) { hint_ = <a class="code" href="classv8_1_1internal_1_1_use_position.html#aa52bbe57f7c73b31a0915235d8598401">hint</a>; }
<a name="l00254"></a>00254   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_use_position.html#a43b0fcf35ca6c64e66f58d3dc742cd02">HasHint</a>() <span class="keyword">const</span>;
<a name="l00255"></a>00255   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_use_position.html#a725000aed2d14de75acfab72ef8ea0c4">RequiresRegister</a>() <span class="keyword">const</span>;
<a name="l00256"></a>00256   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_use_position.html#afe6202b7a7aedcac72cbab18d34ae1c6">RegisterIsBeneficial</a>() <span class="keyword">const</span>;
<a name="l00257"></a>00257 
<a name="l00258"></a><a class="code" href="classv8_1_1internal_1_1_use_position.html#a0deec9e990d82cd40149d2d680ae592b">00258</a>   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_use_position.html#a0deec9e990d82cd40149d2d680ae592b">pos</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> pos_; }
<a name="l00259"></a><a class="code" href="classv8_1_1internal_1_1_use_position.html#a564926fb1742aec1110a4aad1012984f">00259</a>   <a class="code" href="classv8_1_1internal_1_1_use_position.html">UsePosition</a>* <a class="code" href="classv8_1_1internal_1_1_use_position.html#a564926fb1742aec1110a4aad1012984f">next</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> next_; }
<a name="l00260"></a>00260 
<a name="l00261"></a>00261  <span class="keyword">private</span>:
<a name="l00262"></a>00262   <span class="keywordtype">void</span> set_next(<a class="code" href="classv8_1_1internal_1_1_use_position.html">UsePosition</a>* <a class="code" href="classv8_1_1internal_1_1_use_position.html#a564926fb1742aec1110a4aad1012984f">next</a>) { next_ = <a class="code" href="classv8_1_1internal_1_1_use_position.html#a564926fb1742aec1110a4aad1012984f">next</a>; }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264   LOperand* operand_;
<a name="l00265"></a>00265   LOperand* hint_;
<a name="l00266"></a>00266   LifetimePosition pos_;
<a name="l00267"></a>00267   <a class="code" href="classv8_1_1internal_1_1_use_position.html#af458b5b7127e433dd37b4b10684ce68c">UsePosition</a>* next_;
<a name="l00268"></a>00268   <span class="keywordtype">bool</span> requires_reg_;
<a name="l00269"></a>00269   <span class="keywordtype">bool</span> register_beneficial_;
<a name="l00270"></a>00270 
<a name="l00271"></a><a class="code" href="classv8_1_1internal_1_1_use_position.html#a05b53ec81357069e15d5d0e582589f6a">00271</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>;
<a name="l00272"></a>00272 };
<a name="l00273"></a>00273 
<a name="l00274"></a>00274 <span class="comment">// Representation of SSA values&#39; live ranges as a collection of (continuous)</span>
<a name="l00275"></a>00275 <span class="comment">// intervals over the instruction ordering.</span>
<a name="l00276"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html">00276</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>: <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1_zone_object.html">ZoneObject</a> {
<a name="l00277"></a>00277  <span class="keyword">public</span>:
<a name="l00278"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a4885d99de0dd32127dd111b64a284891">00278</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a4885d99de0dd32127dd111b64a284891">kInvalidAssignment</a> = 0x7fffffff;
<a name="l00279"></a>00279 
<a name="l00280"></a>00280   <a class="code" href="classv8_1_1internal_1_1_live_range.html#a7ed26391cfe9264a2e0c065b67848262">LiveRange</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <a class="code" href="classv8_1_1internal_1_1_zone.html">Zone</a>* zone);
<a name="l00281"></a>00281 
<a name="l00282"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a6a22a4a2a22574c56674cd17b7015a6f">00282</a>   <a class="code" href="classv8_1_1internal_1_1_use_interval.html">UseInterval</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#a6a22a4a2a22574c56674cd17b7015a6f">first_interval</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> first_interval_; }
<a name="l00283"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a017dea3a33319f6c52c085eef8764c10">00283</a>   <a class="code" href="classv8_1_1internal_1_1_use_position.html">UsePosition</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#a017dea3a33319f6c52c085eef8764c10">first_pos</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> first_pos_; }
<a name="l00284"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#af8d2e1c26e4b6dc2b667c75a649f1b43">00284</a>   <a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#af8d2e1c26e4b6dc2b667c75a649f1b43">parent</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> parent_; }
<a name="l00285"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a2689c1d6983c4b8797898788e4de0763">00285</a>   <a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#a2689c1d6983c4b8797898788e4de0763">TopLevel</a>() { <span class="keywordflow">return</span> (parent_ == <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>) ? <span class="keyword">this</span> : parent_; }
<a name="l00286"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a41e4281e773e26b01158cedbf45d0c8e">00286</a>   <a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#a41e4281e773e26b01158cedbf45d0c8e">next</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> next_; }
<a name="l00287"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a2c7eb5dba97c4debf6445dbf24dc76f0">00287</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a2c7eb5dba97c4debf6445dbf24dc76f0">IsChild</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#af8d2e1c26e4b6dc2b667c75a649f1b43">parent</a>() != <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>; }
<a name="l00288"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a430604744e4e7969978f9a2d529453f6">00288</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a430604744e4e7969978f9a2d529453f6">id</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> id_; }
<a name="l00289"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a7b5d29ff3e2e8f6eaf5953b29f54c832">00289</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a7b5d29ff3e2e8f6eaf5953b29f54c832">IsFixed</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> id_ &lt; 0; }
<a name="l00290"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a6e8ff5be7527cb9da476bd90b0878220">00290</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a6e8ff5be7527cb9da476bd90b0878220">IsEmpty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a6a22a4a2a22574c56674cd17b7015a6f">first_interval</a>() == <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>; }
<a name="l00291"></a>00291   <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#a676d01f961a390f99adbcc835e53a98c">CreateAssignedOperand</a>(<a class="code" href="classv8_1_1internal_1_1_zone.html">Zone</a>* zone);
<a name="l00292"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#abb13cec2f1695536f2c3a44254e37ca0">00292</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#abb13cec2f1695536f2c3a44254e37ca0">assigned_register</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> assigned_register_; }
<a name="l00293"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a5633e3a40501abe85d9cfe33e72fb718">00293</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a5633e3a40501abe85d9cfe33e72fb718">spill_start_index</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> spill_start_index_; }
<a name="l00294"></a>00294   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a1f8daf0cc3f1d84eec2af5d498cedf07">set_assigned_register</a>(<span class="keywordtype">int</span> reg,
<a name="l00295"></a>00295                              <a class="code" href="namespacev8_1_1internal.html#ad982f28a2e3b17d41ff0d89d3df056f7">RegisterKind</a> register_kind,
<a name="l00296"></a>00296                              <a class="code" href="classv8_1_1internal_1_1_zone.html">Zone</a>* zone);
<a name="l00297"></a>00297   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#afa3bed04c2e4308815b2ead37912a2d3">MakeSpilled</a>(<a class="code" href="classv8_1_1internal_1_1_zone.html">Zone</a>* zone);
<a name="l00298"></a>00298 
<a name="l00299"></a>00299   <span class="comment">// Returns use position in this live range that follows both start</span>
<a name="l00300"></a>00300   <span class="comment">// and last processed use position.</span>
<a name="l00301"></a>00301   <span class="comment">// Modifies internal state of live range!</span>
<a name="l00302"></a>00302   <a class="code" href="classv8_1_1internal_1_1_use_position.html">UsePosition</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#afc986933638b3c59998735b687fea5e0">NextUsePosition</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="namespacell__prof.html#a5b7aee10eba26bc62f35b1049906c277">start</a>);
<a name="l00303"></a>00303 
<a name="l00304"></a>00304   <span class="comment">// Returns use position for which register is required in this live</span>
<a name="l00305"></a>00305   <span class="comment">// range and which follows both start and last processed use position</span>
<a name="l00306"></a>00306   <span class="comment">// Modifies internal state of live range!</span>
<a name="l00307"></a>00307   <a class="code" href="classv8_1_1internal_1_1_use_position.html">UsePosition</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#a7b60252c67b95b3091aacb9495126122">NextRegisterPosition</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="namespacell__prof.html#a5b7aee10eba26bc62f35b1049906c277">start</a>);
<a name="l00308"></a>00308 
<a name="l00309"></a>00309   <span class="comment">// Returns use position for which register is beneficial in this live</span>
<a name="l00310"></a>00310   <span class="comment">// range and which follows both start and last processed use position</span>
<a name="l00311"></a>00311   <span class="comment">// Modifies internal state of live range!</span>
<a name="l00312"></a>00312   <a class="code" href="classv8_1_1internal_1_1_use_position.html">UsePosition</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#a0565e8c06effb699fc295da60310cb68">NextUsePositionRegisterIsBeneficial</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="namespacell__prof.html#a5b7aee10eba26bc62f35b1049906c277">start</a>);
<a name="l00313"></a>00313 
<a name="l00314"></a>00314   <span class="comment">// Can this live range be spilled at this position.</span>
<a name="l00315"></a>00315   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#af065b9f68029ad43cf11fd29573dd32e">CanBeSpilled</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> pos);
<a name="l00316"></a>00316 
<a name="l00317"></a>00317   <span class="comment">// Split this live range at the given position which must follow the start of</span>
<a name="l00318"></a>00318   <span class="comment">// the range.</span>
<a name="l00319"></a>00319   <span class="comment">// All uses following the given position will be moved from this</span>
<a name="l00320"></a>00320   <span class="comment">// live range to the result live range.</span>
<a name="l00321"></a>00321   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#af6b33331f5944c9d42f58f4dd218256f">SplitAt</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> position, <a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* result, <a class="code" href="classv8_1_1internal_1_1_zone.html">Zone</a>* zone);
<a name="l00322"></a>00322 
<a name="l00323"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a4d1b99809ce07ac20033470572231669">00323</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a4d1b99809ce07ac20033470572231669">IsDouble</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> is_double_; }
<a name="l00324"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a186788ab3b77e3eee40e1092a27ae6fe">00324</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a186788ab3b77e3eee40e1092a27ae6fe">HasRegisterAssigned</a>()<span class="keyword"> const </span>{
<a name="l00325"></a>00325     <span class="keywordflow">return</span> assigned_register_ != <a class="code" href="classv8_1_1internal_1_1_live_range.html#a4885d99de0dd32127dd111b64a284891">kInvalidAssignment</a>;
<a name="l00326"></a>00326   }
<a name="l00327"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#ade293363efed606d43598a264aaad1f9">00327</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#ade293363efed606d43598a264aaad1f9">IsSpilled</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> spilled_; }
<a name="l00328"></a>00328   <a class="code" href="classv8_1_1internal_1_1_use_position.html">UsePosition</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#a2459cdf9e1bd03abbf0c1714f36d871f">FirstPosWithHint</a>() <span class="keyword">const</span>;
<a name="l00329"></a>00329 
<a name="l00330"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a45b97fe702d8aefcd975806fb2f2015b">00330</a>   <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#a45b97fe702d8aefcd975806fb2f2015b">FirstHint</a>()<span class="keyword"> const </span>{
<a name="l00331"></a>00331     <a class="code" href="classv8_1_1internal_1_1_use_position.html">UsePosition</a>* pos = <a class="code" href="classv8_1_1internal_1_1_live_range.html#a2459cdf9e1bd03abbf0c1714f36d871f">FirstPosWithHint</a>();
<a name="l00332"></a>00332     <span class="keywordflow">if</span> (pos != <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>) <span class="keywordflow">return</span> pos-&gt;<a class="code" href="classv8_1_1internal_1_1_use_position.html#aa52bbe57f7c73b31a0915235d8598401">hint</a>();
<a name="l00333"></a>00333     <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>;
<a name="l00334"></a>00334   }
<a name="l00335"></a>00335 
<a name="l00336"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#aa33ba465d21d8e9201b3f1d5029f8e44">00336</a>   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_live_range.html#aa33ba465d21d8e9201b3f1d5029f8e44">Start</a>()<span class="keyword"> const </span>{
<a name="l00337"></a>00337     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<a class="code" href="classv8_1_1internal_1_1_live_range.html#a6e8ff5be7527cb9da476bd90b0878220">IsEmpty</a>());
<a name="l00338"></a>00338     <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a6a22a4a2a22574c56674cd17b7015a6f">first_interval</a>()-&gt;<a class="code" href="classv8_1_1internal_1_1_use_interval.html#a2369c7ea2441ada344f402b186c65761">start</a>();
<a name="l00339"></a>00339   }
<a name="l00340"></a>00340 
<a name="l00341"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a38afdfb0d782afac4c5f49b9436b0424">00341</a>   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a38afdfb0d782afac4c5f49b9436b0424">End</a>()<span class="keyword"> const </span>{
<a name="l00342"></a>00342     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!<a class="code" href="classv8_1_1internal_1_1_live_range.html#a6e8ff5be7527cb9da476bd90b0878220">IsEmpty</a>());
<a name="l00343"></a>00343     <span class="keywordflow">return</span> last_interval_-&gt;<a class="code" href="classv8_1_1internal_1_1_use_interval.html#a4331fe0f698e0e0743bd4790c57c707d">end</a>();
<a name="l00344"></a>00344   }
<a name="l00345"></a>00345 
<a name="l00346"></a>00346   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#affc7db1d9869fc3ce341e476ab9a6935">HasAllocatedSpillOperand</a>() <span class="keyword">const</span>;
<a name="l00347"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#af3210dbce2d30e2716d4e780a4af8692">00347</a>   <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#af3210dbce2d30e2716d4e780a4af8692">GetSpillOperand</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> spill_operand_; }
<a name="l00348"></a>00348   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a2d9ca408a197d39c31bb603d42525dad">SetSpillOperand</a>(<a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* operand);
<a name="l00349"></a>00349 
<a name="l00350"></a><a class="code" href="classv8_1_1internal_1_1_live_range.html#a8771fd7ef29604d13eb2fc27a88c0eb9">00350</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a8771fd7ef29604d13eb2fc27a88c0eb9">SetSpillStartIndex</a>(<span class="keywordtype">int</span> <a class="code" href="namespacell__prof.html#a5b7aee10eba26bc62f35b1049906c277">start</a>) {
<a name="l00351"></a>00351     spill_start_index_ = <a class="code" href="namespacev8_1_1internal.html#a4789b60113833ac293f9d1aa9a6372e8">Min</a>(start, spill_start_index_);
<a name="l00352"></a>00352   }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a64375493acd5aceb780a8c67f6489f96">ShouldBeAllocatedBefore</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* other) <span class="keyword">const</span>;
<a name="l00355"></a>00355   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a75657b5678d8188045ec6be9b3fce06c">CanCover</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> position) <span class="keyword">const</span>;
<a name="l00356"></a>00356   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a096c7f4e9cc4ee5a9ababe8f6f4476b0">Covers</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> position);
<a name="l00357"></a>00357   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a6eefd64ee4a61221be0685caae202b77">FirstIntersection</a>(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* other);
<a name="l00358"></a>00358 
<a name="l00359"></a>00359   <span class="comment">// Add a new interval or a new use position to this live range.</span>
<a name="l00360"></a>00360   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a08a9a6f61273cbdf10d2c0bd3f5f8694">EnsureInterval</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="namespacell__prof.html#a5b7aee10eba26bc62f35b1049906c277">start</a>,
<a name="l00361"></a>00361                       <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> end,
<a name="l00362"></a>00362                       <a class="code" href="classv8_1_1internal_1_1_zone.html">Zone</a>* zone);
<a name="l00363"></a>00363   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a84040c33ef48af318b72ba81e80ab57f">AddUseInterval</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="namespacell__prof.html#a5b7aee10eba26bc62f35b1049906c277">start</a>,
<a name="l00364"></a>00364                       <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> end,
<a name="l00365"></a>00365                       <a class="code" href="classv8_1_1internal_1_1_zone.html">Zone</a>* zone);
<a name="l00366"></a>00366   <a class="code" href="classv8_1_1internal_1_1_use_position.html">UsePosition</a>* <a class="code" href="classv8_1_1internal_1_1_live_range.html#a32f3ab49daa8197e3777cc49f8c40a7d">AddUsePosition</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> pos,
<a name="l00367"></a>00367                               <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* operand,
<a name="l00368"></a>00368                               <a class="code" href="classv8_1_1internal_1_1_zone.html">Zone</a>* zone);
<a name="l00369"></a>00369 
<a name="l00370"></a>00370   <span class="comment">// Shorten the most recently added interval by setting a new start.</span>
<a name="l00371"></a>00371   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_live_range.html#a16d6deef300ff836d863a53f91350568">ShortenTo</a>(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="namespacell__prof.html#a5b7aee10eba26bc62f35b1049906c277">start</a>);
<a name="l00372"></a>00372 
<a name="l00373"></a>00373 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00374"></a>00374 <span class="preprocessor"></span>  <span class="comment">// True if target overlaps an existing interval.</span>
<a name="l00375"></a>00375   <span class="keywordtype">bool</span> HasOverlap(<a class="code" href="classv8_1_1internal_1_1_use_interval.html">UseInterval</a>* target) <span class="keyword">const</span>;
<a name="l00376"></a>00376   <span class="keywordtype">void</span> Verify() <span class="keyword">const</span>;
<a name="l00377"></a>00377 <span class="preprocessor">#endif</span>
<a name="l00378"></a>00378 <span class="preprocessor"></span>
<a name="l00379"></a>00379  <span class="keyword">private</span>:
<a name="l00380"></a>00380   <span class="keywordtype">void</span> ConvertOperands(<a class="code" href="classv8_1_1internal_1_1_zone.html">Zone</a>* zone);
<a name="l00381"></a>00381   <a class="code" href="classv8_1_1internal_1_1_use_interval.html">UseInterval</a>* FirstSearchIntervalForPosition(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> position) <span class="keyword">const</span>;
<a name="l00382"></a>00382   <span class="keywordtype">void</span> AdvanceLastProcessedMarker(<a class="code" href="classv8_1_1internal_1_1_use_interval.html">UseInterval</a>* to_start_of,
<a name="l00383"></a>00383                                   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> but_not_past) <span class="keyword">const</span>;
<a name="l00384"></a>00384 
<a name="l00385"></a>00385   <span class="keywordtype">int</span> id_;
<a name="l00386"></a>00386   <span class="keywordtype">bool</span> spilled_;
<a name="l00387"></a>00387   <span class="keywordtype">bool</span> is_double_;
<a name="l00388"></a>00388   <span class="keywordtype">int</span> assigned_register_;
<a name="l00389"></a>00389   <a class="code" href="classv8_1_1internal_1_1_use_interval.html">UseInterval</a>* last_interval_;
<a name="l00390"></a>00390   <a class="code" href="classv8_1_1internal_1_1_use_interval.html">UseInterval</a>* first_interval_;
<a name="l00391"></a>00391   <a class="code" href="classv8_1_1internal_1_1_use_position.html">UsePosition</a>* first_pos_;
<a name="l00392"></a>00392   <a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* parent_;
<a name="l00393"></a>00393   <a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* next_;
<a name="l00394"></a>00394   <span class="comment">// This is used as a cache, it doesn&#39;t affect correctness.</span>
<a name="l00395"></a>00395   <span class="keyword">mutable</span> <a class="code" href="classv8_1_1internal_1_1_use_interval.html">UseInterval</a>* current_interval_;
<a name="l00396"></a>00396   <a class="code" href="classv8_1_1internal_1_1_use_position.html">UsePosition</a>* last_processed_use_;
<a name="l00397"></a>00397   <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* spill_operand_;
<a name="l00398"></a>00398   <span class="keywordtype">int</span> spill_start_index_;
<a name="l00399"></a>00399 };
<a name="l00400"></a>00400 
<a name="l00401"></a>00401 
<a name="l00402"></a>00402 <span class="keyword">class </span>GrowableBitVector <a class="code" href="allocation_8h.html#abab81306d90d0b82732d5bed93a0a588">BASE_EMBEDDED</a> {
<a name="l00403"></a>00403  <span class="keyword">public</span>:
<a name="l00404"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a21f6e6506780503ed723ff0941220478">00404</a>   <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a21f6e6506780503ed723ff0941220478">GrowableBitVector</a>() : bits_(<a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>) { }
<a name="l00405"></a>00405 
<a name="l00406"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a42a5eb418f1c37a97255e75d8f32c674">00406</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a42a5eb418f1c37a97255e75d8f32c674">Contains</a>(<span class="keywordtype">int</span> value)<span class="keyword"> const </span>{
<a name="l00407"></a>00407     <span class="keywordflow">if</span> (!InBitsRange(value)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00408"></a>00408     <span class="keywordflow">return</span> bits_-&gt;Contains(value);
<a name="l00409"></a>00409   }
<a name="l00410"></a>00410 
<a name="l00411"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#af49704e7c28352d30460a37d105dc34f">00411</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#af49704e7c28352d30460a37d105dc34f">Add</a>(<span class="keywordtype">int</span> value, <a class="code" href="classv8_1_1internal_1_1_zone.html">Zone</a>* zone) {
<a name="l00412"></a>00412     EnsureCapacity(value, zone);
<a name="l00413"></a>00413     bits_-&gt;Add(value);
<a name="l00414"></a>00414   }
<a name="l00415"></a>00415 
<a name="l00416"></a>00416  <span class="keyword">private</span>:
<a name="l00417"></a>00417   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kInitialLength = 1024;
<a name="l00418"></a>00418 
<a name="l00419"></a>00419   <span class="keywordtype">bool</span> InBitsRange(<span class="keywordtype">int</span> value)<span class="keyword"> const </span>{
<a name="l00420"></a>00420     <span class="keywordflow">return</span> bits_ != <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a> &amp;&amp; bits_-&gt;length() &gt; value;
<a name="l00421"></a>00421   }
<a name="l00422"></a>00422 
<a name="l00423"></a>00423   <span class="keywordtype">void</span> EnsureCapacity(<span class="keywordtype">int</span> value, Zone* zone) {
<a name="l00424"></a>00424     <span class="keywordflow">if</span> (InBitsRange(value)) <span class="keywordflow">return</span>;
<a name="l00425"></a>00425     <span class="keywordtype">int</span> new_length = bits_ == <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a> ? kInitialLength : bits_-&gt;length();
<a name="l00426"></a>00426     <span class="keywordflow">while</span> (new_length &lt;= value) new_length *= 2;
<a name="l00427"></a>00427     BitVector* new_bits = <span class="keyword">new</span>(zone) BitVector(new_length, zone);
<a name="l00428"></a>00428     <span class="keywordflow">if</span> (bits_ != <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>) new_bits-&gt;CopyFrom(*bits_);
<a name="l00429"></a>00429     bits_ = new_bits;
<a name="l00430"></a>00430   }
<a name="l00431"></a>00431 
<a name="l00432"></a>00432   BitVector* bits_;
<a name="l00433"></a>00433 };
<a name="l00434"></a>00434 
<a name="l00435"></a>00435 
<a name="l00436"></a>00436 <span class="keyword">class </span>LAllocator <a class="code" href="allocation_8h.html#abab81306d90d0b82732d5bed93a0a588">BASE_EMBEDDED</a> {
<a name="l00437"></a>00437  <span class="keyword">public</span>:
<a name="l00438"></a>00438   LAllocator(<span class="keywordtype">int</span> first_virtual_register, HGraph* graph);
<a name="l00439"></a>00439 
<a name="l00440"></a>00440   <span class="keyword">static</span> <span class="keywordtype">void</span> TraceAlloc(<span class="keyword">const</span> <span class="keywordtype">char</span>* msg, ...);
<a name="l00441"></a>00441 
<a name="l00442"></a>00442   <span class="comment">// Checks whether the value of a given virtual register is tagged.</span>
<a name="l00443"></a>00443   <span class="keywordtype">bool</span> HasTaggedValue(<span class="keywordtype">int</span> virtual_register) <span class="keyword">const</span>;
<a name="l00444"></a>00444 
<a name="l00445"></a>00445   <span class="comment">// Returns the register kind required by the given virtual register.</span>
<a name="l00446"></a>00446   <a class="code" href="namespacev8_1_1internal.html#ad982f28a2e3b17d41ff0d89d3df056f7">RegisterKind</a> RequiredRegisterKind(<span class="keywordtype">int</span> virtual_register) <span class="keyword">const</span>;
<a name="l00447"></a>00447 
<a name="l00448"></a>00448   <span class="keywordtype">bool</span> Allocate(LChunk* chunk);
<a name="l00449"></a>00449 
<a name="l00450"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#af975ec4d874d105dfad57d4833929e5f">00450</a>   <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_zone_list.html">ZoneList&lt;LiveRange*&gt;</a>* <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#af975ec4d874d105dfad57d4833929e5f">live_ranges</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> &amp;live_ranges_; }
<a name="l00451"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a93ea2d75fcc8dec5687e6f4282085c57">00451</a>   <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;LiveRange*&gt;</a>* <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a93ea2d75fcc8dec5687e6f4282085c57">fixed_live_ranges</a>()<span class="keyword"> const </span>{
<a name="l00452"></a>00452     <span class="keywordflow">return</span> &amp;fixed_live_ranges_;
<a name="l00453"></a>00453   }
<a name="l00454"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#abe811cf54b7b58f6f9466f7e698bfeb1">00454</a>   <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;LiveRange*&gt;</a>* <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#abe811cf54b7b58f6f9466f7e698bfeb1">fixed_double_live_ranges</a>()<span class="keyword"> const </span>{
<a name="l00455"></a>00455     <span class="keywordflow">return</span> &amp;fixed_double_live_ranges_;
<a name="l00456"></a>00456   }
<a name="l00457"></a>00457 
<a name="l00458"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ad7171d271922cc265fb6a5f48c25ef08">00458</a>   <a class="code" href="classv8_1_1internal_1_1_l_chunk.html">LChunk</a>* <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ad7171d271922cc265fb6a5f48c25ef08">chunk</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> chunk_; }
<a name="l00459"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a586a8eaff2221ab14e3b55d7c67cb96f">00459</a>   <a class="code" href="classv8_1_1internal_1_1_h_graph.html">HGraph</a>* <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a586a8eaff2221ab14e3b55d7c67cb96f">graph</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> graph_; }
<a name="l00460"></a>00460 
<a name="l00461"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a4496f816450e1aacab09a369fab537c7">00461</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a4496f816450e1aacab09a369fab537c7">GetVirtualRegister</a>() {
<a name="l00462"></a>00462     <span class="keywordflow">if</span> (next_virtual_register_ &gt; <a class="code" href="classv8_1_1internal_1_1_l_unallocated.html#a74a05ec5d4c76ae15d49d160d4d4009b">LUnallocated::kMaxVirtualRegisters</a>) {
<a name="l00463"></a>00463       allocation_ok_ = <span class="keyword">false</span>;
<a name="l00464"></a>00464     }
<a name="l00465"></a>00465     <span class="keywordflow">return</span> next_virtual_register_++;
<a name="l00466"></a>00466   }
<a name="l00467"></a>00467 
<a name="l00468"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a35843d8df9c2b7e2a6f5185a6b62f657">00468</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a35843d8df9c2b7e2a6f5185a6b62f657">AllocationOk</a>() { <span class="keywordflow">return</span> allocation_ok_; }
<a name="l00469"></a>00469 
<a name="l00470"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ab159039531b0a6c920af1ef8600a81e0">00470</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ab159039531b0a6c920af1ef8600a81e0">MarkAsOsrEntry</a>() {
<a name="l00471"></a>00471     <span class="comment">// There can be only one.</span>
<a name="l00472"></a>00472     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(!has_osr_entry_);
<a name="l00473"></a>00473     <span class="comment">// Simply set a flag to find and process instruction later.</span>
<a name="l00474"></a>00474     has_osr_entry_ = <span class="keyword">true</span>;
<a name="l00475"></a>00475   }
<a name="l00476"></a>00476 
<a name="l00477"></a>00477 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00478"></a>00478 <span class="preprocessor"></span>  <span class="keywordtype">void</span> Verify() <span class="keyword">const</span>;
<a name="l00479"></a>00479 <span class="preprocessor">#endif</span>
<a name="l00480"></a>00480 <span class="preprocessor"></span>
<a name="l00481"></a>00481  <span class="keyword">private</span>:
<a name="l00482"></a>00482   <span class="keywordtype">void</span> MeetRegisterConstraints();
<a name="l00483"></a>00483   <span class="keywordtype">void</span> ResolvePhis();
<a name="l00484"></a>00484   <span class="keywordtype">void</span> BuildLiveRanges();
<a name="l00485"></a>00485   <span class="keywordtype">void</span> AllocateGeneralRegisters();
<a name="l00486"></a>00486   <span class="keywordtype">void</span> AllocateDoubleRegisters();
<a name="l00487"></a>00487   <span class="keywordtype">void</span> ConnectRanges();
<a name="l00488"></a>00488   <span class="keywordtype">void</span> ResolveControlFlow();
<a name="l00489"></a>00489   <span class="keywordtype">void</span> PopulatePointerMaps();
<a name="l00490"></a>00490   <span class="keywordtype">void</span> ProcessOsrEntry();
<a name="l00491"></a>00491   <span class="keywordtype">void</span> AllocateRegisters();
<a name="l00492"></a>00492   <span class="keywordtype">bool</span> CanEagerlyResolveControlFlow(<a class="code" href="classv8_1_1internal_1_1_h_basic_block.html">HBasicBlock</a>* block) <span class="keyword">const</span>;
<a name="l00493"></a>00493   <span class="keyword">inline</span> <span class="keywordtype">bool</span> SafePointsAreInOrder() <span class="keyword">const</span>;
<a name="l00494"></a>00494 
<a name="l00495"></a>00495   <span class="comment">// Liveness analysis support.</span>
<a name="l00496"></a>00496   <span class="keywordtype">void</span> InitializeLivenessAnalysis();
<a name="l00497"></a>00497   <a class="code" href="classv8_1_1internal_1_1_bit_vector.html">BitVector</a>* ComputeLiveOut(<a class="code" href="classv8_1_1internal_1_1_h_basic_block.html">HBasicBlock</a>* block);
<a name="l00498"></a>00498   <span class="keywordtype">void</span> AddInitialIntervals(<a class="code" href="classv8_1_1internal_1_1_h_basic_block.html">HBasicBlock</a>* block, <a class="code" href="classv8_1_1internal_1_1_bit_vector.html">BitVector</a>* live_out);
<a name="l00499"></a>00499   <span class="keywordtype">void</span> ProcessInstructions(<a class="code" href="classv8_1_1internal_1_1_h_basic_block.html">HBasicBlock</a>* block, <a class="code" href="classv8_1_1internal_1_1_bit_vector.html">BitVector</a>* live);
<a name="l00500"></a>00500   <span class="keywordtype">void</span> MeetRegisterConstraints(<a class="code" href="classv8_1_1internal_1_1_h_basic_block.html">HBasicBlock</a>* block);
<a name="l00501"></a>00501   <span class="keywordtype">void</span> MeetConstraintsBetween(<a class="code" href="classv8_1_1internal_1_1_l_instruction.html">LInstruction</a>* first,
<a name="l00502"></a>00502                               <a class="code" href="classv8_1_1internal_1_1_l_instruction.html">LInstruction</a>* second,
<a name="l00503"></a>00503                               <span class="keywordtype">int</span> gap_index);
<a name="l00504"></a>00504   <span class="keywordtype">void</span> ResolvePhis(<a class="code" href="classv8_1_1internal_1_1_h_basic_block.html">HBasicBlock</a>* block);
<a name="l00505"></a>00505 
<a name="l00506"></a>00506   <span class="comment">// Helper methods for building intervals.</span>
<a name="l00507"></a>00507   <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* AllocateFixed(<a class="code" href="classv8_1_1internal_1_1_l_unallocated.html">LUnallocated</a>* operand, <span class="keywordtype">int</span> pos, <span class="keywordtype">bool</span> is_tagged);
<a name="l00508"></a>00508   <a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* LiveRangeFor(<a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* operand);
<a name="l00509"></a>00509   <span class="keywordtype">void</span> Define(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> position, <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* operand, <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* hint);
<a name="l00510"></a>00510   <span class="keywordtype">void</span> Use(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> block_start,
<a name="l00511"></a>00511            <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> position,
<a name="l00512"></a>00512            <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* operand,
<a name="l00513"></a>00513            <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* hint);
<a name="l00514"></a>00514   <span class="keywordtype">void</span> AddConstraintsGapMove(<span class="keywordtype">int</span> index, <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* from, <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* to);
<a name="l00515"></a>00515 
<a name="l00516"></a>00516   <span class="comment">// Helper methods for updating the life range lists.</span>
<a name="l00517"></a>00517   <span class="keywordtype">void</span> AddToActive(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00518"></a>00518   <span class="keywordtype">void</span> AddToInactive(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00519"></a>00519   <span class="keywordtype">void</span> AddToUnhandledSorted(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00520"></a>00520   <span class="keywordtype">void</span> AddToUnhandledUnsorted(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00521"></a>00521   <span class="keywordtype">void</span> SortUnhandled();
<a name="l00522"></a>00522   <span class="keywordtype">bool</span> UnhandledIsSorted();
<a name="l00523"></a>00523   <span class="keywordtype">void</span> ActiveToHandled(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00524"></a>00524   <span class="keywordtype">void</span> ActiveToInactive(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00525"></a>00525   <span class="keywordtype">void</span> InactiveToHandled(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00526"></a>00526   <span class="keywordtype">void</span> InactiveToActive(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00527"></a>00527   <span class="keywordtype">void</span> FreeSpillSlot(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00528"></a>00528   <a class="code" href="classv8_1_1internal_1_1_l_operand.html">LOperand</a>* TryReuseSpillSlot(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00529"></a>00529 
<a name="l00530"></a>00530   <span class="comment">// Helper methods for allocating registers.</span>
<a name="l00531"></a>00531   <span class="keywordtype">bool</span> TryAllocateFreeReg(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00532"></a>00532   <span class="keywordtype">void</span> AllocateBlockedReg(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00533"></a>00533 
<a name="l00534"></a>00534   <span class="comment">// Live range splitting helpers.</span>
<a name="l00535"></a>00535 
<a name="l00536"></a>00536   <span class="comment">// Split the given range at the given position.</span>
<a name="l00537"></a>00537   <span class="comment">// If range starts at or after the given position then the</span>
<a name="l00538"></a>00538   <span class="comment">// original range is returned.</span>
<a name="l00539"></a>00539   <span class="comment">// Otherwise returns the live range that starts at pos and contains</span>
<a name="l00540"></a>00540   <span class="comment">// all uses from the original range that follow pos. Uses at pos will</span>
<a name="l00541"></a>00541   <span class="comment">// still be owned by the original range after splitting.</span>
<a name="l00542"></a>00542   <a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* SplitRangeAt(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range, <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> pos);
<a name="l00543"></a>00543 
<a name="l00544"></a>00544   <span class="comment">// Split the given range in a position from the interval [start, end].</span>
<a name="l00545"></a>00545   <a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* SplitBetween(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range,
<a name="l00546"></a>00546                           <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="namespacell__prof.html#a5b7aee10eba26bc62f35b1049906c277">start</a>,
<a name="l00547"></a>00547                           <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> end);
<a name="l00548"></a>00548 
<a name="l00549"></a>00549   <span class="comment">// Find a lifetime position in the interval [start, end] which</span>
<a name="l00550"></a>00550   <span class="comment">// is optimal for splitting: it is either header of the outermost</span>
<a name="l00551"></a>00551   <span class="comment">// loop covered by this interval or the latest possible position.</span>
<a name="l00552"></a>00552   <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> FindOptimalSplitPos(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="namespacell__prof.html#a5b7aee10eba26bc62f35b1049906c277">start</a>,
<a name="l00553"></a>00553                                        <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> end);
<a name="l00554"></a>00554 
<a name="l00555"></a>00555   <span class="comment">// Spill the given life range after position pos.</span>
<a name="l00556"></a>00556   <span class="keywordtype">void</span> SpillAfter(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range, <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> pos);
<a name="l00557"></a>00557 
<a name="l00558"></a>00558   <span class="comment">// Spill the given life range after position start and up to position end.</span>
<a name="l00559"></a>00559   <span class="keywordtype">void</span> SpillBetween(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range,
<a name="l00560"></a>00560                     <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> <a class="code" href="namespacell__prof.html#a5b7aee10eba26bc62f35b1049906c277">start</a>,
<a name="l00561"></a>00561                     <a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> end);
<a name="l00562"></a>00562 
<a name="l00563"></a>00563   <span class="keywordtype">void</span> SplitAndSpillIntersecting(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00564"></a>00564 
<a name="l00565"></a>00565   <span class="keywordtype">void</span> Spill(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range);
<a name="l00566"></a>00566   <span class="keywordtype">bool</span> IsBlockBoundary(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> pos);
<a name="l00567"></a>00567 
<a name="l00568"></a>00568   <span class="comment">// Helper methods for resolving control flow.</span>
<a name="l00569"></a>00569   <span class="keywordtype">void</span> ResolveControlFlow(<a class="code" href="classv8_1_1internal_1_1_live_range.html">LiveRange</a>* range,
<a name="l00570"></a>00570                           <a class="code" href="classv8_1_1internal_1_1_h_basic_block.html">HBasicBlock</a>* block,
<a name="l00571"></a>00571                           <a class="code" href="classv8_1_1internal_1_1_h_basic_block.html">HBasicBlock</a>* pred);
<a name="l00572"></a>00572 
<a name="l00573"></a>00573   <span class="comment">// Return parallel move that should be used to connect ranges split at the</span>
<a name="l00574"></a>00574   <span class="comment">// given position.</span>
<a name="l00575"></a>00575   <a class="code" href="classv8_1_1internal_1_1_l_parallel_move.html">LParallelMove</a>* GetConnectingParallelMove(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> pos);
<a name="l00576"></a>00576 
<a name="l00577"></a>00577   <span class="comment">// Return the block which contains give lifetime position.</span>
<a name="l00578"></a>00578   <a class="code" href="classv8_1_1internal_1_1_h_basic_block.html">HBasicBlock</a>* GetBlock(<a class="code" href="classv8_1_1internal_1_1_lifetime_position.html">LifetimePosition</a> pos);
<a name="l00579"></a>00579 
<a name="l00580"></a>00580   <span class="comment">// Helper methods for the fixed registers.</span>
<a name="l00581"></a>00581   <span class="keywordtype">int</span> RegisterCount() <span class="keyword">const</span>;
<a name="l00582"></a>00582   <span class="keyword">static</span> <span class="keywordtype">int</span> FixedLiveRangeID(<span class="keywordtype">int</span> index) { <span class="keywordflow">return</span> -index - 1; }
<a name="l00583"></a>00583   <span class="keyword">static</span> <span class="keywordtype">int</span> FixedDoubleLiveRangeID(<span class="keywordtype">int</span> index);
<a name="l00584"></a>00584   LiveRange* FixedLiveRangeFor(<span class="keywordtype">int</span> index);
<a name="l00585"></a>00585   LiveRange* FixedDoubleLiveRangeFor(<span class="keywordtype">int</span> index);
<a name="l00586"></a>00586   LiveRange* LiveRangeFor(<span class="keywordtype">int</span> index);
<a name="l00587"></a>00587   HPhi* LookupPhi(LOperand* operand) <span class="keyword">const</span>;
<a name="l00588"></a>00588   LGap* GetLastGap(HBasicBlock* block);
<a name="l00589"></a>00589 
<a name="l00590"></a>00590   <span class="keyword">const</span> <span class="keywordtype">char</span>* RegisterName(<span class="keywordtype">int</span> allocation_index);
<a name="l00591"></a>00591 
<a name="l00592"></a>00592   <span class="keyword">inline</span> <span class="keywordtype">bool</span> IsGapAt(<span class="keywordtype">int</span> index);
<a name="l00593"></a>00593 
<a name="l00594"></a>00594   <span class="keyword">inline</span> LInstruction* InstructionAt(<span class="keywordtype">int</span> index);
<a name="l00595"></a>00595 
<a name="l00596"></a>00596   <span class="keyword">inline</span> LGap* GapAt(<span class="keywordtype">int</span> index);
<a name="l00597"></a>00597 
<a name="l00598"></a>00598   Zone* zone_;
<a name="l00599"></a>00599 
<a name="l00600"></a>00600   LChunk* chunk_;
<a name="l00601"></a>00601 
<a name="l00602"></a>00602   <span class="comment">// During liveness analysis keep a mapping from block id to live_in sets</span>
<a name="l00603"></a>00603   <span class="comment">// for blocks already analyzed.</span>
<a name="l00604"></a>00604   ZoneList&lt;BitVector*&gt; live_in_sets_;
<a name="l00605"></a>00605 
<a name="l00606"></a>00606   <span class="comment">// Liveness analysis results.</span>
<a name="l00607"></a>00607   ZoneList&lt;LiveRange*&gt; live_ranges_;
<a name="l00608"></a>00608 
<a name="l00609"></a>00609   <span class="comment">// Lists of live ranges</span>
<a name="l00610"></a>00610   EmbeddedVector&lt;LiveRange*, Register::kNumAllocatableRegisters&gt;
<a name="l00611"></a>00611       fixed_live_ranges_;
<a name="l00612"></a>00612   EmbeddedVector&lt;LiveRange*, DoubleRegister::kNumAllocatableRegisters&gt;
<a name="l00613"></a>00613       fixed_double_live_ranges_;
<a name="l00614"></a>00614   ZoneList&lt;LiveRange*&gt; unhandled_live_ranges_;
<a name="l00615"></a>00615   ZoneList&lt;LiveRange*&gt; active_live_ranges_;
<a name="l00616"></a>00616   ZoneList&lt;LiveRange*&gt; inactive_live_ranges_;
<a name="l00617"></a>00617   ZoneList&lt;LiveRange*&gt; reusable_slots_;
<a name="l00618"></a>00618 
<a name="l00619"></a>00619   <span class="comment">// Next virtual register number to be assigned to temporaries.</span>
<a name="l00620"></a>00620   <span class="keywordtype">int</span> next_virtual_register_;
<a name="l00621"></a>00621   <span class="keywordtype">int</span> first_artificial_register_;
<a name="l00622"></a>00622   GrowableBitVector double_artificial_registers_;
<a name="l00623"></a>00623 
<a name="l00624"></a>00624   <a class="code" href="namespacev8_1_1internal.html#ad982f28a2e3b17d41ff0d89d3df056f7">RegisterKind</a> mode_;
<a name="l00625"></a>00625   <span class="keywordtype">int</span> num_registers_;
<a name="l00626"></a>00626 
<a name="l00627"></a>00627   HGraph* graph_;
<a name="l00628"></a>00628 
<a name="l00629"></a>00629   <span class="keywordtype">bool</span> has_osr_entry_;
<a name="l00630"></a>00630 
<a name="l00631"></a>00631   <span class="comment">// Indicates success or failure during register allocation.</span>
<a name="l00632"></a>00632   <span class="keywordtype">bool</span> allocation_ok_;
<a name="l00633"></a>00633 
<a name="l00634"></a>00634   <a class="code" href="globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a>(LAllocator);
<a name="l00635"></a>00635 };
<a name="l00636"></a>00636 
<a name="l00637"></a>00637 
<a name="l00638"></a>00638 } }  <span class="comment">// namespace v8::internal</span>
<a name="l00639"></a>00639 
<a name="l00640"></a>00640 <span class="preprocessor">#endif  // V8_LITHIUM_ALLOCATOR_H_</span>
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="lithium-allocator_8h.html">lithium-allocator.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 13:06:11 for V8 API Reference Guide by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
