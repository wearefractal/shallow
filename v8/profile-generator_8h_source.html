<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>V8 API Reference Guide: /home/codex/apps/v8/src/profile-generator.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="logo.jpg"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">V8 API Reference Guide
   
   </div>
   <div id="projectbrief">If this is out of date tweet @Contra</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('profile-generator_8h.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/home/codex/apps/v8/src/profile-generator.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="profile-generator_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright 2011 the V8 project authors. All rights reserved.</span>
<a name="l00002"></a>00002 <span class="comment">// Redistribution and use in source and binary forms, with or without</span>
<a name="l00003"></a>00003 <span class="comment">// modification, are permitted provided that the following conditions are</span>
<a name="l00004"></a>00004 <span class="comment">// met:</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">//     * Redistributions of source code must retain the above copyright</span>
<a name="l00007"></a>00007 <span class="comment">//       notice, this list of conditions and the following disclaimer.</span>
<a name="l00008"></a>00008 <span class="comment">//     * Redistributions in binary form must reproduce the above</span>
<a name="l00009"></a>00009 <span class="comment">//       copyright notice, this list of conditions and the following</span>
<a name="l00010"></a>00010 <span class="comment">//       disclaimer in the documentation and/or other materials provided</span>
<a name="l00011"></a>00011 <span class="comment">//       with the distribution.</span>
<a name="l00012"></a>00012 <span class="comment">//     * Neither the name of Google Inc. nor the names of its</span>
<a name="l00013"></a>00013 <span class="comment">//       contributors may be used to endorse or promote products derived</span>
<a name="l00014"></a>00014 <span class="comment">//       from this software without specific prior written permission.</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00017"></a>00017 <span class="comment">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00018"></a>00018 <span class="comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00019"></a>00019 <span class="comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00020"></a>00020 <span class="comment">// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00021"></a>00021 <span class="comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00022"></a>00022 <span class="comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00023"></a>00023 <span class="comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00024"></a>00024 <span class="comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00025"></a>00025 <span class="comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00026"></a>00026 <span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#ifndef V8_PROFILE_GENERATOR_H_</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define V8_PROFILE_GENERATOR_H_</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="allocation_8h.html">allocation.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="hashmap_8h.html">hashmap.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;../include/v8-profiler.h&quot;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="keyword">namespace </span>v8 {
<a name="l00036"></a>00036 <span class="keyword">namespace </span>internal {
<a name="l00037"></a>00037 
<a name="l00038"></a><a class="code" href="classv8_1_1internal_1_1_token_enumerator.html">00038</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_token_enumerator.html">TokenEnumerator</a> {
<a name="l00039"></a>00039  <span class="keyword">public</span>:
<a name="l00040"></a>00040   <a class="code" href="classv8_1_1internal_1_1_token_enumerator.html#a18c34947f717844837f792926b134406">TokenEnumerator</a>();
<a name="l00041"></a>00041   <a class="code" href="classv8_1_1internal_1_1_token_enumerator.html#a7f722de6e003c9285b58f3b615d29378">~TokenEnumerator</a>();
<a name="l00042"></a>00042   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_token_enumerator.html#a666085ead7312e7e576d6b0b234f3fa8">GetTokenId</a>(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* token);
<a name="l00043"></a>00043 
<a name="l00044"></a><a class="code" href="classv8_1_1internal_1_1_token_enumerator.html#aa34571b5cfda508b02a638553b3dd17a">00044</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_token_enumerator.html#aa34571b5cfda508b02a638553b3dd17a">kNoSecurityToken</a> = -1;
<a name="l00045"></a><a class="code" href="classv8_1_1internal_1_1_token_enumerator.html#ad6a3c1d1547e9e5f10a308479c895491">00045</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_token_enumerator.html#ad6a3c1d1547e9e5f10a308479c895491">kInheritsSecurityToken</a> = -2;
<a name="l00046"></a>00046 
<a name="l00047"></a>00047  <span class="keyword">private</span>:
<a name="l00048"></a>00048   <span class="keyword">static</span> <span class="keywordtype">void</span> TokenRemovedCallback(<a class="code" href="classv8_1_1_persistent.html">v8::Persistent&lt;v8::Value&gt;</a> handle,
<a name="l00049"></a>00049                                    <span class="keywordtype">void</span>* parameter);
<a name="l00050"></a>00050   <span class="keywordtype">void</span> TokenRemoved(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>** token_location);
<a name="l00051"></a>00051 
<a name="l00052"></a>00052   <a class="code" href="classv8_1_1internal_1_1_list.html">List&lt;Object**&gt;</a> token_locations_;
<a name="l00053"></a>00053   <a class="code" href="classv8_1_1internal_1_1_list.html">List&lt;bool&gt;</a> token_removed_;
<a name="l00054"></a>00054 
<a name="l00055"></a><a class="code" href="classv8_1_1internal_1_1_token_enumerator.html#ab960365fa16d992711b68bf573de0187">00055</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_token_enumerator_tester.html">TokenEnumeratorTester</a>;
<a name="l00056"></a>00056 
<a name="l00057"></a>00057   <a class="code" href="globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code" href="classv8_1_1internal_1_1_token_enumerator.html">TokenEnumerator</a>);
<a name="l00058"></a>00058 };
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 
<a name="l00061"></a>00061 <span class="comment">// Provides a storage of strings allocated in C++ heap, to hold them</span>
<a name="l00062"></a>00062 <span class="comment">// forever, even if they disappear from JS heap or external storage.</span>
<a name="l00063"></a><a class="code" href="classv8_1_1internal_1_1_strings_storage.html">00063</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_strings_storage.html">StringsStorage</a> {
<a name="l00064"></a>00064  <span class="keyword">public</span>:
<a name="l00065"></a>00065   <a class="code" href="classv8_1_1internal_1_1_strings_storage.html#a4401bec805b1444016b9866e7d928b52">StringsStorage</a>();
<a name="l00066"></a>00066   <a class="code" href="classv8_1_1internal_1_1_strings_storage.html#acff563f0daebae6ae188a8e43e7e0dbd">~StringsStorage</a>();
<a name="l00067"></a>00067 
<a name="l00068"></a>00068   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_strings_storage.html#aa01abe028db7c4dac78ea7ec256732b9">GetCopy</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* src);
<a name="l00069"></a>00069   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_strings_storage.html#a7c11ae23fafc6a733c3934fb8b8ad088">GetFormatted</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* format, ...);
<a name="l00070"></a>00070   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_strings_storage.html#aacca5d5f78b74e6c85f767270a9e0027">GetVFormatted</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* format, va_list args);
<a name="l00071"></a>00071   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_strings_storage.html#aabbb59be1dfd54b40ece85ab764cfe83">GetName</a>(<a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* <a class="code" href="namespacev8_1_1internal.html#a81b49fe6af51fab72b8b2ee86f70d4dd">name</a>);
<a name="l00072"></a>00072   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_strings_storage.html#aabbb59be1dfd54b40ece85ab764cfe83">GetName</a>(<span class="keywordtype">int</span> index);
<a name="l00073"></a>00073   <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_strings_storage.html#a56cb13652ceeaeab9dd7d4e2b74a133a">GetFunctionName</a>(<a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* name);
<a name="l00074"></a>00074   <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_strings_storage.html#a56cb13652ceeaeab9dd7d4e2b74a133a">GetFunctionName</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name);
<a name="l00075"></a>00075 
<a name="l00076"></a>00076  <span class="keyword">private</span>:
<a name="l00077"></a>00077   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxNameSize = 1024;
<a name="l00078"></a>00078 
<a name="l00079"></a>00079   INLINE(<span class="keyword">static</span> <span class="keywordtype">bool</span> StringsMatch(<span class="keywordtype">void</span>* key1, <span class="keywordtype">void</span>* key2)) {
<a name="l00080"></a>00080     <span class="keywordflow">return</span> strcmp(reinterpret_cast&lt;char*&gt;(key1),
<a name="l00081"></a>00081                   reinterpret_cast&lt;char*&gt;(key2)) == 0;
<a name="l00082"></a>00082   }
<a name="l00083"></a>00083   <span class="keyword">const</span> <span class="keywordtype">char</span>* AddOrDisposeString(<span class="keywordtype">char</span>* str, uint32_t hash);
<a name="l00084"></a>00084 
<a name="l00085"></a>00085   <span class="comment">// Mapping of strings by String::Hash to const char* strings.</span>
<a name="l00086"></a>00086   <a class="code" href="classv8_1_1internal_1_1_template_hash_map_impl.html">HashMap</a> names_;
<a name="l00087"></a>00087 
<a name="l00088"></a>00088   DISALLOW_COPY_AND_ASSIGN(<a class="code" href="classv8_1_1internal_1_1_strings_storage.html">StringsStorage</a>);
<a name="l00089"></a>00089 };
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 
<a name="l00092"></a><a class="code" href="classv8_1_1internal_1_1_code_entry.html">00092</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a> {
<a name="l00093"></a>00093  <span class="keyword">public</span>:
<a name="l00094"></a>00094   <span class="comment">// CodeEntry doesn&#39;t own name strings, just references them.</span>
<a name="l00095"></a>00095   <a class="code" href="classv8_1_1internal_1_1_code_entry.html#a30dd867734ff2ad2ad300a5d69a0113e">INLINE</a>(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>(<a class="code" href="classv8_1_1internal_1_1_logger.html#af031bcdf46403d7334622c4c1df6777a">Logger::LogEventsAndTags</a> tag,
<a name="l00096"></a>00096                    <span class="keyword">const</span> <span class="keywordtype">char</span>* name_prefix,
<a name="l00097"></a>00097                    <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacev8_1_1internal.html#a81b49fe6af51fab72b8b2ee86f70d4dd">name</a>,
<a name="l00098"></a>00098                    <span class="keyword">const</span> <span class="keywordtype">char</span>* resource_name,
<a name="l00099"></a>00099                    <span class="keywordtype">int</span> line_number,
<a name="l00100"></a>00100                    <span class="keywordtype">int</span> security_token_id));
<a name="l00101"></a>00101 
<a name="l00102"></a><a class="code" href="classv8_1_1internal_1_1_code_entry.html#aa0536fbc6239dc16b3916c43919de076">00102</a>   <a class="code" href="classv8_1_1internal_1_1_code_entry.html#aa0536fbc6239dc16b3916c43919de076">INLINE</a>(<span class="keywordtype">bool</span> is_js_function() <span class="keyword">const</span>) { <span class="keywordflow">return</span> is_js_function_tag(tag_); }
<a name="l00103"></a><a class="code" href="classv8_1_1internal_1_1_code_entry.html#af337883ba2d45336a0311e293f651a62">00103</a>   <a class="code" href="classv8_1_1internal_1_1_code_entry.html#af337883ba2d45336a0311e293f651a62">INLINE</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name_prefix() <span class="keyword">const</span>) { <span class="keywordflow">return</span> name_prefix_; }
<a name="l00104"></a><a class="code" href="classv8_1_1internal_1_1_code_entry.html#a47ebc418895bdec7daef862a23892083">00104</a>   <a class="code" href="classv8_1_1internal_1_1_code_entry.html#a47ebc418895bdec7daef862a23892083">INLINE</a>(<span class="keywordtype">bool</span> has_name_prefix() <span class="keyword">const</span>) { <span class="keywordflow">return</span> name_prefix_[0] != <span class="charliteral">&#39;\0&#39;</span>; }
<a name="l00105"></a><a class="code" href="classv8_1_1internal_1_1_code_entry.html#aaa19078127410da037f69b2343cd8a1a">00105</a>   <a class="code" href="classv8_1_1internal_1_1_code_entry.html#aaa19078127410da037f69b2343cd8a1a">INLINE</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacev8_1_1internal.html#a81b49fe6af51fab72b8b2ee86f70d4dd">name</a>() <span class="keyword">const</span>) { <span class="keywordflow">return</span> name_; }
<a name="l00106"></a><a class="code" href="classv8_1_1internal_1_1_code_entry.html#a0415007d38a7d352ff1025617c35de7b">00106</a>   <a class="code" href="classv8_1_1internal_1_1_code_entry.html#a0415007d38a7d352ff1025617c35de7b">INLINE</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* resource_name() <span class="keyword">const</span>) { <span class="keywordflow">return</span> resource_name_; }
<a name="l00107"></a><a class="code" href="classv8_1_1internal_1_1_code_entry.html#a80580f42b8196e052c7f5f8a7cc8929e">00107</a>   <a class="code" href="classv8_1_1internal_1_1_code_entry.html#a80580f42b8196e052c7f5f8a7cc8929e">INLINE</a>(<span class="keywordtype">int</span> line_number() <span class="keyword">const</span>) { <span class="keywordflow">return</span> line_number_; }
<a name="l00108"></a><a class="code" href="classv8_1_1internal_1_1_code_entry.html#ac29dcfb3f8f0681f4a13aad1bf542d72">00108</a>   <a class="code" href="classv8_1_1internal_1_1_code_entry.html#ac29dcfb3f8f0681f4a13aad1bf542d72">INLINE</a>(<span class="keywordtype">int</span> shared_id() <span class="keyword">const</span>) { <span class="keywordflow">return</span> shared_id_; }
<a name="l00109"></a><a class="code" href="classv8_1_1internal_1_1_code_entry.html#aa059040665490b32655a72e3751783c4">00109</a>   <a class="code" href="classv8_1_1internal_1_1_code_entry.html#aa059040665490b32655a72e3751783c4">INLINE</a>(<span class="keywordtype">void</span> set_shared_id(<span class="keywordtype">int</span> shared_id)) { shared_id_ = shared_id; }
<a name="l00110"></a><a class="code" href="classv8_1_1internal_1_1_code_entry.html#ab884a9bdfd05435233733a4688aa0898">00110</a>   <a class="code" href="classv8_1_1internal_1_1_code_entry.html#ab884a9bdfd05435233733a4688aa0898">INLINE</a>(<span class="keywordtype">int</span> security_token_id() <span class="keyword">const</span>) { <span class="keywordflow">return</span> security_token_id_; }
<a name="l00111"></a>00111 
<a name="l00112"></a>00112   <a class="code" href="classv8_1_1internal_1_1_code_entry.html#a30dd867734ff2ad2ad300a5d69a0113e">INLINE</a>(<span class="keyword">static</span> <span class="keywordtype">bool</span> is_js_function_tag(<a class="code" href="classv8_1_1internal_1_1_logger.html#af031bcdf46403d7334622c4c1df6777a">Logger::LogEventsAndTags</a> tag));
<a name="l00113"></a>00113 
<a name="l00114"></a>00114   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_code_entry.html#a300d14871095f1de996989c041e2f6f8">CopyData</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>&amp; source);
<a name="l00115"></a>00115   uint32_t <a class="code" href="classv8_1_1internal_1_1_code_entry.html#a759e71055edb59c571461abdf56fbbc9">GetCallUid</a>() <span class="keyword">const</span>;
<a name="l00116"></a>00116   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_code_entry.html#ad95d09ee3fa5039bdde137ff7e4e6db5">IsSameAs</a>(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* entry) <span class="keyword">const</span>;
<a name="l00117"></a>00117 
<a name="l00118"></a><a class="code" href="classv8_1_1internal_1_1_code_entry.html#ab7782a3e7e086bb6aef3262f85382bf0">00118</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_code_entry.html#ab7782a3e7e086bb6aef3262f85382bf0">kEmptyNamePrefix</a>;
<a name="l00119"></a>00119 
<a name="l00120"></a>00120  <span class="keyword">private</span>:
<a name="l00121"></a>00121   <a class="code" href="classv8_1_1internal_1_1_logger.html#af031bcdf46403d7334622c4c1df6777a">Logger::LogEventsAndTags</a> tag_;
<a name="l00122"></a>00122   <span class="keyword">const</span> <span class="keywordtype">char</span>* name_prefix_;
<a name="l00123"></a>00123   <span class="keyword">const</span> <span class="keywordtype">char</span>* name_;
<a name="l00124"></a>00124   <span class="keyword">const</span> <span class="keywordtype">char</span>* resource_name_;
<a name="l00125"></a>00125   <span class="keywordtype">int</span> line_number_;
<a name="l00126"></a>00126   <span class="keywordtype">int</span> shared_id_;
<a name="l00127"></a>00127   <span class="keywordtype">int</span> security_token_id_;
<a name="l00128"></a>00128 
<a name="l00129"></a>00129   DISALLOW_COPY_AND_ASSIGN(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>);
<a name="l00130"></a>00130 };
<a name="l00131"></a>00131 
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_profile_tree.html">ProfileTree</a>;
<a name="l00134"></a>00134 
<a name="l00135"></a><a class="code" href="classv8_1_1internal_1_1_profile_node.html">00135</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_profile_node.html">ProfileNode</a> {
<a name="l00136"></a>00136  <span class="keyword">public</span>:
<a name="l00137"></a>00137   <a class="code" href="classv8_1_1internal_1_1_profile_node.html#a3e682fee7bdc176e7e2665c53f387c7a">INLINE</a>(<a class="code" href="classv8_1_1internal_1_1_profile_node.html">ProfileNode</a>(<a class="code" href="classv8_1_1internal_1_1_profile_tree.html">ProfileTree</a>* tree, <a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* entry));
<a name="l00138"></a>00138 
<a name="l00139"></a>00139   <a class="code" href="classv8_1_1internal_1_1_profile_node.html">ProfileNode</a>* <a class="code" href="classv8_1_1internal_1_1_profile_node.html#ac96d366da81d11a5b0df39395107c94c">FindChild</a>(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* entry);
<a name="l00140"></a>00140   <a class="code" href="classv8_1_1internal_1_1_profile_node.html">ProfileNode</a>* <a class="code" href="classv8_1_1internal_1_1_profile_node.html#ad497489ded1efb610de028ba9c411ea9">FindOrAddChild</a>(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* entry);
<a name="l00141"></a><a class="code" href="classv8_1_1internal_1_1_profile_node.html#a65c87ff0c47a760c2dfea49b5e38a4d0">00141</a>   <a class="code" href="classv8_1_1internal_1_1_profile_node.html#a65c87ff0c47a760c2dfea49b5e38a4d0">INLINE</a>(<span class="keywordtype">void</span> IncrementSelfTicks()) { ++self_ticks_; }
<a name="l00142"></a><a class="code" href="classv8_1_1internal_1_1_profile_node.html#ab1502a49eccb4677d78b95440ec8ca46">00142</a>   <a class="code" href="classv8_1_1internal_1_1_profile_node.html#ab1502a49eccb4677d78b95440ec8ca46">INLINE</a>(<span class="keywordtype">void</span> IncreaseSelfTicks(<span class="keywordtype">unsigned</span> amount)) { self_ticks_ += amount; }
<a name="l00143"></a><a class="code" href="classv8_1_1internal_1_1_profile_node.html#a130d11a5f0f240250afcd3b5be9b5f3f">00143</a>   <a class="code" href="classv8_1_1internal_1_1_profile_node.html#a130d11a5f0f240250afcd3b5be9b5f3f">INLINE</a>(<span class="keywordtype">void</span> IncreaseTotalTicks(<span class="keywordtype">unsigned</span> amount)) { total_ticks_ += amount; }
<a name="l00144"></a>00144 
<a name="l00145"></a><a class="code" href="classv8_1_1internal_1_1_profile_node.html#a6e07b67dacd2645c63ca63474ee077a4">00145</a>   <a class="code" href="classv8_1_1internal_1_1_profile_node.html#a6e07b67dacd2645c63ca63474ee077a4">INLINE</a>(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* entry() <span class="keyword">const</span>) { <span class="keywordflow">return</span> entry_; }
<a name="l00146"></a><a class="code" href="classv8_1_1internal_1_1_profile_node.html#a5749308ca408158a3c91b1a16670e078">00146</a>   <a class="code" href="classv8_1_1internal_1_1_profile_node.html#a5749308ca408158a3c91b1a16670e078">INLINE</a>(<span class="keywordtype">unsigned</span> self_ticks() <span class="keyword">const</span>) { <span class="keywordflow">return</span> self_ticks_; }
<a name="l00147"></a><a class="code" href="classv8_1_1internal_1_1_profile_node.html#a73f82acfde1be1a205ea99c254e6023e">00147</a>   <a class="code" href="classv8_1_1internal_1_1_profile_node.html#a73f82acfde1be1a205ea99c254e6023e">INLINE</a>(<span class="keywordtype">unsigned</span> total_ticks() <span class="keyword">const</span>) { <span class="keywordflow">return</span> total_ticks_; }
<a name="l00148"></a><a class="code" href="classv8_1_1internal_1_1_profile_node.html#a12992070fbc15864bc1265b7a69a1112">00148</a>   <a class="code" href="classv8_1_1internal_1_1_profile_node.html#a12992070fbc15864bc1265b7a69a1112">INLINE</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_list.html">List&lt;ProfileNode*&gt;</a>* children() <span class="keyword">const</span>) { <span class="keywordflow">return</span> &amp;children_list_; }
<a name="l00149"></a>00149   <span class="keywordtype">double</span> <a class="code" href="classv8_1_1internal_1_1_profile_node.html#a9e8f41551e4f303ce9449246ed1c4a22">GetSelfMillis</a>() <span class="keyword">const</span>;
<a name="l00150"></a>00150   <span class="keywordtype">double</span> <a class="code" href="classv8_1_1internal_1_1_profile_node.html#a93dd352ec092726840e6154a52211ee6">GetTotalMillis</a>() <span class="keyword">const</span>;
<a name="l00151"></a>00151 
<a name="l00152"></a>00152   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_profile_node.html#a197b95750e6a2103f6b2f87128b84b39">Print</a>(<span class="keywordtype">int</span> indent);
<a name="l00153"></a>00153 
<a name="l00154"></a>00154  <span class="keyword">private</span>:
<a name="l00155"></a>00155   <a class="code" href="classv8_1_1internal_1_1_profile_node.html#a3e682fee7bdc176e7e2665c53f387c7a">INLINE</a>(<span class="keyword">static</span> <span class="keywordtype">bool</span> CodeEntriesMatch(<span class="keywordtype">void</span>* entry1, <span class="keywordtype">void</span>* entry2)) {
<a name="l00156"></a>00156     <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>*<span class="keyword">&gt;</span>(entry1)-&gt;IsSameAs(
<a name="l00157"></a>00157         reinterpret_cast&lt;CodeEntry*&gt;(entry2));
<a name="l00158"></a>00158   }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160   <a class="code" href="classv8_1_1internal_1_1_profile_node.html#a3e682fee7bdc176e7e2665c53f387c7a">INLINE</a>(<span class="keyword">static</span> uint32_t CodeEntryHash(CodeEntry* entry)) {
<a name="l00161"></a>00161     <span class="keywordflow">return</span> entry-&gt;GetCallUid();
<a name="l00162"></a>00162   }
<a name="l00163"></a>00163 
<a name="l00164"></a>00164   ProfileTree* tree_;
<a name="l00165"></a>00165   CodeEntry* entry_;
<a name="l00166"></a>00166   <span class="keywordtype">unsigned</span> total_ticks_;
<a name="l00167"></a>00167   <span class="keywordtype">unsigned</span> self_ticks_;
<a name="l00168"></a>00168   <span class="comment">// Mapping from CodeEntry* to ProfileNode*</span>
<a name="l00169"></a>00169   <a class="code" href="namespacev8_1_1internal.html#a7e7097fccc44a6d27c2a2c5c1eca3e7b">HashMap</a> children_;
<a name="l00170"></a>00170   List&lt;ProfileNode*&gt; children_list_;
<a name="l00171"></a>00171 
<a name="l00172"></a>00172   DISALLOW_COPY_AND_ASSIGN(ProfileNode);
<a name="l00173"></a>00173 };
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 
<a name="l00176"></a><a class="code" href="classv8_1_1internal_1_1_profile_tree.html">00176</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_profile_tree.html">ProfileTree</a> {
<a name="l00177"></a>00177  <span class="keyword">public</span>:
<a name="l00178"></a>00178   <a class="code" href="classv8_1_1internal_1_1_profile_tree.html#a7e57048104782bc29d23d0c232259612">ProfileTree</a>();
<a name="l00179"></a>00179   <a class="code" href="classv8_1_1internal_1_1_profile_tree.html#aa7d12f862c1b8885eab9be608a84cb5a">~ProfileTree</a>();
<a name="l00180"></a>00180 
<a name="l00181"></a>00181   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_profile_tree.html#ae8fd4873ec3670b6d695da2e184a059c">AddPathFromEnd</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;CodeEntry*&gt;</a>&amp; path);
<a name="l00182"></a>00182   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_profile_tree.html#adfa92faa52e269fa673166511eb0d7d3">AddPathFromStart</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;CodeEntry*&gt;</a>&amp; path);
<a name="l00183"></a>00183   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_profile_tree.html#a601543a3f7d8e91230e467cff73b264a">CalculateTotalTicks</a>();
<a name="l00184"></a>00184   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_profile_tree.html#a92ee78579ae5deececb2cee41ef91266">FilteredClone</a>(<a class="code" href="classv8_1_1internal_1_1_profile_tree.html">ProfileTree</a>* src, <span class="keywordtype">int</span> security_token_id);
<a name="l00185"></a>00185 
<a name="l00186"></a><a class="code" href="classv8_1_1internal_1_1_profile_tree.html#a9922b6e11a000caae7f9141fde039a1a">00186</a>   <span class="keywordtype">double</span> <a class="code" href="classv8_1_1internal_1_1_profile_tree.html#a9922b6e11a000caae7f9141fde039a1a">TicksToMillis</a>(<span class="keywordtype">unsigned</span> <a class="code" href="namespacell__prof.html#aee18cad841554e04d1e5ea9d1b9f6ea9">ticks</a>)<span class="keyword"> const </span>{
<a name="l00187"></a>00187     <span class="keywordflow">return</span> ticks * ms_to_ticks_scale_;
<a name="l00188"></a>00188   }
<a name="l00189"></a><a class="code" href="classv8_1_1internal_1_1_profile_tree.html#abd2b62dab12fa95dd77c7aa50922fe25">00189</a>   <a class="code" href="classv8_1_1internal_1_1_profile_node.html">ProfileNode</a>* <a class="code" href="classv8_1_1internal_1_1_profile_tree.html#abd2b62dab12fa95dd77c7aa50922fe25">root</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> root_; }
<a name="l00190"></a>00190   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_profile_tree.html#ab7fa380b9f6923e11704fc538fdc9991">SetTickRatePerMs</a>(<span class="keywordtype">double</span> ticks_per_ms);
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_profile_tree.html#afece7eee2f3d5a0ee0e15dcfff947812">ShortPrint</a>();
<a name="l00193"></a><a class="code" href="classv8_1_1internal_1_1_profile_tree.html#a8c898f6817801f67220153bfdba1c868">00193</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_profile_tree.html#a8c898f6817801f67220153bfdba1c868">Print</a>() {
<a name="l00194"></a>00194     root_-&gt;<a class="code" href="classv8_1_1internal_1_1_profile_node.html#a197b95750e6a2103f6b2f87128b84b39">Print</a>(0);
<a name="l00195"></a>00195   }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197  <span class="keyword">private</span>:
<a name="l00198"></a>00198   <span class="keyword">template</span> &lt;<span class="keyword">typename</span> Callback&gt;
<a name="l00199"></a>00199   <span class="keywordtype">void</span> TraverseDepthFirst(Callback* callback);
<a name="l00200"></a>00200 
<a name="l00201"></a>00201   <a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a> root_entry_;
<a name="l00202"></a>00202   <a class="code" href="classv8_1_1internal_1_1_profile_node.html">ProfileNode</a>* root_;
<a name="l00203"></a>00203   <span class="keywordtype">double</span> ms_to_ticks_scale_;
<a name="l00204"></a>00204 
<a name="l00205"></a>00205   DISALLOW_COPY_AND_ASSIGN(<a class="code" href="classv8_1_1internal_1_1_profile_tree.html">ProfileTree</a>);
<a name="l00206"></a>00206 };
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 
<a name="l00209"></a><a class="code" href="classv8_1_1internal_1_1_cpu_profile.html">00209</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_cpu_profile.html">CpuProfile</a> {
<a name="l00210"></a>00210  <span class="keyword">public</span>:
<a name="l00211"></a><a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#a84cb178cbbe1ce92b053ffbb9561e28a">00211</a>   <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#a84cb178cbbe1ce92b053ffbb9561e28a">CpuProfile</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* title, <span class="keywordtype">unsigned</span> uid)
<a name="l00212"></a>00212       : title_(title), uid_(uid) { }
<a name="l00213"></a>00213 
<a name="l00214"></a>00214   <span class="comment">// Add pc -&gt; ... -&gt; main() call path to the profile.</span>
<a name="l00215"></a>00215   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#ad1a12f137dc46c9435326d177150c9d2">AddPath</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;CodeEntry*&gt;</a>&amp; path);
<a name="l00216"></a>00216   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#a99692dee5a40d76f2939c9eaaeb56219">CalculateTotalTicks</a>();
<a name="l00217"></a>00217   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#aacbfd245ac004f74d45feb46d76e0dca">SetActualSamplingRate</a>(<span class="keywordtype">double</span> actual_sampling_rate);
<a name="l00218"></a>00218   <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html">CpuProfile</a>* <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#a020c1fb5a1860ca728a3919de12486a7">FilteredClone</a>(<span class="keywordtype">int</span> security_token_id);
<a name="l00219"></a>00219 
<a name="l00220"></a><a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#a4dc7dd6d8043df6fd5b046e1de6b3ad8">00220</a>   <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#a4dc7dd6d8043df6fd5b046e1de6b3ad8">INLINE</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* title() <span class="keyword">const</span>) { <span class="keywordflow">return</span> title_; }
<a name="l00221"></a><a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#a92afa4c4605b0e86818c0b1ebbfd5c6f">00221</a>   <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#a92afa4c4605b0e86818c0b1ebbfd5c6f">INLINE</a>(<span class="keywordtype">unsigned</span> uid() <span class="keyword">const</span>) { <span class="keywordflow">return</span> uid_; }
<a name="l00222"></a><a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#ad68467abb3198e720ab4db644e86d5ad">00222</a>   <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#ad68467abb3198e720ab4db644e86d5ad">INLINE</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_profile_tree.html">ProfileTree</a>* top_down() <span class="keyword">const</span>) { <span class="keywordflow">return</span> &amp;top_down_; }
<a name="l00223"></a><a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#aaae2f2b044fa4c42bdaffff95c101d0c">00223</a>   <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#aaae2f2b044fa4c42bdaffff95c101d0c">INLINE</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_profile_tree.html">ProfileTree</a>* bottom_up() <span class="keyword">const</span>) { <span class="keywordflow">return</span> &amp;bottom_up_; }
<a name="l00224"></a>00224 
<a name="l00225"></a>00225   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#a66f5b3ad5fe0fcf040e8274e5238441d">UpdateTicksScale</a>();
<a name="l00226"></a>00226 
<a name="l00227"></a>00227   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#a037c95c908ab7cc4fb9e9597619abd20">ShortPrint</a>();
<a name="l00228"></a>00228   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html#a5dc2db626ffd25bf1db98cc0aa9ca906">Print</a>();
<a name="l00229"></a>00229 
<a name="l00230"></a>00230  <span class="keyword">private</span>:
<a name="l00231"></a>00231   <span class="keyword">const</span> <span class="keywordtype">char</span>* title_;
<a name="l00232"></a>00232   <span class="keywordtype">unsigned</span> uid_;
<a name="l00233"></a>00233   <a class="code" href="classv8_1_1internal_1_1_profile_tree.html">ProfileTree</a> top_down_;
<a name="l00234"></a>00234   <a class="code" href="classv8_1_1internal_1_1_profile_tree.html">ProfileTree</a> bottom_up_;
<a name="l00235"></a>00235 
<a name="l00236"></a>00236   DISALLOW_COPY_AND_ASSIGN(<a class="code" href="classv8_1_1internal_1_1_cpu_profile.html">CpuProfile</a>);
<a name="l00237"></a>00237 };
<a name="l00238"></a>00238 
<a name="l00239"></a>00239 
<a name="l00240"></a><a class="code" href="classv8_1_1internal_1_1_code_map.html">00240</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_code_map.html">CodeMap</a> {
<a name="l00241"></a>00241  <span class="keyword">public</span>:
<a name="l00242"></a><a class="code" href="classv8_1_1internal_1_1_code_map.html#a37c6f9117b04a2b4344d263de443e017">00242</a>   <a class="code" href="classv8_1_1internal_1_1_code_map.html#a37c6f9117b04a2b4344d263de443e017">CodeMap</a>() : next_shared_id_(1) { }
<a name="l00243"></a>00243   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_code_map.html#a09abba5047e41a0f239c14ac12e7dcb1">AddCode</a>(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr, <a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* entry, <span class="keywordtype">unsigned</span> <a class="code" href="namespacev8_1_1internal.html#abf135806b67fe9f9a823fbbbe25de86b">size</a>);
<a name="l00244"></a>00244   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_code_map.html#a9f88e4c00aa5ff6288414fbdfcad9372">MoveCode</a>(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> from, <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> to);
<a name="l00245"></a>00245   <a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* <a class="code" href="classv8_1_1internal_1_1_code_map.html#ad5a1529489d15830f1f18dac285c73a3">FindEntry</a>(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr);
<a name="l00246"></a>00246   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_code_map.html#a656b435e8b25629135cdc857c4256fd9">GetSharedId</a>(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr);
<a name="l00247"></a>00247 
<a name="l00248"></a>00248   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_code_map.html#a452c676567eb04e227bd0ee4ba1a090d">Print</a>();
<a name="l00249"></a>00249 
<a name="l00250"></a>00250  <span class="keyword">private</span>:
<a name="l00251"></a>00251   <span class="keyword">struct </span>CodeEntryInfo {
<a name="l00252"></a>00252     CodeEntryInfo(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* an_entry, <span class="keywordtype">unsigned</span> a_size)
<a name="l00253"></a>00253         : entry(an_entry), <a class="code" href="namespacev8_1_1internal.html#abf135806b67fe9f9a823fbbbe25de86b">size</a>(a_size) { }
<a name="l00254"></a>00254     CodeEntry* entry;
<a name="l00255"></a>00255     <span class="keywordtype">unsigned</span> <a class="code" href="namespacev8_1_1internal.html#abf135806b67fe9f9a823fbbbe25de86b">size</a>;
<a name="l00256"></a>00256   };
<a name="l00257"></a>00257 
<a name="l00258"></a>00258   <span class="keyword">struct </span>CodeTreeConfig {
<a name="l00259"></a>00259     <span class="keyword">typedef</span> <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> Key;
<a name="l00260"></a>00260     <span class="keyword">typedef</span> CodeEntryInfo Value;
<a name="l00261"></a>00261     <span class="keyword">static</span> <span class="keyword">const</span> Key kNoKey;
<a name="l00262"></a>00262     <span class="keyword">static</span> <span class="keyword">const</span> Value NoValue() { <span class="keywordflow">return</span> CodeEntryInfo(<a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>, 0); }
<a name="l00263"></a>00263     <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#a14c66d4f72b7cbaa34eeaeebd7cde3eb">Compare</a>(<span class="keyword">const</span> Key&amp; a, <span class="keyword">const</span> Key&amp; b) {
<a name="l00264"></a>00264       <span class="keywordflow">return</span> a &lt; b ? -1 : (a &gt; b ? 1 : 0);
<a name="l00265"></a>00265     }
<a name="l00266"></a>00266   };
<a name="l00267"></a>00267   <span class="keyword">typedef</span> SplayTree&lt;CodeTreeConfig&gt; CodeTree;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269   <span class="keyword">class </span>CodeTreePrinter {
<a name="l00270"></a>00270    <span class="keyword">public</span>:
<a name="l00271"></a>00271     <span class="keywordtype">void</span> Call(<span class="keyword">const</span> <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a>&amp; key, <span class="keyword">const</span> CodeEntryInfo&amp; value);
<a name="l00272"></a>00272   };
<a name="l00273"></a>00273 
<a name="l00274"></a>00274   <span class="keywordtype">void</span> DeleteAllCoveredCode(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> <a class="code" href="namespacell__prof.html#a5b7aee10eba26bc62f35b1049906c277">start</a>, <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> end);
<a name="l00275"></a>00275 
<a name="l00276"></a>00276   <span class="comment">// Fake CodeEntry pointer to distinguish shared function entries.</span>
<a name="l00277"></a>00277   <span class="keyword">static</span> CodeEntry* <span class="keyword">const</span> kSharedFunctionCodeEntry;
<a name="l00278"></a>00278 
<a name="l00279"></a>00279   CodeTree tree_;
<a name="l00280"></a>00280   <span class="keywordtype">int</span> next_shared_id_;
<a name="l00281"></a>00281 
<a name="l00282"></a>00282   DISALLOW_COPY_AND_ASSIGN(<a class="code" href="classv8_1_1internal_1_1_code_map.html#a37c6f9117b04a2b4344d263de443e017">CodeMap</a>);
<a name="l00283"></a>00283 };
<a name="l00284"></a>00284 
<a name="l00285"></a>00285 
<a name="l00286"></a><a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html">00286</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html">CpuProfilesCollection</a> {
<a name="l00287"></a>00287  <span class="keyword">public</span>:
<a name="l00288"></a>00288   <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#aeb866203a13b444d5848be3fc0bde3bf">CpuProfilesCollection</a>();
<a name="l00289"></a>00289   <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a37fb9c3334a003e9dae28ed08830ed87">~CpuProfilesCollection</a>();
<a name="l00290"></a>00290 
<a name="l00291"></a>00291   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a0ee32107514b17e3d1b7204217753fbd">StartProfiling</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* title, <span class="keywordtype">unsigned</span> uid);
<a name="l00292"></a>00292   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a0ee32107514b17e3d1b7204217753fbd">StartProfiling</a>(<a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* title, <span class="keywordtype">unsigned</span> uid);
<a name="l00293"></a>00293   <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html">CpuProfile</a>* <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a4ddc53a48015800e1cd50067bc1a26e8">StopProfiling</a>(<span class="keywordtype">int</span> security_token_id,
<a name="l00294"></a>00294                             <span class="keyword">const</span> <span class="keywordtype">char</span>* title,
<a name="l00295"></a>00295                             <span class="keywordtype">double</span> actual_sampling_rate);
<a name="l00296"></a>00296   <a class="code" href="classv8_1_1internal_1_1_list.html">List&lt;CpuProfile*&gt;</a>* <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#abc0f536e70b27ea0a2780a555be99450">Profiles</a>(<span class="keywordtype">int</span> security_token_id);
<a name="l00297"></a><a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a3f556e70a45712cb965dc927d31fc7fb">00297</a>   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a3f556e70a45712cb965dc927d31fc7fb">GetName</a>(<a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* name) {
<a name="l00298"></a>00298     <span class="keywordflow">return</span> function_and_resource_names_.<a class="code" href="classv8_1_1internal_1_1_strings_storage.html#aabbb59be1dfd54b40ece85ab764cfe83">GetName</a>(name);
<a name="l00299"></a>00299   }
<a name="l00300"></a><a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a1e6314d9d094fef12d5dfaf8342636a9">00300</a>   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a1e6314d9d094fef12d5dfaf8342636a9">GetName</a>(<span class="keywordtype">int</span> args_count) {
<a name="l00301"></a>00301     <span class="keywordflow">return</span> function_and_resource_names_.<a class="code" href="classv8_1_1internal_1_1_strings_storage.html#aabbb59be1dfd54b40ece85ab764cfe83">GetName</a>(args_count);
<a name="l00302"></a>00302   }
<a name="l00303"></a>00303   <a class="code" href="classv8_1_1internal_1_1_cpu_profile.html">CpuProfile</a>* <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a8299253ff084d4c56de46707a031f5d3">GetProfile</a>(<span class="keywordtype">int</span> security_token_id, <span class="keywordtype">unsigned</span> uid);
<a name="l00304"></a>00304   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#ac5981b296e5fdb7fb06c22dab3548d64">IsLastProfile</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* title);
<a name="l00305"></a>00305   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a4c4bf98364eb1a14e61667f1893faeb4">RemoveProfile</a>(<a class="code" href="classv8_1_1internal_1_1_cpu_profile.html">CpuProfile</a>* profile);
<a name="l00306"></a><a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a07e379a43bc382eb1f83665adc4140de">00306</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a07e379a43bc382eb1f83665adc4140de">HasDetachedProfiles</a>() { <span class="keywordflow">return</span> detached_profiles_.length() &gt; 0; }
<a name="l00307"></a>00307 
<a name="l00308"></a>00308   <a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#ab48c126c0144f113bddca37adcf213dc">NewCodeEntry</a>(<a class="code" href="classv8_1_1internal_1_1_logger.html#af031bcdf46403d7334622c4c1df6777a">Logger::LogEventsAndTags</a> tag,
<a name="l00309"></a>00309                           <a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* name, <a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* resource_name, <span class="keywordtype">int</span> line_number);
<a name="l00310"></a>00310   <a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#ab48c126c0144f113bddca37adcf213dc">NewCodeEntry</a>(<a class="code" href="classv8_1_1internal_1_1_logger.html#af031bcdf46403d7334622c4c1df6777a">Logger::LogEventsAndTags</a> tag, <span class="keyword">const</span> <span class="keywordtype">char</span>* name);
<a name="l00311"></a>00311   <a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#ab48c126c0144f113bddca37adcf213dc">NewCodeEntry</a>(<a class="code" href="classv8_1_1internal_1_1_logger.html#af031bcdf46403d7334622c4c1df6777a">Logger::LogEventsAndTags</a> tag,
<a name="l00312"></a>00312                           <span class="keyword">const</span> <span class="keywordtype">char</span>* name_prefix, <a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* name);
<a name="l00313"></a>00313   <a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#ab48c126c0144f113bddca37adcf213dc">NewCodeEntry</a>(<a class="code" href="classv8_1_1internal_1_1_logger.html#af031bcdf46403d7334622c4c1df6777a">Logger::LogEventsAndTags</a> tag, <span class="keywordtype">int</span> args_count);
<a name="l00314"></a>00314   <a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#ab48c126c0144f113bddca37adcf213dc">NewCodeEntry</a>(<span class="keywordtype">int</span> security_token_id);
<a name="l00315"></a>00315 
<a name="l00316"></a>00316   <span class="comment">// Called from profile generator thread.</span>
<a name="l00317"></a>00317   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a4d4ba5f17286694cdb4a8c40f20bb626">AddPathToCurrentProfiles</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;CodeEntry*&gt;</a>&amp; path);
<a name="l00318"></a>00318 
<a name="l00319"></a>00319   <span class="comment">// Limits the number of profiles that can be simultaneously collected.</span>
<a name="l00320"></a><a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a3c8efd32f53f7fa8fe100cc188d60be7">00320</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#a3c8efd32f53f7fa8fe100cc188d60be7">kMaxSimultaneousProfiles</a> = 100;
<a name="l00321"></a>00321 
<a name="l00322"></a>00322  <span class="keyword">private</span>:
<a name="l00323"></a>00323   <span class="keyword">const</span> <span class="keywordtype">char</span>* GetFunctionName(<a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* name) {
<a name="l00324"></a>00324     <span class="keywordflow">return</span> function_and_resource_names_.<a class="code" href="classv8_1_1internal_1_1_strings_storage.html#a56cb13652ceeaeab9dd7d4e2b74a133a">GetFunctionName</a>(name);
<a name="l00325"></a>00325   }
<a name="l00326"></a>00326   <span class="keyword">const</span> <span class="keywordtype">char</span>* GetFunctionName(<span class="keyword">const</span> <span class="keywordtype">char</span>* name) {
<a name="l00327"></a>00327     <span class="keywordflow">return</span> function_and_resource_names_.<a class="code" href="classv8_1_1internal_1_1_strings_storage.html#a56cb13652ceeaeab9dd7d4e2b74a133a">GetFunctionName</a>(name);
<a name="l00328"></a>00328   }
<a name="l00329"></a>00329   <span class="keywordtype">int</span> GetProfileIndex(<span class="keywordtype">unsigned</span> uid);
<a name="l00330"></a>00330   List&lt;CpuProfile*&gt;* GetProfilesList(<span class="keywordtype">int</span> security_token_id);
<a name="l00331"></a>00331   <span class="keywordtype">int</span> TokenToIndex(<span class="keywordtype">int</span> security_token_id);
<a name="l00332"></a>00332 
<a name="l00333"></a>00333   INLINE(<span class="keyword">static</span> <span class="keywordtype">bool</span> UidsMatch(<span class="keywordtype">void</span>* key1, <span class="keywordtype">void</span>* key2)) {
<a name="l00334"></a>00334     <span class="keywordflow">return</span> key1 == key2;
<a name="l00335"></a>00335   }
<a name="l00336"></a>00336 
<a name="l00337"></a>00337   StringsStorage function_and_resource_names_;
<a name="l00338"></a>00338   List&lt;CodeEntry*&gt; code_entries_;
<a name="l00339"></a>00339   List&lt;List&lt;CpuProfile*&gt;* &gt; profiles_by_token_;
<a name="l00340"></a>00340   <span class="comment">// Mapping from profiles&#39; uids to indexes in the second nested list</span>
<a name="l00341"></a>00341   <span class="comment">// of profiles_by_token_.</span>
<a name="l00342"></a>00342   <a class="code" href="namespacev8_1_1internal.html#a7e7097fccc44a6d27c2a2c5c1eca3e7b">HashMap</a> profiles_uids_;
<a name="l00343"></a>00343   List&lt;CpuProfile*&gt; detached_profiles_;
<a name="l00344"></a>00344 
<a name="l00345"></a>00345   <span class="comment">// Accessed by VM thread and profile generator thread.</span>
<a name="l00346"></a>00346   List&lt;CpuProfile*&gt; current_profiles_;
<a name="l00347"></a>00347   Semaphore* current_profiles_semaphore_;
<a name="l00348"></a>00348 
<a name="l00349"></a>00349   DISALLOW_COPY_AND_ASSIGN(<a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#aeb866203a13b444d5848be3fc0bde3bf">CpuProfilesCollection</a>);
<a name="l00350"></a>00350 };
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 
<a name="l00353"></a><a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html">00353</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html">SampleRateCalculator</a> {
<a name="l00354"></a>00354  <span class="keyword">public</span>:
<a name="l00355"></a><a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html#a24787c7f97348e5fbf4a94b1483a5285">00355</a>   <a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html#a24787c7f97348e5fbf4a94b1483a5285">SampleRateCalculator</a>()
<a name="l00356"></a>00356       : result_(<a class="code" href="classv8_1_1internal_1_1_logger.html">Logger</a>::kSamplingIntervalMs * kResultScale),
<a name="l00357"></a>00357         ticks_per_ms_(<a class="code" href="classv8_1_1internal_1_1_logger.html">Logger</a>::kSamplingIntervalMs),
<a name="l00358"></a>00358         measurements_count_(0),
<a name="l00359"></a>00359         wall_time_query_countdown_(1) {
<a name="l00360"></a>00360   }
<a name="l00361"></a>00361 
<a name="l00362"></a><a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html#a8423bec24ec296debc6847a052cb84ad">00362</a>   <span class="keywordtype">double</span> <a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html#a8423bec24ec296debc6847a052cb84ad">ticks_per_ms</a>() {
<a name="l00363"></a>00363     <span class="keywordflow">return</span> result_ / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(kResultScale);
<a name="l00364"></a>00364   }
<a name="l00365"></a>00365   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html#a26aa4243f895395ff9ff94bf777adcf1">Tick</a>();
<a name="l00366"></a>00366   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html#aafb0262cbab62db0691550a8b10308ec">UpdateMeasurements</a>(<span class="keywordtype">double</span> current_time);
<a name="l00367"></a>00367 
<a name="l00368"></a>00368   <span class="comment">// Instead of querying current wall time each tick,</span>
<a name="l00369"></a>00369   <span class="comment">// we use this constant to control query intervals.</span>
<a name="l00370"></a><a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html#a41626b5045c4f99aedc0572095b9a249">00370</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html#a41626b5045c4f99aedc0572095b9a249">kWallTimeQueryIntervalMs</a> = 100;
<a name="l00371"></a>00371 
<a name="l00372"></a>00372  <span class="keyword">private</span>:
<a name="l00373"></a>00373   <span class="comment">// As the result needs to be accessed from a different thread, we</span>
<a name="l00374"></a>00374   <span class="comment">// use type that guarantees atomic writes to memory.  There should</span>
<a name="l00375"></a>00375   <span class="comment">// be &lt;= 1000 ticks per second, thus storing a value of a 10 ** 5</span>
<a name="l00376"></a>00376   <span class="comment">// order should provide enough precision while keeping away from a</span>
<a name="l00377"></a>00377   <span class="comment">// potential overflow.</span>
<a name="l00378"></a>00378   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kResultScale = 100000;
<a name="l00379"></a>00379 
<a name="l00380"></a>00380   <a class="code" href="namespacev8_1_1internal.html#a7cd548187d7b89cfd0d11f006298afd2">AtomicWord</a> result_;
<a name="l00381"></a>00381   <span class="comment">// All other fields are accessed only from the sampler thread.</span>
<a name="l00382"></a>00382   <span class="keywordtype">double</span> ticks_per_ms_;
<a name="l00383"></a>00383   <span class="keywordtype">unsigned</span> measurements_count_;
<a name="l00384"></a>00384   <span class="keywordtype">unsigned</span> wall_time_query_countdown_;
<a name="l00385"></a>00385   <span class="keywordtype">double</span> last_wall_time_;
<a name="l00386"></a>00386 
<a name="l00387"></a>00387   DISALLOW_COPY_AND_ASSIGN(<a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html">SampleRateCalculator</a>);
<a name="l00388"></a>00388 };
<a name="l00389"></a>00389 
<a name="l00390"></a>00390 
<a name="l00391"></a><a class="code" href="classv8_1_1internal_1_1_profile_generator.html">00391</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_profile_generator.html">ProfileGenerator</a> {
<a name="l00392"></a>00392  <span class="keyword">public</span>:
<a name="l00393"></a>00393   <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a538d180f766813125ded7ce7d5e69693">ProfileGenerator</a>(<a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html">CpuProfilesCollection</a>* profiles);
<a name="l00394"></a>00394 
<a name="l00395"></a><a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a1c6e99d2a789552b2c3aa2ded696fb4f">00395</a>   <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a1c6e99d2a789552b2c3aa2ded696fb4f">INLINE</a>(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* NewCodeEntry(<a class="code" href="classv8_1_1internal_1_1_logger.html#af031bcdf46403d7334622c4c1df6777a">Logger::LogEventsAndTags</a> tag,
<a name="l00396"></a>00396                                  <a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* name,
<a name="l00397"></a>00397                                  <a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* resource_name,
<a name="l00398"></a>00398                                  <span class="keywordtype">int</span> line_number)) {
<a name="l00399"></a>00399     <span class="keywordflow">return</span> profiles_-&gt;<a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#ab48c126c0144f113bddca37adcf213dc">NewCodeEntry</a>(tag, name, resource_name, line_number);
<a name="l00400"></a>00400   }
<a name="l00401"></a>00401 
<a name="l00402"></a><a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a30e62bf6e26b01e23f7ed79b022091d1">00402</a>   <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a1c6e99d2a789552b2c3aa2ded696fb4f">INLINE</a>(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* NewCodeEntry(<a class="code" href="classv8_1_1internal_1_1_logger.html#af031bcdf46403d7334622c4c1df6777a">Logger::LogEventsAndTags</a> tag,
<a name="l00403"></a>00403                                  <span class="keyword">const</span> <span class="keywordtype">char</span>* name)) {
<a name="l00404"></a>00404     <span class="keywordflow">return</span> profiles_-&gt;<a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#ab48c126c0144f113bddca37adcf213dc">NewCodeEntry</a>(tag, name);
<a name="l00405"></a>00405   }
<a name="l00406"></a>00406 
<a name="l00407"></a><a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a3996dafaf6a496a505db8661b0601adc">00407</a>   <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a1c6e99d2a789552b2c3aa2ded696fb4f">INLINE</a>(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* NewCodeEntry(<a class="code" href="classv8_1_1internal_1_1_logger.html#af031bcdf46403d7334622c4c1df6777a">Logger::LogEventsAndTags</a> tag,
<a name="l00408"></a>00408                                  <span class="keyword">const</span> <span class="keywordtype">char</span>* name_prefix,
<a name="l00409"></a>00409                                  <a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* name)) {
<a name="l00410"></a>00410     <span class="keywordflow">return</span> profiles_-&gt;<a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#ab48c126c0144f113bddca37adcf213dc">NewCodeEntry</a>(tag, name_prefix, name);
<a name="l00411"></a>00411   }
<a name="l00412"></a>00412 
<a name="l00413"></a><a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a6b8f4304360da44afa130621bdd5dbd5">00413</a>   <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a1c6e99d2a789552b2c3aa2ded696fb4f">INLINE</a>(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* NewCodeEntry(<a class="code" href="classv8_1_1internal_1_1_logger.html#af031bcdf46403d7334622c4c1df6777a">Logger::LogEventsAndTags</a> tag,
<a name="l00414"></a>00414                                  <span class="keywordtype">int</span> args_count)) {
<a name="l00415"></a>00415     <span class="keywordflow">return</span> profiles_-&gt;<a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#ab48c126c0144f113bddca37adcf213dc">NewCodeEntry</a>(tag, args_count);
<a name="l00416"></a>00416   }
<a name="l00417"></a>00417 
<a name="l00418"></a><a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a48d8627ea30d5e76ac83d11d1135b7c3">00418</a>   <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a48d8627ea30d5e76ac83d11d1135b7c3">INLINE</a>(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* NewCodeEntry(<span class="keywordtype">int</span> security_token_id)) {
<a name="l00419"></a>00419     <span class="keywordflow">return</span> profiles_-&gt;<a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html#ab48c126c0144f113bddca37adcf213dc">NewCodeEntry</a>(security_token_id);
<a name="l00420"></a>00420   }
<a name="l00421"></a>00421 
<a name="l00422"></a>00422   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a321d0ff6232f550c83d0ffc43da9f599">RecordTickSample</a>(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_tick_sample.html">TickSample</a>&amp; <a class="code" href="test-log-stack-tracer_8cc.html#a39f7231eef589ea82f0b77319ef65e81">sample</a>);
<a name="l00423"></a>00423 
<a name="l00424"></a><a class="code" href="classv8_1_1internal_1_1_profile_generator.html#aa42a15eecf9d6d38e457ff174e15dcc7">00424</a>   <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#aa42a15eecf9d6d38e457ff174e15dcc7">INLINE</a>(<a class="code" href="classv8_1_1internal_1_1_code_map.html">CodeMap</a>* <a class="code" href="namespacell__prof.html#a1619f9d4300e32ba18b7db1cff5d76a1">code_map</a>()) { <span class="keywordflow">return</span> &amp;code_map_; }
<a name="l00425"></a>00425 
<a name="l00426"></a><a class="code" href="classv8_1_1internal_1_1_profile_generator.html#abc9b251eb21777069eea5274e25d6c2c">00426</a>   <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#abc9b251eb21777069eea5274e25d6c2c">INLINE</a>(<span class="keywordtype">void</span> Tick()) { sample_rate_calc_.<a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html#a26aa4243f895395ff9ff94bf777adcf1">Tick</a>(); }
<a name="l00427"></a><a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a8beb1a9da2088fbf12d59c15424a82b2">00427</a>   <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a8beb1a9da2088fbf12d59c15424a82b2">INLINE</a>(<span class="keywordtype">double</span> actual_sampling_rate()) {
<a name="l00428"></a>00428     <span class="keywordflow">return</span> sample_rate_calc_.<a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html#a8423bec24ec296debc6847a052cb84ad">ticks_per_ms</a>();
<a name="l00429"></a>00429   }
<a name="l00430"></a>00430 
<a name="l00431"></a><a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a7e8e3ed13167a45c3b2792661d21d80e">00431</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a7e8e3ed13167a45c3b2792661d21d80e">kAnonymousFunctionName</a>;
<a name="l00432"></a><a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a5c858e88eaf2ce61922e772d7917b94a">00432</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a5c858e88eaf2ce61922e772d7917b94a">kProgramEntryName</a>;
<a name="l00433"></a><a class="code" href="classv8_1_1internal_1_1_profile_generator.html#ad28e87812af663a735d2dc3352729ea4">00433</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#ad28e87812af663a735d2dc3352729ea4">kGarbageCollectorEntryName</a>;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435  <span class="keyword">private</span>:
<a name="l00436"></a>00436   <a class="code" href="classv8_1_1internal_1_1_profile_generator.html#a1c6e99d2a789552b2c3aa2ded696fb4f">INLINE</a>(<a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* EntryForVMState(<a class="code" href="namespacev8_1_1internal.html#ab775026bddb511c710f48fd6c75eaaee">StateTag</a> tag));
<a name="l00437"></a>00437 
<a name="l00438"></a>00438   <a class="code" href="classv8_1_1internal_1_1_cpu_profiles_collection.html">CpuProfilesCollection</a>* profiles_;
<a name="l00439"></a>00439   <a class="code" href="classv8_1_1internal_1_1_code_map.html">CodeMap</a> code_map_;
<a name="l00440"></a>00440   <a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* program_entry_;
<a name="l00441"></a>00441   <a class="code" href="classv8_1_1internal_1_1_code_entry.html">CodeEntry</a>* gc_entry_;
<a name="l00442"></a>00442   <a class="code" href="classv8_1_1internal_1_1_sample_rate_calculator.html">SampleRateCalculator</a> sample_rate_calc_;
<a name="l00443"></a>00443 
<a name="l00444"></a>00444   DISALLOW_COPY_AND_ASSIGN(<a class="code" href="classv8_1_1internal_1_1_profile_generator.html">ProfileGenerator</a>);
<a name="l00445"></a>00445 };
<a name="l00446"></a>00446 
<a name="l00447"></a>00447 
<a name="l00448"></a>00448 <span class="keyword">class </span>HeapEntry;
<a name="l00449"></a>00449 
<a name="l00450"></a>00450 <span class="keyword">class </span><a class="code" href="classv8_1_1_heap_graph_edge.html">HeapGraphEdge</a> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html">BASE_EMBEDDED</a> {
<a name="l00451"></a>00451  <span class="keyword">public</span>:
<a name="l00452"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9">00452</a>   <span class="keyword">enum</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9">Type</a> {
<a name="l00453"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9ad5c47671e8dfb3177487310f4abe9d58">00453</a>     kContextVariable = <a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259ba961a7c0ca26377d4eb9bb82bdcf63ddd">v8::HeapGraphEdge::kContextVariable</a>,
<a name="l00454"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9ac2810bb2324c1051624a1bd755290c94">00454</a>     kElement = <a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259ba02517c100def447ed83a653e70406dde">v8::HeapGraphEdge::kElement</a>,
<a name="l00455"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9ad85ddc709536e282306c30a86ec4d2f3">00455</a>     kProperty = <a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259ba9e36d9379269968e7742cfd59e0e4e41">v8::HeapGraphEdge::kProperty</a>,
<a name="l00456"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9a0487375e1978182bb7d997d2bc4cf75a">00456</a>     kInternal = <a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259ba0069a287dd6e662a89cfac11f2f4544b">v8::HeapGraphEdge::kInternal</a>,
<a name="l00457"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9a3df794d7c0926c2d3fbef7f932aae239">00457</a>     kHidden = <a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259bae3470dd36fc8f97e910d8d77decf5695">v8::HeapGraphEdge::kHidden</a>,
<a name="l00458"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9a4905da5840f072ca233308bfd50d14aa">00458</a>     kShortcut = <a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259ba2b64b91a4e16ef3e33fdef57a9488d3e">v8::HeapGraphEdge::kShortcut</a>,
<a name="l00459"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9abce1de9dc2642ed11ee4e5af6524512c">00459</a>     kWeak = <a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259ba93fb3b0bf4c8eeb82ebf84b8ee3c5ccf">v8::HeapGraphEdge::kWeak</a>
<a name="l00460"></a>00460   };
<a name="l00461"></a>00461 
<a name="l00462"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#abfb5b377b85af30dbf51905018babbae">00462</a>   <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#abfb5b377b85af30dbf51905018babbae">HeapGraphEdge</a>() { }
<a name="l00463"></a>00463   <span class="keywordtype">void</span> Init(<span class="keywordtype">int</span> child_index, Type <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* name, HeapEntry* to);
<a name="l00464"></a>00464   <span class="keywordtype">void</span> Init(<span class="keywordtype">int</span> child_index, Type <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>, <span class="keywordtype">int</span> index, HeapEntry* to);
<a name="l00465"></a>00465   <span class="keywordtype">void</span> Init(<span class="keywordtype">int</span> child_index, <span class="keywordtype">int</span> index, HeapEntry* to);
<a name="l00466"></a>00466 
<a name="l00467"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#af98803058cf036665f3ce080428503e3">00467</a>   <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9">Type</a> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#af98803058cf036665f3ce080428503e3">type</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9">Type</a><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a>); }
<a name="l00468"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a96c5297cf77a89dca171ef93fcd51b01">00468</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a96c5297cf77a89dca171ef93fcd51b01">index</a>()<span class="keyword"> const </span>{
<a name="l00469"></a>00469     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a> == kElement || <a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a> == kHidden || <a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a> == kWeak);
<a name="l00470"></a>00470     <span class="keywordflow">return</span> index_;
<a name="l00471"></a>00471   }
<a name="l00472"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#aa902f4e67ef51143901a2fced6f4a23f">00472</a>   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#aa902f4e67ef51143901a2fced6f4a23f">name</a>()<span class="keyword"> const </span>{
<a name="l00473"></a>00473     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(<a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a> == kContextVariable
<a name="l00474"></a>00474            || <a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a> == kProperty
<a name="l00475"></a>00475            || <a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a> == kInternal
<a name="l00476"></a>00476            || <a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a> == kShortcut);
<a name="l00477"></a>00477     <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#aaf548c2d1890a43aa4382b5a616fcd7c">name_</a>;
<a name="l00478"></a>00478   }
<a name="l00479"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a9a669b2c3713f05359908e69c09da8e7">00479</a>   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a9a669b2c3713f05359908e69c09da8e7">to</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> to_; }
<a name="l00480"></a>00480   <a class="code" href="namespacev8_1_1internal.html#a8c46580ca791cef8aa667666d75ef35d">INLINE</a>(HeapEntry* from() <span class="keyword">const</span>);
<a name="l00481"></a>00481 
<a name="l00482"></a>00482  <span class="keyword">private</span>:
<a name="l00483"></a>00483   <span class="keywordtype">int</span> child_index_ : 29;
<a name="l00484"></a>00484   <span class="keywordtype">unsigned</span> <a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a> : 3;
<a name="l00485"></a>00485   <span class="keyword">union </span>{
<a name="l00486"></a>00486     <span class="keywordtype">int</span> index_;
<a name="l00487"></a>00487     <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacev8_1_1internal.html#aaf548c2d1890a43aa4382b5a616fcd7c">name_</a>;
<a name="l00488"></a>00488   };
<a name="l00489"></a>00489   HeapEntry* to_;
<a name="l00490"></a>00490 
<a name="l00491"></a>00491   <a class="code" href="globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code" href="classv8_1_1_heap_graph_edge.html">HeapGraphEdge</a>);
<a name="l00492"></a>00492 };
<a name="l00493"></a>00493 
<a name="l00494"></a>00494 
<a name="l00495"></a>00495 <span class="keyword">class </span>HeapSnapshot;
<a name="l00496"></a>00496 
<a name="l00497"></a>00497 <span class="comment">// HeapEntry instances represent an entity from the heap (or a special</span>
<a name="l00498"></a>00498 <span class="comment">// virtual node, e.g. root). To make heap snapshots more compact,</span>
<a name="l00499"></a>00499 <span class="comment">// HeapEntries has a special memory layout (no Vectors or Lists used):</span>
<a name="l00500"></a>00500 <span class="comment">//</span>
<a name="l00501"></a>00501 <span class="comment">//   +-----------------+</span>
<a name="l00502"></a>00502 <span class="comment">//        HeapEntry</span>
<a name="l00503"></a>00503 <span class="comment">//   +-----------------+</span>
<a name="l00504"></a>00504 <span class="comment">//      HeapGraphEdge    |</span>
<a name="l00505"></a>00505 <span class="comment">//           ...         } children_count</span>
<a name="l00506"></a>00506 <span class="comment">//      HeapGraphEdge    |</span>
<a name="l00507"></a>00507 <span class="comment">//   +-----------------+</span>
<a name="l00508"></a>00508 <span class="comment">//      HeapGraphEdge*   |</span>
<a name="l00509"></a>00509 <span class="comment">//           ...         } retainers_count</span>
<a name="l00510"></a>00510 <span class="comment">//      HeapGraphEdge*   |</span>
<a name="l00511"></a>00511 <span class="comment">//   +-----------------+</span>
<a name="l00512"></a>00512 <span class="comment">//</span>
<a name="l00513"></a>00513 <span class="comment">// In a HeapSnapshot, all entries are hand-allocated in a continuous array</span>
<a name="l00514"></a>00514 <span class="comment">// of raw bytes.</span>
<a name="l00515"></a>00515 <span class="comment">//</span>
<a name="l00516"></a>00516 <span class="keyword">class </span>HeapEntry <a class="code" href="allocation_8h.html#abab81306d90d0b82732d5bed93a0a588">BASE_EMBEDDED</a> {
<a name="l00517"></a>00517  <span class="keyword">public</span>:
<a name="l00518"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9">00518</a>   <span class="keyword">enum</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9">Type</a> {
<a name="l00519"></a>00519     kHidden = <a class="code" href="classv8_1_1_heap_graph_node.html#ab674a58103a51abc56f99edc6a1479eda371c8d30618cf1d4a61a1974c966034d">v8::HeapGraphNode::kHidden</a>,
<a name="l00520"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9a5e68cf8ee7b2965ee7690427952de66f">00520</a>     kArray = <a class="code" href="classv8_1_1_heap_graph_node.html#ab674a58103a51abc56f99edc6a1479eda6d36647564d3fa18fba58e0d984270d9">v8::HeapGraphNode::kArray</a>,
<a name="l00521"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9a8bb43fc1dbd5f3e8728d9fce181372cc">00521</a>     kString = <a class="code" href="classv8_1_1_heap_graph_node.html#ab674a58103a51abc56f99edc6a1479edac38e03929fcffec54b9523ed8d1f64a3">v8::HeapGraphNode::kString</a>,
<a name="l00522"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9a24b50b12d24fb54471f1e981e018a3ef">00522</a>     kObject = <a class="code" href="classv8_1_1_heap_graph_node.html#ab674a58103a51abc56f99edc6a1479eda76d80ad86d479d892fb2af4f94bb4e2e">v8::HeapGraphNode::kObject</a>,
<a name="l00523"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9afff03e0d65bf9a194b5c065a236bd129">00523</a>     kCode = <a class="code" href="classv8_1_1_heap_graph_node.html#ab674a58103a51abc56f99edc6a1479eda11d045482774375281af260238a32480">v8::HeapGraphNode::kCode</a>,
<a name="l00524"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9a9cb2d021472d8b63d4a61d7d8c4b28ca">00524</a>     kClosure = <a class="code" href="classv8_1_1_heap_graph_node.html#ab674a58103a51abc56f99edc6a1479eda3b6e27079e35760a722c6c335f37eb21">v8::HeapGraphNode::kClosure</a>,
<a name="l00525"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9a8f0de753f38144ead13008262eae0dc8">00525</a>     kRegExp = <a class="code" href="classv8_1_1_heap_graph_node.html#ab674a58103a51abc56f99edc6a1479edacc9a687dc74f249b333213bc26193fb2">v8::HeapGraphNode::kRegExp</a>,
<a name="l00526"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9a3a9c739f13f42946d6fc95db49fd60bb">00526</a>     kHeapNumber = <a class="code" href="classv8_1_1_heap_graph_node.html#ab674a58103a51abc56f99edc6a1479eda995d175b44663293d42a335861f7904b">v8::HeapGraphNode::kHeapNumber</a>,
<a name="l00527"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9a63a6c256db42f834c6938384d62718b7">00527</a>     kNative = <a class="code" href="classv8_1_1_heap_graph_node.html#ab674a58103a51abc56f99edc6a1479eda59a5882c06b8ed29cd7603a16cfa7441">v8::HeapGraphNode::kNative</a>,
<a name="l00528"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9a616da0e46d137361193e2ab789fa322e">00528</a>     kSynthetic = <a class="code" href="classv8_1_1_heap_graph_node.html#ab674a58103a51abc56f99edc6a1479edac80678d96a1feb06a1020169270d3759">v8::HeapGraphNode::kSynthetic</a>
<a name="l00529"></a>00529   };
<a name="l00530"></a>00530 
<a name="l00531"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a3fac8db81409c92ff20fd1690fb765dd">00531</a>   <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a3fac8db81409c92ff20fd1690fb765dd">HeapEntry</a>() { }
<a name="l00532"></a>00532   <span class="keywordtype">void</span> Init(<a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* snapshot,
<a name="l00533"></a>00533             Type <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>,
<a name="l00534"></a>00534             <span class="keyword">const</span> <span class="keywordtype">char</span>* name,
<a name="l00535"></a>00535             <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <span class="keywordtype">id</span>,
<a name="l00536"></a>00536             <span class="keywordtype">int</span> self_size,
<a name="l00537"></a>00537             <span class="keywordtype">int</span> children_count,
<a name="l00538"></a>00538             <span class="keywordtype">int</span> retainers_count);
<a name="l00539"></a>00539 
<a name="l00540"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a13b246d84ee5ebad0979a0f3a1224bf5">00540</a>   <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a13b246d84ee5ebad0979a0f3a1224bf5">snapshot</a>() { <span class="keywordflow">return</span> snapshot_; }
<a name="l00541"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a558c37801333d66d6cd0b02b8253acd3">00541</a>   <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9">Type</a> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a558c37801333d66d6cd0b02b8253acd3">type</a>() { <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a86d4e2d8815ac6f9c09a8ff25971ffb9">Type</a><span class="keyword">&gt;</span>(<a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a>); }
<a name="l00542"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a7eddec1ce86ceae411c915acaa4a82e3">00542</a>   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a7eddec1ce86ceae411c915acaa4a82e3">name</a>() { <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#aaf548c2d1890a43aa4382b5a616fcd7c">name_</a>; }
<a name="l00543"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a66f2f47d835c720caf79dd1a5b43dce1">00543</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a66f2f47d835c720caf79dd1a5b43dce1">set_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* name) { <a class="code" href="namespacev8_1_1internal.html#aaf548c2d1890a43aa4382b5a616fcd7c">name_</a> = <a class="code" href="namespacev8_1_1internal.html#a81b49fe6af51fab72b8b2ee86f70d4dd">name</a>; }
<a name="l00544"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a338e794537bff31d540ec142fe3c6744">00544</a>   <span class="keyword">inline</span> <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a338e794537bff31d540ec142fe3c6744">id</a>() { <span class="keywordflow">return</span> id_; }
<a name="l00545"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ac74f6a138b64914686bd8dcbbd380e28">00545</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ac74f6a138b64914686bd8dcbbd380e28">self_size</a>() { <span class="keywordflow">return</span> self_size_; }
<a name="l00546"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a5da02ad1aeafbffcc684e710a3463269">00546</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a5da02ad1aeafbffcc684e710a3463269">retained_size</a>() { <span class="keywordflow">return</span> retained_size_; }
<a name="l00547"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ab51ad185e00b59555bb4224e246dc10d">00547</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ab51ad185e00b59555bb4224e246dc10d">add_retained_size</a>(<span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#abf135806b67fe9f9a823fbbbe25de86b">size</a>) { retained_size_ += <a class="code" href="namespacev8_1_1internal.html#abf135806b67fe9f9a823fbbbe25de86b">size</a>; }
<a name="l00548"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#aa9f1e57c365e0bbe58c6777f51becf88">00548</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#aa9f1e57c365e0bbe58c6777f51becf88">set_retained_size</a>(<span class="keywordtype">int</span> value) { retained_size_ = value; }
<a name="l00549"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ac115324932981f6debecba4bae2a9f46">00549</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ac115324932981f6debecba4bae2a9f46">ordered_index</a>() { <span class="keywordflow">return</span> ordered_index_; }
<a name="l00550"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a56a9800f2c775d1476fda98d9138e087">00550</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a56a9800f2c775d1476fda98d9138e087">set_ordered_index</a>(<span class="keywordtype">int</span> value) { ordered_index_ = value; }
<a name="l00551"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#abf572472ab734a45ed9dda57afe88171">00551</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#abf572472ab734a45ed9dda57afe88171">entry_index</a>() { <span class="keywordflow">return</span> entry_index_; }
<a name="l00552"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#aba9532b670ed20e35f75edc0adec6485">00552</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#aba9532b670ed20e35f75edc0adec6485">set_entry_index</a>(<span class="keywordtype">int</span> value) { entry_index_ = value; }
<a name="l00553"></a>00553 
<a name="l00554"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ad00325b090b2ee88b5fafcc94174525a">00554</a>   <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;HeapGraphEdge&gt;</a> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ad00325b090b2ee88b5fafcc94174525a">children</a>() {
<a name="l00555"></a>00555     <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;HeapGraphEdge&gt;</a>(children_arr(), children_count_); }
<a name="l00556"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ab55302957233f050477a320c68a3d2f5">00556</a>   <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;HeapGraphEdge*&gt;</a> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ab55302957233f050477a320c68a3d2f5">retainers</a>() {
<a name="l00557"></a>00557     <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;HeapGraphEdge*&gt;</a>(retainers_arr(), retainers_count_); }
<a name="l00558"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ad9896a198206851515fea752e67d8d4c">00558</a>   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ad9896a198206851515fea752e67d8d4c">dominator</a>() { <span class="keywordflow">return</span> dominator_; }
<a name="l00559"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a520a18a11ce027ff1353396a0d615000">00559</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a520a18a11ce027ff1353396a0d615000">set_dominator</a>(HeapEntry* entry) {
<a name="l00560"></a>00560     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(entry != <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>);
<a name="l00561"></a>00561     dominator_ = entry;
<a name="l00562"></a>00562   }
<a name="l00563"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a21f845f2765a15728f36cd2dcbf3d56d">00563</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a21f845f2765a15728f36cd2dcbf3d56d">clear_paint</a>() { painted_ = <span class="keyword">false</span>; }
<a name="l00564"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#afd86e931ca94ec778c02fa37eb566995">00564</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#afd86e931ca94ec778c02fa37eb566995">painted</a>() { <span class="keywordflow">return</span> painted_; }
<a name="l00565"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a5f60dfce6f16d47b4c70b7aef5c92227">00565</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a5f60dfce6f16d47b4c70b7aef5c92227">paint</a>() { painted_ = <span class="keyword">true</span>; }
<a name="l00566"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#af7391af9e54e8f82d39e2e5cf78952f7">00566</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#af7391af9e54e8f82d39e2e5cf78952f7">user_reachable</a>() { <span class="keywordflow">return</span> user_reachable_; }
<a name="l00567"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a539ce2200899c160d7477057d2670a3b">00567</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a539ce2200899c160d7477057d2670a3b">set_user_reachable</a>() { user_reachable_ = <span class="keyword">true</span>; }
<a name="l00568"></a>00568 
<a name="l00569"></a>00569   <span class="keywordtype">void</span> SetIndexedReference(<a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259b">HeapGraphEdge::Type</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>,
<a name="l00570"></a>00570                            <span class="keywordtype">int</span> child_index,
<a name="l00571"></a>00571                            <span class="keywordtype">int</span> index,
<a name="l00572"></a>00572                            HeapEntry* entry,
<a name="l00573"></a>00573                            <span class="keywordtype">int</span> retainer_index);
<a name="l00574"></a>00574   <span class="keywordtype">void</span> SetNamedReference(<a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259b">HeapGraphEdge::Type</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>,
<a name="l00575"></a>00575                          <span class="keywordtype">int</span> child_index,
<a name="l00576"></a>00576                          <span class="keyword">const</span> <span class="keywordtype">char</span>* name,
<a name="l00577"></a>00577                          HeapEntry* entry,
<a name="l00578"></a>00578                          <span class="keywordtype">int</span> retainer_index);
<a name="l00579"></a>00579   <span class="keywordtype">void</span> SetUnidirElementReference(<span class="keywordtype">int</span> child_index, <span class="keywordtype">int</span> index, HeapEntry* entry);
<a name="l00580"></a>00580 
<a name="l00581"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#affc214f91dea946a8773a698b1a59e83">00581</a>   <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#affc214f91dea946a8773a698b1a59e83">EntrySize</a>() {
<a name="l00582"></a>00582     <span class="keywordflow">return</span> EntriesSize(1, children_count_, retainers_count_);
<a name="l00583"></a>00583   }
<a name="l00584"></a>00584 
<a name="l00585"></a>00585   <span class="keywordtype">void</span> <a class="code" href="lineprocessor_8cc.html#ae894408d53a5dd2fec4c3e7ea09d5d4b">Print</a>(
<a name="l00586"></a>00586       <span class="keyword">const</span> <span class="keywordtype">char</span>* prefix, <span class="keyword">const</span> <span class="keywordtype">char</span>* edge_name, <span class="keywordtype">int</span> max_depth, <span class="keywordtype">int</span> indent);
<a name="l00587"></a>00587 
<a name="l00588"></a>00588   <a class="code" href="classv8_1_1internal_1_1_handle.html">Handle&lt;HeapObject&gt;</a> GetHeapObject();
<a name="l00589"></a>00589 
<a name="l00590"></a>00590   <span class="keyword">static</span> <span class="keywordtype">size_t</span> EntriesSize(<span class="keywordtype">int</span> entries_count,
<a name="l00591"></a>00591                             <span class="keywordtype">int</span> children_count,
<a name="l00592"></a>00592                             <span class="keywordtype">int</span> retainers_count);
<a name="l00593"></a>00593 
<a name="l00594"></a>00594  <span class="keyword">private</span>:
<a name="l00595"></a>00595   <a class="code" href="classv8_1_1_heap_graph_edge.html">HeapGraphEdge</a>* children_arr() {
<a name="l00596"></a>00596     <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classv8_1_1_heap_graph_edge.html">HeapGraphEdge</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span> + 1);
<a name="l00597"></a>00597   }
<a name="l00598"></a>00598   <a class="code" href="classv8_1_1_heap_graph_edge.html">HeapGraphEdge</a>** retainers_arr() {
<a name="l00599"></a>00599     <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classv8_1_1_heap_graph_edge.html">HeapGraphEdge</a>**<span class="keyword">&gt;</span>(children_arr() + children_count_);
<a name="l00600"></a>00600   }
<a name="l00601"></a>00601   <span class="keyword">const</span> <span class="keywordtype">char</span>* TypeAsString();
<a name="l00602"></a>00602 
<a name="l00603"></a>00603   <span class="keywordtype">unsigned</span> painted_: 1;
<a name="l00604"></a>00604   <span class="keywordtype">unsigned</span> user_reachable_: 1;
<a name="l00605"></a>00605   <span class="keywordtype">unsigned</span> <a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a>: 4;
<a name="l00606"></a>00606   <span class="keywordtype">int</span> children_count_: 26;
<a name="l00607"></a>00607   <span class="keywordtype">int</span> retainers_count_;
<a name="l00608"></a>00608   <span class="keywordtype">int</span> self_size_;
<a name="l00609"></a>00609   <span class="keyword">union </span>{
<a name="l00610"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ae3259dea196f7a9e879890bfa510cc19">00610</a>     <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ae3259dea196f7a9e879890bfa510cc19">ordered_index_</a>;  <span class="comment">// Used during dominator tree building.</span>
<a name="l00611"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a9984bed33e50ea59e396e23b430b5807">00611</a>     <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a9984bed33e50ea59e396e23b430b5807">retained_size_</a>;  <span class="comment">// At that moment, there is no retained size yet.</span>
<a name="l00612"></a>00612   };
<a name="l00613"></a>00613   <span class="keywordtype">int</span> entry_index_;
<a name="l00614"></a>00614   <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> id_;
<a name="l00615"></a>00615   HeapEntry* dominator_;
<a name="l00616"></a>00616   <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* snapshot_;
<a name="l00617"></a>00617   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="namespacev8_1_1internal.html#aaf548c2d1890a43aa4382b5a616fcd7c">name_</a>;
<a name="l00618"></a>00618 
<a name="l00619"></a>00619   <a class="code" href="globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a>(HeapEntry);
<a name="l00620"></a>00620 };
<a name="l00621"></a>00621 
<a name="l00622"></a>00622 
<a name="l00623"></a>00623 <span class="keyword">class </span>HeapSnapshotsCollection;
<a name="l00624"></a>00624 
<a name="l00625"></a>00625 <span class="comment">// HeapSnapshot represents a single heap snapshot. It is stored in</span>
<a name="l00626"></a>00626 <span class="comment">// HeapSnapshotsCollection, which is also a factory for</span>
<a name="l00627"></a>00627 <span class="comment">// HeapSnapshots. All HeapSnapshots share strings copied from JS heap</span>
<a name="l00628"></a>00628 <span class="comment">// to be able to return them even if they were collected.</span>
<a name="l00629"></a>00629 <span class="comment">// HeapSnapshotGenerator fills in a HeapSnapshot.</span>
<a name="l00630"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">00630</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a> {
<a name="l00631"></a>00631  <span class="keyword">public</span>:
<a name="l00632"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a622506c14e42e2d98daab32d5930c339">00632</a>   <span class="keyword">enum</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a622506c14e42e2d98daab32d5930c339">Type</a> {
<a name="l00633"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a622506c14e42e2d98daab32d5930c339a1271b1b128548cb92c8278e26edc36f5">00633</a>     <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a622506c14e42e2d98daab32d5930c339a1271b1b128548cb92c8278e26edc36f5">kFull</a> = <a class="code" href="classv8_1_1_heap_snapshot.html#ac199f9738b2143064af09e50a48b466da703f810bb8d5a96edb7d50e5db12c5bf">v8::HeapSnapshot::kFull</a>
<a name="l00634"></a>00634   };
<a name="l00635"></a>00635 
<a name="l00636"></a>00636   <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a3f7f79679bb99737546224736f8a0188">HeapSnapshot</a>(<a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html">HeapSnapshotsCollection</a>* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a4f566281320bd14b743b51e5c5b1f1fe">collection</a>,
<a name="l00637"></a>00637                <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a622506c14e42e2d98daab32d5930c339">Type</a> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a752f496afcc31cff7a0e0036ffc25950">type</a>,
<a name="l00638"></a>00638                <span class="keyword">const</span> <span class="keywordtype">char</span>* title,
<a name="l00639"></a>00639                <span class="keywordtype">unsigned</span> uid);
<a name="l00640"></a>00640   <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a9790e71a31adcac21629b45095be3d2e">~HeapSnapshot</a>();
<a name="l00641"></a>00641   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a92b437132b6ad4bafb6bd8edd5815554">Delete</a>();
<a name="l00642"></a>00642 
<a name="l00643"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a4f566281320bd14b743b51e5c5b1f1fe">00643</a>   <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html">HeapSnapshotsCollection</a>* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a4f566281320bd14b743b51e5c5b1f1fe">collection</a>() { <span class="keywordflow">return</span> collection_; }
<a name="l00644"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a752f496afcc31cff7a0e0036ffc25950">00644</a>   <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a622506c14e42e2d98daab32d5930c339">Type</a> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a752f496afcc31cff7a0e0036ffc25950">type</a>() { <span class="keywordflow">return</span> type_; }
<a name="l00645"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#ad3591790dc6f168d9500431583c7b74b">00645</a>   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#ad3591790dc6f168d9500431583c7b74b">title</a>() { <span class="keywordflow">return</span> title_; }
<a name="l00646"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#ac69688c3d25ae73c6f25e8e748568161">00646</a>   <span class="keywordtype">unsigned</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#ac69688c3d25ae73c6f25e8e748568161">uid</a>() { <span class="keywordflow">return</span> uid_; }
<a name="l00647"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#af1eccb69f8d539b6fe95afc6c2038319">00647</a>   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#af1eccb69f8d539b6fe95afc6c2038319">root</a>() { <span class="keywordflow">return</span> root_entry_; }
<a name="l00648"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#aa85f48da92de18a6e9eeb1097a80b4e3">00648</a>   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#aa85f48da92de18a6e9eeb1097a80b4e3">gc_roots</a>() { <span class="keywordflow">return</span> gc_roots_entry_; }
<a name="l00649"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a70d42345de35bb53a65002f332d2719b">00649</a>   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a70d42345de35bb53a65002f332d2719b">natives_root</a>() { <span class="keywordflow">return</span> natives_root_entry_; }
<a name="l00650"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#ad9e130b78fcc810d3835752c1d069069">00650</a>   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#ad9e130b78fcc810d3835752c1d069069">gc_subroot</a>(<span class="keywordtype">int</span> index) { <span class="keywordflow">return</span> gc_subroot_entries_[index]; }
<a name="l00651"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a93a2f13ec991a9ff0587dec6eb35e8df">00651</a>   <a class="code" href="classv8_1_1internal_1_1_list.html">List&lt;HeapEntry*&gt;</a>* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a93a2f13ec991a9ff0587dec6eb35e8df">entries</a>() { <span class="keywordflow">return</span> &amp;entries_; }
<a name="l00652"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#afc5deca6c061ec52e1b95378107ec7bf">00652</a>   <span class="keywordtype">size_t</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#afc5deca6c061ec52e1b95378107ec7bf">raw_entries_size</a>() { <span class="keywordflow">return</span> raw_entries_size_; }
<a name="l00653"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#addec99cd48c454751bae2133706f83c1">00653</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#addec99cd48c454751bae2133706f83c1">number_of_edges</a>() { <span class="keywordflow">return</span> number_of_edges_; }
<a name="l00654"></a>00654   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a728b4c7878a21901a906fca5f0880d98">RememberLastJSObjectId</a>();
<a name="l00655"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a0f0380a6a599542acc0fa62b6223a059">00655</a>   <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a0f0380a6a599542acc0fa62b6223a059">max_snapshot_js_object_id</a>()<span class="keyword"> const </span>{
<a name="l00656"></a>00656     <span class="keywordflow">return</span> max_snapshot_js_object_id_;
<a name="l00657"></a>00657   }
<a name="l00658"></a>00658 
<a name="l00659"></a>00659   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#abc30b7fc93d7907d9e4b9f2c5f27f5a9">AllocateEntries</a>(
<a name="l00660"></a>00660       <span class="keywordtype">int</span> entries_count, <span class="keywordtype">int</span> children_count, <span class="keywordtype">int</span> retainers_count);
<a name="l00661"></a>00661   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#ae5faf601f9b874288bfdfd14d7097717">AddEntry</a>(HeapEntry::Type <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a752f496afcc31cff7a0e0036ffc25950">type</a>,
<a name="l00662"></a>00662                       <span class="keyword">const</span> <span class="keywordtype">char</span>* name,
<a name="l00663"></a>00663                       <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <span class="keywordtype">id</span>,
<a name="l00664"></a>00664                       <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#abf135806b67fe9f9a823fbbbe25de86b">size</a>,
<a name="l00665"></a>00665                       <span class="keywordtype">int</span> children_count,
<a name="l00666"></a>00666                       <span class="keywordtype">int</span> retainers_count);
<a name="l00667"></a>00667   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#abe2f6e32169b20238763d9f462aad788">AddRootEntry</a>(<span class="keywordtype">int</span> children_count);
<a name="l00668"></a>00668   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a55da99a06cbf7dfec9686bc75ec978ce">AddGcRootsEntry</a>(<span class="keywordtype">int</span> children_count, <span class="keywordtype">int</span> retainers_count);
<a name="l00669"></a>00669   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#aab6e1fee4edebf3c7cd2673be14a675c">AddGcSubrootEntry</a>(<span class="keywordtype">int</span> tag,
<a name="l00670"></a>00670                                <span class="keywordtype">int</span> children_count,
<a name="l00671"></a>00671                                <span class="keywordtype">int</span> retainers_count);
<a name="l00672"></a>00672   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#ae5ae8f32909d7f71e59b2db3df594c23">AddNativesRootEntry</a>(<span class="keywordtype">int</span> children_count, <span class="keywordtype">int</span> retainers_count);
<a name="l00673"></a>00673   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a0658a25d90da7b183adb71fc75f6e6ee">ClearPaint</a>();
<a name="l00674"></a>00674   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#aa8f063ba3910f5bfb9b324fc52a92cca">GetEntryById</a>(<a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <span class="keywordtype">id</span>);
<a name="l00675"></a>00675   <a class="code" href="classv8_1_1internal_1_1_list.html">List&lt;HeapEntry*&gt;</a>* <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a7b7b95d8cda3864b7115ca15a6fc5462">GetSortedEntriesList</a>();
<a name="l00676"></a>00676   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a561a0a5c5e61830fabffb5571afb61fa">SetDominatorsToSelf</a>();
<a name="l00677"></a>00677 
<a name="l00678"></a>00678   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a3c183f20e6935d16ec6a852cfb77b252">Print</a>(<span class="keywordtype">int</span> max_depth);
<a name="l00679"></a>00679   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#aceff3b1868bd174f0e80263595af8355">PrintEntriesSize</a>();
<a name="l00680"></a>00680 
<a name="l00681"></a>00681  <span class="keyword">private</span>:
<a name="l00682"></a>00682   HeapEntry* GetNextEntryToInit();
<a name="l00683"></a>00683 
<a name="l00684"></a>00684   <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html">HeapSnapshotsCollection</a>* collection_;
<a name="l00685"></a>00685   <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a622506c14e42e2d98daab32d5930c339">Type</a> type_;
<a name="l00686"></a>00686   <span class="keyword">const</span> <span class="keywordtype">char</span>* title_;
<a name="l00687"></a>00687   <span class="keywordtype">unsigned</span> uid_;
<a name="l00688"></a>00688   HeapEntry* root_entry_;
<a name="l00689"></a>00689   HeapEntry* gc_roots_entry_;
<a name="l00690"></a>00690   HeapEntry* natives_root_entry_;
<a name="l00691"></a>00691   HeapEntry* gc_subroot_entries_[<a class="code" href="classv8_1_1internal_1_1_visitor_synchronization.html#a0971ddb5cd5a8da91d074f648187da7aa8b5105009b79f2c21d049b480bcd3607">VisitorSynchronization::kNumberOfSyncTags</a>];
<a name="l00692"></a>00692   <span class="keywordtype">char</span>* raw_entries_;
<a name="l00693"></a>00693   <a class="code" href="classv8_1_1internal_1_1_list.html">List&lt;HeapEntry*&gt;</a> entries_;
<a name="l00694"></a>00694   <a class="code" href="classv8_1_1internal_1_1_list.html">List&lt;HeapEntry*&gt;</a> sorted_entries_;
<a name="l00695"></a>00695   <span class="keywordtype">size_t</span> raw_entries_size_;
<a name="l00696"></a>00696   <span class="keywordtype">int</span> number_of_edges_;
<a name="l00697"></a>00697   <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> max_snapshot_js_object_id_;
<a name="l00698"></a>00698 
<a name="l00699"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#ab29592496458bcf1caa1bcb01dadb9c0">00699</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#ab29592496458bcf1caa1bcb01dadb9c0">HeapSnapshotTester</a>;
<a name="l00700"></a>00700 
<a name="l00701"></a>00701   <a class="code" href="globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>);
<a name="l00702"></a>00702 };
<a name="l00703"></a>00703 
<a name="l00704"></a>00704 
<a name="l00705"></a><a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html">00705</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html">HeapObjectsMap</a> {
<a name="l00706"></a>00706  <span class="keyword">public</span>:
<a name="l00707"></a>00707   <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a699359e8931793e91568ca317ea2487e">HeapObjectsMap</a>();
<a name="l00708"></a>00708 
<a name="l00709"></a>00709   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#ad083b7f06ebd93fc196ff301d7727ccd">SnapshotGenerationFinished</a>();
<a name="l00710"></a>00710   <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#ab5d737fbbba9b33cd3c853eb7b506cf4">FindEntry</a>(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr);
<a name="l00711"></a>00711   <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#aaafc72f935d8b32fae245858cec65738">FindOrAddEntry</a>(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#abf135806b67fe9f9a823fbbbe25de86b">size</a>);
<a name="l00712"></a>00712   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a73dfc08bfd5790c7861a580e481fc0fe">MoveObject</a>(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> from, <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> to);
<a name="l00713"></a><a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a173be928aaaa43dcdb94f97d39bb8a5a">00713</a>   <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a173be928aaaa43dcdb94f97d39bb8a5a">last_assigned_id</a>()<span class="keyword"> const </span>{
<a name="l00714"></a>00714     <span class="keywordflow">return</span> next_id_ - <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a11bef81d3f530538f97fc8dd362d2e2d">kObjectIdStep</a>;
<a name="l00715"></a>00715   }
<a name="l00716"></a>00716 
<a name="l00717"></a>00717   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a73ec46f75f7c486e3fcec5643766c442">StopHeapObjectsTracking</a>();
<a name="l00718"></a>00718   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a5cbcc2ef1015fd97c8933aa7030e5cb7">PushHeapObjectsStats</a>(<a class="code" href="classv8_1_1_output_stream.html">OutputStream</a>* stream);
<a name="l00719"></a>00719 
<a name="l00720"></a>00720   <span class="keyword">static</span> <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a246be15ede06e7dd8211be57c67b140c">GenerateId</a>(<a class="code" href="classv8_1_1_retained_object_info.html">v8::RetainedObjectInfo</a>* info);
<a name="l00721"></a>00721   <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a78c61d0ce669d861cce8dd2660c91840">GetNthGcSubrootId</a>(<span class="keywordtype">int</span> delta);
<a name="l00722"></a>00722 
<a name="l00723"></a><a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a11bef81d3f530538f97fc8dd362d2e2d">00723</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a11bef81d3f530538f97fc8dd362d2e2d">kObjectIdStep</a> = 2;
<a name="l00724"></a><a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a04fba906564af1ded2c829fe22b0f6d0">00724</a>   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a04fba906564af1ded2c829fe22b0f6d0">kInternalRootObjectId</a>;
<a name="l00725"></a><a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#abf649a7b9e771c6b8dbe9ef581d5eaac">00725</a>   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#abf649a7b9e771c6b8dbe9ef581d5eaac">kGcRootsObjectId</a>;
<a name="l00726"></a><a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a67cf55898a439febc464af8e097bb8b8">00726</a>   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a67cf55898a439febc464af8e097bb8b8">kNativesRootObjectId</a>;
<a name="l00727"></a><a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a1328bc87783492d376630e24758bbc69">00727</a>   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a1328bc87783492d376630e24758bbc69">kGcRootsFirstSubrootId</a>;
<a name="l00728"></a><a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a0424e15b8207599ea3fae3c69eb0fa26">00728</a>   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a0424e15b8207599ea3fae3c69eb0fa26">kFirstAvailableObjectId</a>;
<a name="l00729"></a>00729 
<a name="l00730"></a>00730  <span class="keyword">private</span>:
<a name="l00731"></a>00731   <span class="keyword">struct </span>EntryInfo {
<a name="l00732"></a>00732   EntryInfo(<a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <span class="keywordtype">id</span>, <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size)
<a name="l00733"></a>00733       : id(<span class="keywordtype">id</span>), addr(addr), <a class="code" href="namespacev8_1_1internal.html#abf135806b67fe9f9a823fbbbe25de86b">size</a>(size), accessed(<span class="keyword">true</span>) { }
<a name="l00734"></a>00734   EntryInfo(<a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <span class="keywordtype">id</span>, <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size, <span class="keywordtype">bool</span> accessed)
<a name="l00735"></a>00735       : id(<span class="keywordtype">id</span>), addr(addr), <a class="code" href="namespacev8_1_1internal.html#abf135806b67fe9f9a823fbbbe25de86b">size</a>(size), accessed(accessed) { }
<a name="l00736"></a>00736     <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> id;
<a name="l00737"></a>00737     <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr;
<a name="l00738"></a>00738     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#abf135806b67fe9f9a823fbbbe25de86b">size</a>;
<a name="l00739"></a>00739     <span class="keywordtype">bool</span> accessed;
<a name="l00740"></a>00740   };
<a name="l00741"></a>00741   <span class="keyword">struct </span>TimeInterval {
<a name="l00742"></a>00742     <span class="keyword">explicit</span> TimeInterval(<a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <span class="keywordtype">id</span>) : id(id), size(0), count(0) { }
<a name="l00743"></a>00743     <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> id;
<a name="l00744"></a>00744     uint32_t <a class="code" href="namespacev8_1_1internal.html#abf135806b67fe9f9a823fbbbe25de86b">size</a>;
<a name="l00745"></a>00745     uint32_t count;
<a name="l00746"></a>00746   };
<a name="l00747"></a>00747 
<a name="l00748"></a>00748   <span class="keywordtype">void</span> UpdateHeapObjectsMap();
<a name="l00749"></a>00749   <span class="keywordtype">void</span> RemoveDeadEntries();
<a name="l00750"></a>00750 
<a name="l00751"></a>00751   <span class="keyword">static</span> <span class="keywordtype">bool</span> AddressesMatch(<span class="keywordtype">void</span>* key1, <span class="keywordtype">void</span>* key2) {
<a name="l00752"></a>00752     <span class="keywordflow">return</span> key1 == key2;
<a name="l00753"></a>00753   }
<a name="l00754"></a>00754 
<a name="l00755"></a>00755   <span class="keyword">static</span> uint32_t AddressHash(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr) {
<a name="l00756"></a>00756     <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#aa8d177a33c3b72c549c49376c5fa80fe">ComputeIntegerHash</a>(
<a name="l00757"></a>00757         static_cast&lt;uint32_t&gt;(reinterpret_cast&lt;uintptr_t&gt;(addr)),
<a name="l00758"></a>00758         v8::internal::kZeroHashSeed);
<a name="l00759"></a>00759   }
<a name="l00760"></a>00760 
<a name="l00761"></a>00761   <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> next_id_;
<a name="l00762"></a>00762   <a class="code" href="namespacev8_1_1internal.html#a7e7097fccc44a6d27c2a2c5c1eca3e7b">HashMap</a> entries_map_;
<a name="l00763"></a>00763   List&lt;EntryInfo&gt; entries_;
<a name="l00764"></a>00764   List&lt;TimeInterval&gt; time_intervals_;
<a name="l00765"></a>00765 
<a name="l00766"></a>00766   DISALLOW_COPY_AND_ASSIGN(<a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a699359e8931793e91568ca317ea2487e">HeapObjectsMap</a>);
<a name="l00767"></a>00767 };
<a name="l00768"></a>00768 
<a name="l00769"></a>00769 
<a name="l00770"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html">00770</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html">HeapSnapshotsCollection</a> {
<a name="l00771"></a>00771  <span class="keyword">public</span>:
<a name="l00772"></a>00772   <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a9b61dea5382ec4d5c1090ba6a7ca567e">HeapSnapshotsCollection</a>();
<a name="l00773"></a>00773   <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a19a7e4ebe6fd13e77d87134eddd6adcb">~HeapSnapshotsCollection</a>();
<a name="l00774"></a>00774 
<a name="l00775"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#aae43c8b9bc8c09b95929b68c038cd36d">00775</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#aae43c8b9bc8c09b95929b68c038cd36d">is_tracking_objects</a>() { <span class="keywordflow">return</span> is_tracking_objects_; }
<a name="l00776"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#ab562aae7e0d32b99414328ed116cddc0">00776</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#ab562aae7e0d32b99414328ed116cddc0">PushHeapObjectsStats</a>(<a class="code" href="classv8_1_1_output_stream.html">OutputStream</a>* stream) {
<a name="l00777"></a>00777     <span class="keywordflow">return</span> ids_.<a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a5cbcc2ef1015fd97c8933aa7030e5cb7">PushHeapObjectsStats</a>(stream);
<a name="l00778"></a>00778   }
<a name="l00779"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a642f13d0c2085eab99face1a68155e5e">00779</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a642f13d0c2085eab99face1a68155e5e">StartHeapObjectsTracking</a>() { is_tracking_objects_ = <span class="keyword">true</span>; }
<a name="l00780"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a5c84f515b1f9ed4b623dc2b49b7db5a0">00780</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a5c84f515b1f9ed4b623dc2b49b7db5a0">StopHeapObjectsTracking</a>() { ids_.<a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a73ec46f75f7c486e3fcec5643766c442">StopHeapObjectsTracking</a>(); }
<a name="l00781"></a>00781 
<a name="l00782"></a>00782   <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a0fc565a4f0b773669fbf8efc2f1624b9">NewSnapshot</a>(
<a name="l00783"></a>00783       <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html#a622506c14e42e2d98daab32d5930c339">HeapSnapshot::Type</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* name, <span class="keywordtype">unsigned</span> uid);
<a name="l00784"></a>00784   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#aae6947f3c53c78950f7f2b8e904c8453">SnapshotGenerationFinished</a>(<a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* snapshot);
<a name="l00785"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a5cbceeb4b5c4025382ef2058d33ba197">00785</a>   <a class="code" href="classv8_1_1internal_1_1_list.html">List&lt;HeapSnapshot*&gt;</a>* <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a5cbceeb4b5c4025382ef2058d33ba197">snapshots</a>() { <span class="keywordflow">return</span> &amp;snapshots_; }
<a name="l00786"></a>00786   <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#ae2d477029e5a2990f00c04f1ddc30054">GetSnapshot</a>(<span class="keywordtype">unsigned</span> uid);
<a name="l00787"></a>00787   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#aa68a2fdfa9eecf13123ebab9b871b2d3">RemoveSnapshot</a>(<a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* snapshot);
<a name="l00788"></a>00788 
<a name="l00789"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#ae4e09866642bc8a5e8c84b579f899659">00789</a>   <a class="code" href="classv8_1_1internal_1_1_strings_storage.html">StringsStorage</a>* <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#ae4e09866642bc8a5e8c84b579f899659">names</a>() { <span class="keywordflow">return</span> &amp;names_; }
<a name="l00790"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a627468bd0c1b375bcd6c4696e16a55e2">00790</a>   <a class="code" href="classv8_1_1internal_1_1_token_enumerator.html">TokenEnumerator</a>* <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a627468bd0c1b375bcd6c4696e16a55e2">token_enumerator</a>() { <span class="keywordflow">return</span> token_enumerator_; }
<a name="l00791"></a>00791 
<a name="l00792"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#af9de976f6e4aec2d4e5d53dcab97d6cd">00792</a>   <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#af9de976f6e4aec2d4e5d53dcab97d6cd">FindObjectId</a>(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> object_addr) {
<a name="l00793"></a>00793     <span class="keywordflow">return</span> ids_.<a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#ab5d737fbbba9b33cd3c853eb7b506cf4">FindEntry</a>(object_addr);
<a name="l00794"></a>00794   }
<a name="l00795"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#aea1b85d31c9cc32940b9f2e5d6a31e29">00795</a>   <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#aea1b85d31c9cc32940b9f2e5d6a31e29">GetObjectId</a>(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> object_addr, <span class="keywordtype">int</span> object_size) {
<a name="l00796"></a>00796     <span class="keywordflow">return</span> ids_.<a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#aaafc72f935d8b32fae245858cec65738">FindOrAddEntry</a>(object_addr, object_size);
<a name="l00797"></a>00797   }
<a name="l00798"></a>00798   <a class="code" href="classv8_1_1internal_1_1_handle.html">Handle&lt;HeapObject&gt;</a> <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#ab7ff8c36b15b4ff901299197e30fcb20">FindHeapObjectById</a>(<a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <span class="keywordtype">id</span>);
<a name="l00799"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#ae2acd7bd5141942b27d9015220e37e06">00799</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#ae2acd7bd5141942b27d9015220e37e06">ObjectMoveEvent</a>(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> from, <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> to) { ids_.<a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a73dfc08bfd5790c7861a580e481fc0fe">MoveObject</a>(from, to); }
<a name="l00800"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a14e64b8f924c72fcd563d1d14b83cf44">00800</a>   <a class="code" href="namespacev8.html#acc05be0fdcf26b26fbb410e75a048e63">SnapshotObjectId</a> <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a14e64b8f924c72fcd563d1d14b83cf44">last_assigned_id</a>()<span class="keyword"> const </span>{
<a name="l00801"></a>00801     <span class="keywordflow">return</span> ids_.<a class="code" href="classv8_1_1internal_1_1_heap_objects_map.html#a173be928aaaa43dcdb94f97d39bb8a5a">last_assigned_id</a>();
<a name="l00802"></a>00802   }
<a name="l00803"></a>00803 
<a name="l00804"></a>00804  <span class="keyword">private</span>:
<a name="l00805"></a>00805   INLINE(<span class="keyword">static</span> <span class="keywordtype">bool</span> HeapSnapshotsMatch(<span class="keywordtype">void</span>* key1, <span class="keywordtype">void</span>* key2)) {
<a name="l00806"></a>00806     <span class="keywordflow">return</span> key1 == key2;
<a name="l00807"></a>00807   }
<a name="l00808"></a>00808 
<a name="l00809"></a>00809   <span class="keywordtype">bool</span> is_tracking_objects_;  <span class="comment">// Whether tracking object moves is needed.</span>
<a name="l00810"></a>00810   List&lt;HeapSnapshot*&gt; snapshots_;
<a name="l00811"></a>00811   <span class="comment">// Mapping from snapshots&#39; uids to HeapSnapshot* pointers.</span>
<a name="l00812"></a>00812   <a class="code" href="namespacev8_1_1internal.html#a7e7097fccc44a6d27c2a2c5c1eca3e7b">HashMap</a> snapshots_uids_;
<a name="l00813"></a>00813   StringsStorage names_;
<a name="l00814"></a>00814   TokenEnumerator* token_enumerator_;
<a name="l00815"></a>00815   <span class="comment">// Mapping from HeapObject addresses to objects&#39; uids.</span>
<a name="l00816"></a>00816   HeapObjectsMap ids_;
<a name="l00817"></a>00817 
<a name="l00818"></a>00818   DISALLOW_COPY_AND_ASSIGN(<a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html#a9b61dea5382ec4d5c1090ba6a7ca567e">HeapSnapshotsCollection</a>);
<a name="l00819"></a>00819 };
<a name="l00820"></a>00820 
<a name="l00821"></a>00821 
<a name="l00822"></a>00822 <span class="comment">// A typedef for referencing anything that can be snapshotted living</span>
<a name="l00823"></a>00823 <span class="comment">// in any kind of heap memory.</span>
<a name="l00824"></a><a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">00824</a> <span class="keyword">typedef</span> <span class="keywordtype">void</span>* <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a>;
<a name="l00825"></a>00825 
<a name="l00826"></a>00826 
<a name="l00827"></a>00827 <span class="comment">// An interface that creates HeapEntries by HeapThings.</span>
<a name="l00828"></a><a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html">00828</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html">HeapEntriesAllocator</a> {
<a name="l00829"></a>00829  <span class="keyword">public</span>:
<a name="l00830"></a><a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html#a58f1e9dd07035b121db8a8f122bec995">00830</a>   <span class="keyword">virtual</span> <a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html#a58f1e9dd07035b121db8a8f122bec995">~HeapEntriesAllocator</a>() { }
<a name="l00831"></a>00831   <span class="keyword">virtual</span> HeapEntry* <a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html#aa0b3c87e730c9e01955f52fe98c7a406">AllocateEntry</a>(
<a name="l00832"></a>00832       <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> ptr, <span class="keywordtype">int</span> children_count, <span class="keywordtype">int</span> retainers_count) = 0;
<a name="l00833"></a>00833 };
<a name="l00834"></a>00834 
<a name="l00835"></a>00835 
<a name="l00836"></a>00836 <span class="comment">// The HeapEntriesMap instance is used to track a mapping between</span>
<a name="l00837"></a>00837 <span class="comment">// real heap objects and their representations in heap snapshots.</span>
<a name="l00838"></a><a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html">00838</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html">HeapEntriesMap</a> {
<a name="l00839"></a>00839  <span class="keyword">public</span>:
<a name="l00840"></a>00840   <a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#ae79241f6db4d48ec796d1a22c99a78e0">HeapEntriesMap</a>();
<a name="l00841"></a>00841   <a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#ae605facfdc555b33b6ab34776271de8c">~HeapEntriesMap</a>();
<a name="l00842"></a>00842 
<a name="l00843"></a>00843   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#a5eff526c2de2e5ae69e3540b4f06681f">AllocateEntries</a>(<a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> root_object);
<a name="l00844"></a>00844   HeapEntry* <a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#af94a81d54faec39e627a13312636732a">Map</a>(<a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> thing);
<a name="l00845"></a>00845   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#a356c985dc100d0a9c3dee330fed0175a">Pair</a>(<a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> thing, <a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html">HeapEntriesAllocator</a>* allocator, HeapEntry* entry);
<a name="l00846"></a>00846   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#a5b45058ace60ec151ab1e4d785fb1508">CountReference</a>(<a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> from, <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> to,
<a name="l00847"></a>00847                       <span class="keywordtype">int</span>* prev_children_count = <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>,
<a name="l00848"></a>00848                       <span class="keywordtype">int</span>* prev_retainers_count = <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>);
<a name="l00849"></a>00849 
<a name="l00850"></a><a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#a8c5a33906fe53c3f858f2aabd66532c5">00850</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#a8c5a33906fe53c3f858f2aabd66532c5">entries_count</a>() { <span class="keywordflow">return</span> entries_count_; }
<a name="l00851"></a><a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#a51e4e634734b703cd9234e4e5e300370">00851</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#a51e4e634734b703cd9234e4e5e300370">total_children_count</a>() { <span class="keywordflow">return</span> total_children_count_; }
<a name="l00852"></a><a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#a8b6115eb6ad030ada8adc584b3b299f6">00852</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#a8b6115eb6ad030ada8adc584b3b299f6">total_retainers_count</a>() { <span class="keywordflow">return</span> total_retainers_count_; }
<a name="l00853"></a>00853 
<a name="l00854"></a><a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#afc1fc9a97489c120e5ab00269f515813">00854</a>   <span class="keyword">static</span> HeapEntry* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#afc1fc9a97489c120e5ab00269f515813">kHeapEntryPlaceholder</a>;
<a name="l00855"></a>00855 
<a name="l00856"></a>00856  <span class="keyword">private</span>:
<a name="l00857"></a>00857   <span class="keyword">struct </span>EntryInfo {
<a name="l00858"></a>00858     EntryInfo(HeapEntry* entry, <a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html">HeapEntriesAllocator</a>* allocator)
<a name="l00859"></a>00859         : entry(entry),
<a name="l00860"></a>00860           allocator(allocator),
<a name="l00861"></a>00861           children_count(0),
<a name="l00862"></a>00862           retainers_count(0) {
<a name="l00863"></a>00863     }
<a name="l00864"></a>00864     HeapEntry* entry;
<a name="l00865"></a>00865     <a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html">HeapEntriesAllocator</a>* allocator;
<a name="l00866"></a>00866     <span class="keywordtype">int</span> children_count;
<a name="l00867"></a>00867     <span class="keywordtype">int</span> retainers_count;
<a name="l00868"></a>00868   };
<a name="l00869"></a>00869 
<a name="l00870"></a>00870   <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> AllocateHeapEntryForMapEntry(HashMap::Entry* map_entry);
<a name="l00871"></a>00871 
<a name="l00872"></a>00872   <span class="keyword">static</span> uint32_t Hash(<a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> thing) {
<a name="l00873"></a>00873     <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#aa8d177a33c3b72c549c49376c5fa80fe">ComputeIntegerHash</a>(
<a name="l00874"></a>00874         static_cast&lt;uint32_t&gt;(reinterpret_cast&lt;uintptr_t&gt;(thing)),
<a name="l00875"></a>00875         v8::internal::kZeroHashSeed);
<a name="l00876"></a>00876   }
<a name="l00877"></a>00877   <span class="keyword">static</span> <span class="keywordtype">bool</span> HeapThingsMatch(<a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> key1, <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> key2) {
<a name="l00878"></a>00878     <span class="keywordflow">return</span> key1 == key2;
<a name="l00879"></a>00879   }
<a name="l00880"></a>00880 
<a name="l00881"></a>00881   <a class="code" href="namespacev8_1_1internal.html#a7e7097fccc44a6d27c2a2c5c1eca3e7b">HashMap</a> entries_;
<a name="l00882"></a>00882   <span class="keywordtype">int</span> entries_count_;
<a name="l00883"></a>00883   <span class="keywordtype">int</span> total_children_count_;
<a name="l00884"></a>00884   <span class="keywordtype">int</span> total_retainers_count_;
<a name="l00885"></a>00885 
<a name="l00886"></a><a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html#aa92f9dd7ce94ea20ac88110127675abc">00886</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html">HeapObjectsSet</a>;
<a name="l00887"></a>00887 
<a name="l00888"></a>00888   <a class="code" href="globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html">HeapEntriesMap</a>);
<a name="l00889"></a>00889 };
<a name="l00890"></a>00890 
<a name="l00891"></a>00891 
<a name="l00892"></a><a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html">00892</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html">HeapObjectsSet</a> {
<a name="l00893"></a>00893  <span class="keyword">public</span>:
<a name="l00894"></a>00894   <a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html#a61f4c29256ddbbedbcbe0fdfdeefa7ca">HeapObjectsSet</a>();
<a name="l00895"></a>00895   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html#a6718f74f54fe69aa7f684838939d3fa8">Clear</a>();
<a name="l00896"></a>00896   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html#a03b79360ff3a229f2b4065a714fade8a">Contains</a>(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* <span class="keywordtype">object</span>);
<a name="l00897"></a>00897   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html#a51f62e781c408b48b9790f0a9b1bcb46">Insert</a>(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* obj);
<a name="l00898"></a>00898   <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html#ab1b1310426df7a94540439298caf9887">GetTag</a>(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* obj);
<a name="l00899"></a>00899   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html#a4d7936c9c8bcd19a50787a5c92fda851">SetTag</a>(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* obj, <span class="keyword">const</span> <span class="keywordtype">char</span>* tag);
<a name="l00900"></a><a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html#a7e92066e51bef4f00b2de2d0d5fc5d4f">00900</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html#a7e92066e51bef4f00b2de2d0d5fc5d4f">is_empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> entries_.<a class="code" href="classv8_1_1internal_1_1_template_hash_map_impl.html#a1b12dfbef0f39e5fee47a75f52479924">occupancy</a>() == 0; }
<a name="l00901"></a>00901 
<a name="l00902"></a>00902  <span class="keyword">private</span>:
<a name="l00903"></a>00903   <a class="code" href="classv8_1_1internal_1_1_template_hash_map_impl.html">HashMap</a> entries_;
<a name="l00904"></a>00904 
<a name="l00905"></a>00905   DISALLOW_COPY_AND_ASSIGN(<a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html">HeapObjectsSet</a>);
<a name="l00906"></a>00906 };
<a name="l00907"></a>00907 
<a name="l00908"></a>00908 
<a name="l00909"></a>00909 <span class="comment">// An interface used to populate a snapshot with nodes and edges.</span>
<a name="l00910"></a><a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html">00910</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html">SnapshotFillerInterface</a> {
<a name="l00911"></a>00911  <span class="keyword">public</span>:
<a name="l00912"></a><a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html#a54f64ce0d11a8a2b4bbe9201898297f3">00912</a>   <span class="keyword">virtual</span> <a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html#a54f64ce0d11a8a2b4bbe9201898297f3">~SnapshotFillerInterface</a>() { }
<a name="l00913"></a>00913   <span class="keyword">virtual</span> HeapEntry* <a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html#aaa34ccb1c51498059728f022ef71a295">AddEntry</a>(<a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> ptr,
<a name="l00914"></a>00914                               <a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html">HeapEntriesAllocator</a>* allocator) = 0;
<a name="l00915"></a>00915   <span class="keyword">virtual</span> HeapEntry* <a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html#a910e9194fedfb3a8fbaf68e2989277ee">FindEntry</a>(<a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> ptr) = 0;
<a name="l00916"></a>00916   <span class="keyword">virtual</span> HeapEntry* <a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html#a9f866a9521f84b30de4a6fe07d288b95">FindOrAddEntry</a>(<a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> ptr,
<a name="l00917"></a>00917                                     <a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html">HeapEntriesAllocator</a>* allocator) = 0;
<a name="l00918"></a>00918   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html#a16072208f7cecf933477debd5ad4d3fc">SetIndexedReference</a>(<a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259b">HeapGraphEdge::Type</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>,
<a name="l00919"></a>00919                                    <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> parent_ptr,
<a name="l00920"></a>00920                                    HeapEntry* parent_entry,
<a name="l00921"></a>00921                                    <span class="keywordtype">int</span> index,
<a name="l00922"></a>00922                                    <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> child_ptr,
<a name="l00923"></a>00923                                    HeapEntry* child_entry) = 0;
<a name="l00924"></a>00924   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html#af4d7de84a9438b644ce0b92a974bf0a4">SetIndexedAutoIndexReference</a>(<a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259b">HeapGraphEdge::Type</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>,
<a name="l00925"></a>00925                                             <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> parent_ptr,
<a name="l00926"></a>00926                                             HeapEntry* parent_entry,
<a name="l00927"></a>00927                                             <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> child_ptr,
<a name="l00928"></a>00928                                             HeapEntry* child_entry) = 0;
<a name="l00929"></a>00929   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html#a8ab3ac299fb222c016032691b2fa7da2">SetNamedReference</a>(<a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259b">HeapGraphEdge::Type</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>,
<a name="l00930"></a>00930                                  <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> parent_ptr,
<a name="l00931"></a>00931                                  HeapEntry* parent_entry,
<a name="l00932"></a>00932                                  <span class="keyword">const</span> <span class="keywordtype">char</span>* reference_name,
<a name="l00933"></a>00933                                  <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> child_ptr,
<a name="l00934"></a>00934                                  HeapEntry* child_entry) = 0;
<a name="l00935"></a>00935   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html#ac5632c51c3dd27ce01d2f92e1e083a96">SetNamedAutoIndexReference</a>(<a class="code" href="classv8_1_1_heap_graph_edge.html#a252500cf4307fe9e4fcb0335a907259b">HeapGraphEdge::Type</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>,
<a name="l00936"></a>00936                                           <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> parent_ptr,
<a name="l00937"></a>00937                                           HeapEntry* parent_entry,
<a name="l00938"></a>00938                                           <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> child_ptr,
<a name="l00939"></a>00939                                           HeapEntry* child_entry) = 0;
<a name="l00940"></a>00940 };
<a name="l00941"></a>00941 
<a name="l00942"></a>00942 
<a name="l00943"></a><a class="code" href="classv8_1_1internal_1_1_snapshotting_progress_reporting_interface.html">00943</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_snapshotting_progress_reporting_interface.html">SnapshottingProgressReportingInterface</a> {
<a name="l00944"></a>00944  <span class="keyword">public</span>:
<a name="l00945"></a><a class="code" href="classv8_1_1internal_1_1_snapshotting_progress_reporting_interface.html#aac24092a0c71c6a79d26b9b558959591">00945</a>   <span class="keyword">virtual</span> <a class="code" href="classv8_1_1internal_1_1_snapshotting_progress_reporting_interface.html#aac24092a0c71c6a79d26b9b558959591">~SnapshottingProgressReportingInterface</a>() { }
<a name="l00946"></a>00946   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_snapshotting_progress_reporting_interface.html#abdd2a80e9a6dbbcfc3f8e510444c7acd">ProgressStep</a>() = 0;
<a name="l00947"></a>00947   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_snapshotting_progress_reporting_interface.html#a2b81b8715eac64dfee24b32cc3b1ed48">ProgressReport</a>(<span class="keywordtype">bool</span> force) = 0;
<a name="l00948"></a>00948 };
<a name="l00949"></a>00949 
<a name="l00950"></a>00950 
<a name="l00951"></a>00951 <span class="comment">// An implementation of V8 heap graph extractor.</span>
<a name="l00952"></a><a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html">00952</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html">V8HeapExplorer</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html">HeapEntriesAllocator</a> {
<a name="l00953"></a>00953  <span class="keyword">public</span>:
<a name="l00954"></a>00954   <a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#a439b6c88597c91087fc593c75b2f8b4a">V8HeapExplorer</a>(<a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* snapshot,
<a name="l00955"></a>00955                  <a class="code" href="classv8_1_1internal_1_1_snapshotting_progress_reporting_interface.html">SnapshottingProgressReportingInterface</a>* progress);
<a name="l00956"></a>00956   <span class="keyword">virtual</span> <a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#a7a8e18f770e74be22260dbbdd3bdc1fb">~V8HeapExplorer</a>();
<a name="l00957"></a>00957   <span class="keyword">virtual</span> HeapEntry* <a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#a6a9a766aabac725b6e76d3276616a58a">AllocateEntry</a>(
<a name="l00958"></a>00958       <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> ptr, <span class="keywordtype">int</span> children_count, <span class="keywordtype">int</span> retainers_count);
<a name="l00959"></a>00959   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#af935247465cfeddcff5995a97150b899">AddRootEntries</a>(<a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html">SnapshotFillerInterface</a>* filler);
<a name="l00960"></a>00960   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#af4f43686b87f0135ba2db4a384c303f4">EstimateObjectsCount</a>(HeapIterator* iterator);
<a name="l00961"></a>00961   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#a38c672a8fcf2f034033d5cfcf75b3543">IterateAndExtractReferences</a>(<a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html">SnapshotFillerInterface</a>* filler);
<a name="l00962"></a>00962   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#a0f7e6fc5378bd64d21d91b633bfa76ac">IterateAndSetObjectNames</a>(<a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html">SnapshotFillerInterface</a>* filler);
<a name="l00963"></a>00963   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#a3fc89ba6b31b1f48e4ce026976eeaf79">TagGlobalObjects</a>();
<a name="l00964"></a>00964 
<a name="l00965"></a>00965   <span class="keyword">static</span> <a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* <a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#a6d153afbe0111362b4333c3eed73d9c1">GetConstructorName</a>(<a class="code" href="classv8_1_1internal_1_1_j_s_object.html">JSObject</a>* <span class="keywordtype">object</span>);
<a name="l00966"></a>00966 
<a name="l00967"></a><a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#a11ea29b92366425e7a817fbc9abf466f">00967</a>   <span class="keyword">static</span> <a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* <span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#a11ea29b92366425e7a817fbc9abf466f">kInternalRootObject</a>;
<a name="l00968"></a>00968 
<a name="l00969"></a>00969  <span class="keyword">private</span>:
<a name="l00970"></a>00970   HeapEntry* AddEntry(
<a name="l00971"></a>00971       <a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* <span class="keywordtype">object</span>, <span class="keywordtype">int</span> children_count, <span class="keywordtype">int</span> retainers_count);
<a name="l00972"></a>00972   HeapEntry* AddEntry(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* <span class="keywordtype">object</span>,
<a name="l00973"></a>00973                       HeapEntry::Type <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>,
<a name="l00974"></a>00974                       <span class="keyword">const</span> <span class="keywordtype">char</span>* name,
<a name="l00975"></a>00975                       <span class="keywordtype">int</span> children_count,
<a name="l00976"></a>00976                       <span class="keywordtype">int</span> retainers_count);
<a name="l00977"></a>00977   <span class="keyword">const</span> <span class="keywordtype">char</span>* GetSystemEntryName(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* <span class="keywordtype">object</span>);
<a name="l00978"></a>00978 
<a name="l00979"></a>00979   <span class="keywordtype">void</span> ExtractReferences(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* obj);
<a name="l00980"></a>00980   <span class="keywordtype">void</span> ExtractJSGlobalProxy(<a class="code" href="classv8_1_1internal_1_1_j_s_global_proxy.html">JSGlobalProxy</a>* proxy);
<a name="l00981"></a>00981   <span class="keywordtype">void</span> ExtractJSObject(HeapEntry* entry, <a class="code" href="classv8_1_1internal_1_1_j_s_object.html">JSObject</a>* js_obj);
<a name="l00982"></a>00982   <span class="keywordtype">void</span> ExtractString(HeapEntry* entry, <a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* obj);
<a name="l00983"></a>00983   <span class="keywordtype">void</span> ExtractContext(HeapEntry* entry, <a class="code" href="classv8_1_1internal_1_1_context.html">Context</a>* context);
<a name="l00984"></a>00984   <span class="keywordtype">void</span> ExtractMap(HeapEntry* entry, Map* map);
<a name="l00985"></a>00985   <span class="keywordtype">void</span> ExtractSharedFunctionInfo(HeapEntry* entry, <a class="code" href="classv8_1_1internal_1_1_shared_function_info.html">SharedFunctionInfo</a>* shared);
<a name="l00986"></a>00986   <span class="keywordtype">void</span> ExtractScript(HeapEntry* entry, <a class="code" href="classv8_1_1internal_1_1_script.html">Script</a>* script);
<a name="l00987"></a>00987   <span class="keywordtype">void</span> ExtractCodeCache(HeapEntry* entry, <a class="code" href="classv8_1_1internal_1_1_code_cache.html">CodeCache</a>* code_cache);
<a name="l00988"></a>00988   <span class="keywordtype">void</span> ExtractCode(HeapEntry* entry, <a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* <a class="code" href="namespacev8_1_1internal.html#a7500f5d92d93409e192a671bd4425496">code</a>);
<a name="l00989"></a>00989   <span class="keywordtype">void</span> ExtractClosureReferences(<a class="code" href="classv8_1_1internal_1_1_j_s_object.html">JSObject</a>* js_obj, HeapEntry* entry);
<a name="l00990"></a>00990   <span class="keywordtype">void</span> ExtractPropertyReferences(<a class="code" href="classv8_1_1internal_1_1_j_s_object.html">JSObject</a>* js_obj, HeapEntry* entry);
<a name="l00991"></a>00991   <span class="keywordtype">void</span> ExtractElementReferences(<a class="code" href="classv8_1_1internal_1_1_j_s_object.html">JSObject</a>* js_obj, HeapEntry* entry);
<a name="l00992"></a>00992   <span class="keywordtype">void</span> ExtractInternalReferences(<a class="code" href="classv8_1_1internal_1_1_j_s_object.html">JSObject</a>* js_obj, HeapEntry* entry);
<a name="l00993"></a>00993   <span class="keywordtype">bool</span> IsEssentialObject(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* <span class="keywordtype">object</span>);
<a name="l00994"></a>00994   <span class="keywordtype">void</span> SetClosureReference(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* parent_obj,
<a name="l00995"></a>00995                            HeapEntry* parent,
<a name="l00996"></a>00996                            <a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* reference_name,
<a name="l00997"></a>00997                            <a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* child);
<a name="l00998"></a>00998   <span class="keywordtype">void</span> SetNativeBindReference(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* parent_obj,
<a name="l00999"></a>00999                               HeapEntry* parent,
<a name="l01000"></a>01000                               <span class="keyword">const</span> <span class="keywordtype">char</span>* reference_name,
<a name="l01001"></a>01001                               <a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* child);
<a name="l01002"></a>01002   <span class="keywordtype">void</span> SetElementReference(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* parent_obj,
<a name="l01003"></a>01003                            HeapEntry* parent,
<a name="l01004"></a>01004                            <span class="keywordtype">int</span> index,
<a name="l01005"></a>01005                            <a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* child);
<a name="l01006"></a>01006   <span class="keywordtype">void</span> SetInternalReference(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* parent_obj,
<a name="l01007"></a>01007                             HeapEntry* parent,
<a name="l01008"></a>01008                             <span class="keyword">const</span> <span class="keywordtype">char</span>* reference_name,
<a name="l01009"></a>01009                             <a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* child,
<a name="l01010"></a>01010                             <span class="keywordtype">int</span> field_offset = -1);
<a name="l01011"></a>01011   <span class="keywordtype">void</span> SetInternalReference(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* parent_obj,
<a name="l01012"></a>01012                             HeapEntry* parent,
<a name="l01013"></a>01013                             <span class="keywordtype">int</span> index,
<a name="l01014"></a>01014                             <a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* child,
<a name="l01015"></a>01015                             <span class="keywordtype">int</span> field_offset = -1);
<a name="l01016"></a>01016   <span class="keywordtype">void</span> SetHiddenReference(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* parent_obj,
<a name="l01017"></a>01017                           HeapEntry* parent,
<a name="l01018"></a>01018                           <span class="keywordtype">int</span> index,
<a name="l01019"></a>01019                           <a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* child);
<a name="l01020"></a>01020   <span class="keywordtype">void</span> SetWeakReference(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* parent_obj,
<a name="l01021"></a>01021                         HeapEntry* parent_entry,
<a name="l01022"></a>01022                         <span class="keywordtype">int</span> index,
<a name="l01023"></a>01023                         <a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* child_obj,
<a name="l01024"></a>01024                         <span class="keywordtype">int</span> field_offset);
<a name="l01025"></a>01025   <span class="keywordtype">void</span> SetPropertyReference(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* parent_obj,
<a name="l01026"></a>01026                             HeapEntry* parent,
<a name="l01027"></a>01027                             <a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* reference_name,
<a name="l01028"></a>01028                             <a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* child,
<a name="l01029"></a>01029                             <span class="keyword">const</span> <span class="keywordtype">char</span>* name_format_string = <a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>,
<a name="l01030"></a>01030                             <span class="keywordtype">int</span> field_offset = -1);
<a name="l01031"></a>01031   <span class="keywordtype">void</span> SetPropertyShortcutReference(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* parent_obj,
<a name="l01032"></a>01032                                     HeapEntry* parent,
<a name="l01033"></a>01033                                     <a class="code" href="classv8_1_1internal_1_1_string.html">String</a>* reference_name,
<a name="l01034"></a>01034                                     <a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* child);
<a name="l01035"></a>01035   <span class="keywordtype">void</span> SetUserGlobalReference(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* window);
<a name="l01036"></a>01036   <span class="keywordtype">void</span> SetRootGcRootsReference();
<a name="l01037"></a>01037   <span class="keywordtype">void</span> SetGcRootsReference(<a class="code" href="classv8_1_1internal_1_1_visitor_synchronization.html#a0971ddb5cd5a8da91d074f648187da7a">VisitorSynchronization::SyncTag</a> tag);
<a name="l01038"></a>01038   <span class="keywordtype">void</span> SetGcSubrootReference(
<a name="l01039"></a>01039       <a class="code" href="classv8_1_1internal_1_1_visitor_synchronization.html#a0971ddb5cd5a8da91d074f648187da7a">VisitorSynchronization::SyncTag</a> tag, <span class="keywordtype">bool</span> is_weak, <a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* child);
<a name="l01040"></a>01040   <span class="keyword">const</span> <span class="keywordtype">char</span>* GetStrongGcSubrootName(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* <span class="keywordtype">object</span>);
<a name="l01041"></a>01041   <span class="keywordtype">void</span> SetObjectName(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* <span class="keywordtype">object</span>);
<a name="l01042"></a>01042   <span class="keywordtype">void</span> TagObject(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* obj, <span class="keyword">const</span> <span class="keywordtype">char</span>* tag);
<a name="l01043"></a>01043 
<a name="l01044"></a>01044   HeapEntry* GetEntry(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* obj);
<a name="l01045"></a>01045 
<a name="l01046"></a>01046   <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* GetNthGcSubrootObject(<span class="keywordtype">int</span> delta);
<a name="l01047"></a>01047   <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> GetGcSubrootOrder(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* subroot);
<a name="l01048"></a>01048 
<a name="l01049"></a>01049   <a class="code" href="classv8_1_1internal_1_1_heap.html">Heap</a>* heap_;
<a name="l01050"></a>01050   <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* snapshot_;
<a name="l01051"></a>01051   <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html">HeapSnapshotsCollection</a>* collection_;
<a name="l01052"></a>01052   <a class="code" href="classv8_1_1internal_1_1_snapshotting_progress_reporting_interface.html">SnapshottingProgressReportingInterface</a>* progress_;
<a name="l01053"></a>01053   <a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html">SnapshotFillerInterface</a>* filler_;
<a name="l01054"></a>01054   <a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html">HeapObjectsSet</a> objects_tags_;
<a name="l01055"></a>01055   <a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html">HeapObjectsSet</a> strong_gc_subroot_names_;
<a name="l01056"></a>01056 
<a name="l01057"></a>01057   <span class="keyword">static</span> <a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* <span class="keyword">const</span> kGcRootsObject;
<a name="l01058"></a>01058   <span class="keyword">static</span> <a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* <span class="keyword">const</span> kFirstGcSubrootObject;
<a name="l01059"></a>01059   <span class="keyword">static</span> <a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* <span class="keyword">const</span> kLastGcSubrootObject;
<a name="l01060"></a>01060 
<a name="l01061"></a><a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#a6ef0d133911e40c06746778027023e0a">01061</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_indexed_references_extractor.html">IndexedReferencesExtractor</a>;
<a name="l01062"></a><a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#a09409037b3bbe7dacbad8d92839b47a8">01062</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_gc_subroots_enumerator.html">GcSubrootsEnumerator</a>;
<a name="l01063"></a><a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html#a07c650327bd63061c049a9ae184a0ba6">01063</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_roots_references_extractor.html">RootsReferencesExtractor</a>;
<a name="l01064"></a>01064 
<a name="l01065"></a>01065   <a class="code" href="globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html">V8HeapExplorer</a>);
<a name="l01066"></a>01066 };
<a name="l01067"></a>01067 
<a name="l01068"></a>01068 
<a name="l01069"></a>01069 <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_native_group_retained_object_info.html">NativeGroupRetainedObjectInfo</a>;
<a name="l01070"></a>01070 
<a name="l01071"></a>01071 
<a name="l01072"></a>01072 <span class="comment">// An implementation of retained native objects extractor.</span>
<a name="l01073"></a><a class="code" href="classv8_1_1internal_1_1_native_objects_explorer.html">01073</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_native_objects_explorer.html">NativeObjectsExplorer</a> {
<a name="l01074"></a>01074  <span class="keyword">public</span>:
<a name="l01075"></a>01075   <a class="code" href="classv8_1_1internal_1_1_native_objects_explorer.html#a9772f761664e9cd0b73dca9bf9d21ad2">NativeObjectsExplorer</a>(<a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* snapshot,
<a name="l01076"></a>01076                       <a class="code" href="classv8_1_1internal_1_1_snapshotting_progress_reporting_interface.html">SnapshottingProgressReportingInterface</a>* progress);
<a name="l01077"></a>01077   <span class="keyword">virtual</span> <a class="code" href="classv8_1_1internal_1_1_native_objects_explorer.html#af9c043fcf494cc812bc940749e7db694">~NativeObjectsExplorer</a>();
<a name="l01078"></a>01078   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_native_objects_explorer.html#a7de71bcd52ca4cf0ff675ce5a971d134">AddRootEntries</a>(<a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html">SnapshotFillerInterface</a>* filler);
<a name="l01079"></a>01079   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_native_objects_explorer.html#a56adf5cff392cc3b6e569daf5d401647">EstimateObjectsCount</a>();
<a name="l01080"></a>01080   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_native_objects_explorer.html#a81bfc7ba37132f91795e9141fe6c2085">IterateAndExtractReferences</a>(<a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html">SnapshotFillerInterface</a>* filler);
<a name="l01081"></a>01081 
<a name="l01082"></a>01082  <span class="keyword">private</span>:
<a name="l01083"></a>01083   <span class="keywordtype">void</span> FillRetainedObjects();
<a name="l01084"></a>01084   <span class="keywordtype">void</span> FillImplicitReferences();
<a name="l01085"></a>01085   <a class="code" href="classv8_1_1internal_1_1_list.html">List&lt;HeapObject*&gt;</a>* GetListMaybeDisposeInfo(<a class="code" href="classv8_1_1_retained_object_info.html">v8::RetainedObjectInfo</a>* info);
<a name="l01086"></a>01086   <span class="keywordtype">void</span> SetNativeRootReference(<a class="code" href="classv8_1_1_retained_object_info.html">v8::RetainedObjectInfo</a>* info);
<a name="l01087"></a>01087   <span class="keywordtype">void</span> SetRootNativeRootsReference();
<a name="l01088"></a>01088   <span class="keywordtype">void</span> SetWrapperNativeReferences(<a class="code" href="classv8_1_1internal_1_1_heap_object.html">HeapObject</a>* wrapper,
<a name="l01089"></a>01089                                       <a class="code" href="classv8_1_1_retained_object_info.html">v8::RetainedObjectInfo</a>* info);
<a name="l01090"></a>01090   <span class="keywordtype">void</span> VisitSubtreeWrapper(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>** p, <a class="code" href="namespaceunibrow.html#a1a9f000a71024f8d15d88a4fa57e1a18">uint16_t</a> class_id);
<a name="l01091"></a>01091 
<a name="l01092"></a>01092   <span class="keyword">static</span> uint32_t InfoHash(<a class="code" href="classv8_1_1_retained_object_info.html">v8::RetainedObjectInfo</a>* info) {
<a name="l01093"></a>01093     <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#aa8d177a33c3b72c549c49376c5fa80fe">ComputeIntegerHash</a>(static_cast&lt;uint32_t&gt;(info-&gt;<a class="code" href="classv8_1_1_retained_object_info.html#a6fdbfa242b95615e63f08433419c8066">GetHash</a>()),
<a name="l01094"></a>01094                               v8::internal::kZeroHashSeed);
<a name="l01095"></a>01095   }
<a name="l01096"></a>01096   <span class="keyword">static</span> <span class="keywordtype">bool</span> RetainedInfosMatch(<span class="keywordtype">void</span>* key1, <span class="keywordtype">void</span>* key2) {
<a name="l01097"></a>01097     <span class="keywordflow">return</span> key1 == key2 ||
<a name="l01098"></a>01098         (<span class="keyword">reinterpret_cast&lt;</span><a class="code" href="classv8_1_1_retained_object_info.html">v8::RetainedObjectInfo</a>*<span class="keyword">&gt;</span>(key1))-&gt;IsEquivalent(
<a name="l01099"></a>01099             reinterpret_cast&lt;v8::RetainedObjectInfo*&gt;(key2));
<a name="l01100"></a>01100   }
<a name="l01101"></a>01101   INLINE(<span class="keyword">static</span> <span class="keywordtype">bool</span> StringsMatch(<span class="keywordtype">void</span>* key1, <span class="keywordtype">void</span>* key2)) {
<a name="l01102"></a>01102     <span class="keywordflow">return</span> strcmp(reinterpret_cast&lt;char*&gt;(key1),
<a name="l01103"></a>01103                   reinterpret_cast&lt;char*&gt;(key2)) == 0;
<a name="l01104"></a>01104   }
<a name="l01105"></a>01105 
<a name="l01106"></a>01106   <a class="code" href="classv8_1_1internal_1_1_native_group_retained_object_info.html">NativeGroupRetainedObjectInfo</a>* FindOrAddGroupInfo(<span class="keyword">const</span> <span class="keywordtype">char</span>* label);
<a name="l01107"></a>01107 
<a name="l01108"></a>01108   <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* snapshot_;
<a name="l01109"></a>01109   <a class="code" href="classv8_1_1internal_1_1_heap_snapshots_collection.html">HeapSnapshotsCollection</a>* collection_;
<a name="l01110"></a>01110   <a class="code" href="classv8_1_1internal_1_1_snapshotting_progress_reporting_interface.html">SnapshottingProgressReportingInterface</a>* progress_;
<a name="l01111"></a>01111   <span class="keywordtype">bool</span> embedder_queried_;
<a name="l01112"></a>01112   <a class="code" href="classv8_1_1internal_1_1_heap_objects_set.html">HeapObjectsSet</a> in_groups_;
<a name="l01113"></a>01113   <span class="comment">// RetainedObjectInfo* -&gt; List&lt;HeapObject*&gt;*</span>
<a name="l01114"></a>01114   <a class="code" href="classv8_1_1internal_1_1_template_hash_map_impl.html">HashMap</a> objects_by_info_;
<a name="l01115"></a>01115   <a class="code" href="classv8_1_1internal_1_1_template_hash_map_impl.html">HashMap</a> native_groups_;
<a name="l01116"></a>01116   <a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html">HeapEntriesAllocator</a>* synthetic_entries_allocator_;
<a name="l01117"></a>01117   <a class="code" href="classv8_1_1internal_1_1_heap_entries_allocator.html">HeapEntriesAllocator</a>* native_entries_allocator_;
<a name="l01118"></a>01118   <span class="comment">// Used during references extraction.</span>
<a name="l01119"></a>01119   <a class="code" href="classv8_1_1internal_1_1_snapshot_filler_interface.html">SnapshotFillerInterface</a>* filler_;
<a name="l01120"></a>01120 
<a name="l01121"></a>01121   <span class="keyword">static</span> <a class="code" href="namespacev8_1_1internal.html#aaa46e73005d8621c21a60273b7c1ede5">HeapThing</a> <span class="keyword">const</span> kNativesRootObject;
<a name="l01122"></a>01122 
<a name="l01123"></a><a class="code" href="classv8_1_1internal_1_1_native_objects_explorer.html#afbfc33c11a680509accaad1e0797b32b">01123</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_global_handles_extractor.html">GlobalHandlesExtractor</a>;
<a name="l01124"></a>01124 
<a name="l01125"></a>01125   <a class="code" href="globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code" href="classv8_1_1internal_1_1_native_objects_explorer.html">NativeObjectsExplorer</a>);
<a name="l01126"></a>01126 };
<a name="l01127"></a>01127 
<a name="l01128"></a>01128 
<a name="l01129"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot_generator.html">01129</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_heap_snapshot_generator.html">HeapSnapshotGenerator</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1_snapshotting_progress_reporting_interface.html">SnapshottingProgressReportingInterface</a> {
<a name="l01130"></a>01130  <span class="keyword">public</span>:
<a name="l01131"></a>01131   <a class="code" href="classv8_1_1internal_1_1_heap_snapshot_generator.html#a79423b426b14f58aa3f7a317e623125d">HeapSnapshotGenerator</a>(<a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* snapshot,
<a name="l01132"></a>01132                         <a class="code" href="classv8_1_1_activity_control.html">v8::ActivityControl</a>* control);
<a name="l01133"></a>01133   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot_generator.html#a5119a215e57adbedee69fde36570a0dc">GenerateSnapshot</a>();
<a name="l01134"></a>01134 
<a name="l01135"></a>01135  <span class="keyword">private</span>:
<a name="l01136"></a>01136   <span class="keywordtype">bool</span> BuildDominatorTree(<span class="keyword">const</span> <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;HeapEntry*&gt;</a>&amp; entries,
<a name="l01137"></a>01137                           <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;int&gt;</a>* dominators);
<a name="l01138"></a>01138   <span class="keywordtype">bool</span> CalculateRetainedSizes();
<a name="l01139"></a>01139   <span class="keywordtype">bool</span> CountEntriesAndReferences();
<a name="l01140"></a>01140   <span class="keywordtype">bool</span> FillReferences();
<a name="l01141"></a>01141   <span class="keywordtype">void</span> FillPostorderIndexes(<a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;HeapEntry*&gt;</a>* entries);
<a name="l01142"></a>01142   <span class="keywordtype">bool</span> IsUserGlobalReference(<span class="keyword">const</span> <a class="code" href="classv8_1_1_heap_graph_edge.html">HeapGraphEdge</a>&amp; edge);
<a name="l01143"></a>01143   <span class="keywordtype">void</span> MarkUserReachableObjects();
<a name="l01144"></a>01144   <span class="keywordtype">void</span> ProgressStep();
<a name="l01145"></a>01145   <span class="keywordtype">bool</span> ProgressReport(<span class="keywordtype">bool</span> force = <span class="keyword">false</span>);
<a name="l01146"></a>01146   <span class="keywordtype">bool</span> SetEntriesDominators();
<a name="l01147"></a>01147   <span class="keywordtype">void</span> SetProgressTotal(<span class="keywordtype">int</span> iterations_count);
<a name="l01148"></a>01148 
<a name="l01149"></a>01149   <a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* snapshot_;
<a name="l01150"></a>01150   <a class="code" href="classv8_1_1_activity_control.html">v8::ActivityControl</a>* control_;
<a name="l01151"></a>01151   <a class="code" href="classv8_1_1internal_1_1_v8_heap_explorer.html">V8HeapExplorer</a> v8_heap_explorer_;
<a name="l01152"></a>01152   <a class="code" href="classv8_1_1internal_1_1_native_objects_explorer.html">NativeObjectsExplorer</a> dom_explorer_;
<a name="l01153"></a>01153   <span class="comment">// Mapping from HeapThing pointers to HeapEntry* pointers.</span>
<a name="l01154"></a>01154   <a class="code" href="classv8_1_1internal_1_1_heap_entries_map.html">HeapEntriesMap</a> entries_;
<a name="l01155"></a>01155   <span class="comment">// Used during snapshot generation.</span>
<a name="l01156"></a>01156   <span class="keywordtype">int</span> progress_counter_;
<a name="l01157"></a>01157   <span class="keywordtype">int</span> progress_total_;
<a name="l01158"></a>01158 
<a name="l01159"></a>01159   DISALLOW_COPY_AND_ASSIGN(<a class="code" href="classv8_1_1internal_1_1_heap_snapshot_generator.html">HeapSnapshotGenerator</a>);
<a name="l01160"></a>01160 };
<a name="l01161"></a>01161 
<a name="l01162"></a>01162 <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_output_stream_writer.html">OutputStreamWriter</a>;
<a name="l01163"></a>01163 
<a name="l01164"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot_j_s_o_n_serializer.html">01164</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_heap_snapshot_j_s_o_n_serializer.html">HeapSnapshotJSONSerializer</a> {
<a name="l01165"></a>01165  <span class="keyword">public</span>:
<a name="l01166"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot_j_s_o_n_serializer.html#acc182676e6b29f094c62ecec8bb3ff5b">01166</a>   <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot_j_s_o_n_serializer.html#acc182676e6b29f094c62ecec8bb3ff5b">HeapSnapshotJSONSerializer</a>(<a class="code" href="classv8_1_1internal_1_1_heap_snapshot.html">HeapSnapshot</a>* snapshot)
<a name="l01167"></a>01167       : snapshot_(snapshot),
<a name="l01168"></a>01168         strings_(ObjectsMatch),
<a name="l01169"></a>01169         next_node_id_(1),
<a name="l01170"></a>01170         next_string_id_(1),
<a name="l01171"></a>01171         writer_(<a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>) {
<a name="l01172"></a>01172   }
<a name="l01173"></a>01173   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_heap_snapshot_j_s_o_n_serializer.html#a0cc8e8e97d0a2df0df0f59342ec447a2">Serialize</a>(<a class="code" href="classv8_1_1_output_stream.html">v8::OutputStream</a>* stream);
<a name="l01174"></a>01174 
<a name="l01175"></a>01175  <span class="keyword">private</span>:
<a name="l01176"></a>01176   INLINE(<span class="keyword">static</span> <span class="keywordtype">bool</span> ObjectsMatch(<span class="keywordtype">void</span>* key1, <span class="keywordtype">void</span>* key2)) {
<a name="l01177"></a>01177     <span class="keywordflow">return</span> key1 == key2;
<a name="l01178"></a>01178   }
<a name="l01179"></a>01179 
<a name="l01180"></a>01180   INLINE(<span class="keyword">static</span> uint32_t ObjectHash(<span class="keyword">const</span> <span class="keywordtype">void</span>* key)) {
<a name="l01181"></a>01181     <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#aa8d177a33c3b72c549c49376c5fa80fe">ComputeIntegerHash</a>(
<a name="l01182"></a>01182         static_cast&lt;uint32_t&gt;(reinterpret_cast&lt;uintptr_t&gt;(key)),
<a name="l01183"></a>01183         v8::internal::kZeroHashSeed);
<a name="l01184"></a>01184   }
<a name="l01185"></a>01185 
<a name="l01186"></a>01186   <span class="keywordtype">void</span> CalculateNodeIndexes(<span class="keyword">const</span> List&lt;HeapEntry*&gt;&amp; nodes);
<a name="l01187"></a>01187   HeapSnapshot* CreateFakeSnapshot();
<a name="l01188"></a>01188   <span class="keywordtype">int</span> GetStringId(<span class="keyword">const</span> <span class="keywordtype">char</span>* s);
<a name="l01189"></a>01189   <span class="keywordtype">void</span> SerializeEdge(HeapGraphEdge* edge, <span class="keywordtype">bool</span> first_edge);
<a name="l01190"></a>01190   <span class="keywordtype">void</span> SerializeEdges(<span class="keyword">const</span> List&lt;HeapEntry*&gt;&amp; nodes);
<a name="l01191"></a>01191   <span class="keywordtype">void</span> SerializeImpl();
<a name="l01192"></a>01192   <span class="keywordtype">void</span> SerializeNode(HeapEntry* entry, <span class="keywordtype">int</span> edges_index);
<a name="l01193"></a>01193   <span class="keywordtype">void</span> SerializeNodes(<span class="keyword">const</span> List&lt;HeapEntry*&gt;&amp; nodes);
<a name="l01194"></a>01194   <span class="keywordtype">void</span> SerializeSnapshot();
<a name="l01195"></a>01195   <span class="keywordtype">void</span> SerializeString(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* s);
<a name="l01196"></a>01196   <span class="keywordtype">void</span> SerializeStrings();
<a name="l01197"></a>01197   <span class="keywordtype">void</span> SortHashMap(<a class="code" href="namespacev8_1_1internal.html#a7e7097fccc44a6d27c2a2c5c1eca3e7b">HashMap</a>* map, List&lt;HashMap::Entry*&gt;* sorted_entries);
<a name="l01198"></a>01198 
<a name="l01199"></a>01199   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kMaxSerializableSnapshotRawSize;
<a name="l01200"></a>01200 
<a name="l01201"></a>01201   HeapSnapshot* snapshot_;
<a name="l01202"></a>01202   <a class="code" href="namespacev8_1_1internal.html#a7e7097fccc44a6d27c2a2c5c1eca3e7b">HashMap</a> strings_;
<a name="l01203"></a>01203   <span class="keywordtype">int</span> next_node_id_;
<a name="l01204"></a>01204   <span class="keywordtype">int</span> next_string_id_;
<a name="l01205"></a>01205   OutputStreamWriter* writer_;
<a name="l01206"></a>01206 
<a name="l01207"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot_j_s_o_n_serializer.html#aa8f0fed181b2cbcc6d42bb03ef455db5">01207</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_heap_snapshot_j_s_o_n_serializer.html#aa8f0fed181b2cbcc6d42bb03ef455db5">HeapSnapshotJSONSerializerEnumerator</a>;
<a name="l01208"></a><a class="code" href="classv8_1_1internal_1_1_heap_snapshot_j_s_o_n_serializer.html#a8044648e3cab653e8d53f7d5d11eaa80">01208</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_heap_snapshot_j_s_o_n_serializer.html#a8044648e3cab653e8d53f7d5d11eaa80">HeapSnapshotJSONSerializerIterator</a>;
<a name="l01209"></a>01209 
<a name="l01210"></a>01210   <a class="code" href="globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code" href="classv8_1_1internal_1_1_heap_snapshot_j_s_o_n_serializer.html">HeapSnapshotJSONSerializer</a>);
<a name="l01211"></a>01211 };
<a name="l01212"></a>01212 
<a name="l01213"></a>01213 } }  <span class="comment">// namespace v8::internal</span>
<a name="l01214"></a>01214 
<a name="l01215"></a>01215 <span class="preprocessor">#endif  // V8_PROFILE_GENERATOR_H_</span>
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="profile-generator_8h.html">profile-generator.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 13:06:12 for V8 API Reference Guide by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
