<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>V8 API Reference Guide: /home/codex/apps/v8/src/deoptimizer.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="logo.jpg"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">V8 API Reference Guide
   
   </div>
   <div id="projectbrief">If this is out of date tweet @Contra</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('deoptimizer_8h.html','');
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/home/codex/apps/v8/src/deoptimizer.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="deoptimizer_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright 2012 the V8 project authors. All rights reserved.</span>
<a name="l00002"></a>00002 <span class="comment">// Redistribution and use in source and binary forms, with or without</span>
<a name="l00003"></a>00003 <span class="comment">// modification, are permitted provided that the following conditions are</span>
<a name="l00004"></a>00004 <span class="comment">// met:</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">//     * Redistributions of source code must retain the above copyright</span>
<a name="l00007"></a>00007 <span class="comment">//       notice, this list of conditions and the following disclaimer.</span>
<a name="l00008"></a>00008 <span class="comment">//     * Redistributions in binary form must reproduce the above</span>
<a name="l00009"></a>00009 <span class="comment">//       copyright notice, this list of conditions and the following</span>
<a name="l00010"></a>00010 <span class="comment">//       disclaimer in the documentation and/or other materials provided</span>
<a name="l00011"></a>00011 <span class="comment">//       with the distribution.</span>
<a name="l00012"></a>00012 <span class="comment">//     * Neither the name of Google Inc. nor the names of its</span>
<a name="l00013"></a>00013 <span class="comment">//       contributors may be used to endorse or promote products derived</span>
<a name="l00014"></a>00014 <span class="comment">//       from this software without specific prior written permission.</span>
<a name="l00015"></a>00015 <span class="comment">//</span>
<a name="l00016"></a>00016 <span class="comment">// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00017"></a>00017 <span class="comment">// &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00018"></a>00018 <span class="comment">// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</span>
<a name="l00019"></a>00019 <span class="comment">// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</span>
<a name="l00020"></a>00020 <span class="comment">// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
<a name="l00021"></a>00021 <span class="comment">// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
<a name="l00022"></a>00022 <span class="comment">// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</span>
<a name="l00023"></a>00023 <span class="comment">// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</span>
<a name="l00024"></a>00024 <span class="comment">// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span>
<a name="l00025"></a>00025 <span class="comment">// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span>
<a name="l00026"></a>00026 <span class="comment">// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#ifndef V8_DEOPTIMIZER_H_</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define V8_DEOPTIMIZER_H_</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="src_2v8_8h.html">v8.h</a>&quot;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="allocation_8h.html">allocation.h</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="macro-assembler_8h.html">macro-assembler.h</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="zone-inl_8h.html">zone-inl.h</a>&quot;</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 <span class="keyword">namespace </span>v8 {
<a name="l00039"></a>00039 <span class="keyword">namespace </span>internal {
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="keyword">class </span>FrameDescription;
<a name="l00042"></a>00042 <span class="keyword">class </span>TranslationIterator;
<a name="l00043"></a>00043 <span class="keyword">class </span>DeoptimizingCodeListNode;
<a name="l00044"></a>00044 <span class="keyword">class </span>DeoptimizedFrameInfo;
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="keyword">class </span>HeapNumberMaterializationDescriptor <a class="code" href="allocation_8h.html#abab81306d90d0b82732d5bed93a0a588">BASE_EMBEDDED</a> {
<a name="l00047"></a>00047  <span class="keyword">public</span>:
<a name="l00048"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a5357353785b869ce0fdb057458acd5dd">00048</a>   HeapNumberMaterializationDescriptor(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> slot_address, <span class="keywordtype">double</span> val)
<a name="l00049"></a>00049       : slot_address_(slot_address), val_(val) { }
<a name="l00050"></a>00050 
<a name="l00051"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a1d2e02c60a438367bec78a4a820a92b0">00051</a>   <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a1d2e02c60a438367bec78a4a820a92b0">slot_address</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> slot_address_; }
<a name="l00052"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ac7556c4065978ceb5d2d7442aae4e82e">00052</a>   <span class="keywordtype">double</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ac7556c4065978ceb5d2d7442aae4e82e">value</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> val_; }
<a name="l00053"></a>00053 
<a name="l00054"></a>00054  <span class="keyword">private</span>:
<a name="l00055"></a>00055   <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> slot_address_;
<a name="l00056"></a>00056   <span class="keywordtype">double</span> val_;
<a name="l00057"></a>00057 };
<a name="l00058"></a>00058 
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="keyword">class </span>OptimizedFunctionVisitor <a class="code" href="allocation_8h.html#abab81306d90d0b82732d5bed93a0a588">BASE_EMBEDDED</a> {
<a name="l00061"></a>00061  <span class="keyword">public</span>:
<a name="l00062"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#afedc8d41b4887c2ab148817cb8ff4b6e">00062</a>   <span class="keyword">virtual</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#afedc8d41b4887c2ab148817cb8ff4b6e">~OptimizedFunctionVisitor</a>() {}
<a name="l00063"></a>00063 
<a name="l00064"></a>00064   <span class="comment">// Function which is called before iteration of any optimized functions</span>
<a name="l00065"></a>00065   <span class="comment">// from given global context.</span>
<a name="l00066"></a>00066   <span class="keyword">virtual</span> <span class="keywordtype">void</span> EnterContext(<a class="code" href="classv8_1_1internal_1_1_context.html">Context</a>* context) = 0;
<a name="l00067"></a>00067 
<a name="l00068"></a>00068   <span class="keyword">virtual</span> <span class="keywordtype">void</span> VisitFunction(<a class="code" href="classv8_1_1internal_1_1_j_s_function.html">JSFunction</a>* <span class="keyword">function</span>) = 0;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070   <span class="comment">// Function which is called after iteration of all optimized functions</span>
<a name="l00071"></a>00071   <span class="comment">// from given global context.</span>
<a name="l00072"></a>00072   <span class="keyword">virtual</span> <span class="keywordtype">void</span> LeaveContext(<a class="code" href="classv8_1_1internal_1_1_context.html">Context</a>* context) = 0;
<a name="l00073"></a>00073 };
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="keyword">class </span>Deoptimizer;
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 
<a name="l00079"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer_data.html">00079</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_deoptimizer_data.html">DeoptimizerData</a> {
<a name="l00080"></a>00080  <span class="keyword">public</span>:
<a name="l00081"></a>00081   <a class="code" href="classv8_1_1internal_1_1_deoptimizer_data.html#a97caf0ef924a5664044492a75100bbd2">DeoptimizerData</a>();
<a name="l00082"></a>00082   <a class="code" href="classv8_1_1internal_1_1_deoptimizer_data.html#ad05648777ea936e8d533c96d23a1dfad">~DeoptimizerData</a>();
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="preprocessor">#ifdef ENABLE_DEBUGGER_SUPPORT</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span>  <span class="keywordtype">void</span> Iterate(ObjectVisitor* v);
<a name="l00086"></a>00086 <span class="preprocessor">#endif</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>
<a name="l00088"></a>00088  <span class="keyword">private</span>:
<a name="l00089"></a>00089   <a class="code" href="classv8_1_1internal_1_1_memory_chunk.html">MemoryChunk</a>* eager_deoptimization_entry_code_;
<a name="l00090"></a>00090   <a class="code" href="classv8_1_1internal_1_1_memory_chunk.html">MemoryChunk</a>* lazy_deoptimization_entry_code_;
<a name="l00091"></a>00091   <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html">Deoptimizer</a>* current_;
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 <span class="preprocessor">#ifdef ENABLE_DEBUGGER_SUPPORT</span>
<a name="l00094"></a>00094 <span class="preprocessor"></span>  DeoptimizedFrameInfo* deoptimized_frame_info_;
<a name="l00095"></a>00095 <span class="preprocessor">#endif</span>
<a name="l00096"></a>00096 <span class="preprocessor"></span>
<a name="l00097"></a>00097   <span class="comment">// List of deoptimized code which still have references from active stack</span>
<a name="l00098"></a>00098   <span class="comment">// frames. These code objects are needed by the deoptimizer when deoptimizing</span>
<a name="l00099"></a>00099   <span class="comment">// a frame for which the code object for the function function has been</span>
<a name="l00100"></a>00100   <span class="comment">// changed from the code present when deoptimizing was done.</span>
<a name="l00101"></a>00101   <a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html">DeoptimizingCodeListNode</a>* deoptimizing_code_list_;
<a name="l00102"></a>00102 
<a name="l00103"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer_data.html#aa89911581cd6ded032f998021aef9e5c">00103</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html">Deoptimizer</a>;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105   <a class="code" href="globals_8h.html#af8df3547bfde53a5acb93e2607b0034a">DISALLOW_COPY_AND_ASSIGN</a>(<a class="code" href="classv8_1_1internal_1_1_deoptimizer_data.html">DeoptimizerData</a>);
<a name="l00106"></a>00106 };
<a name="l00107"></a>00107 
<a name="l00108"></a>00108 
<a name="l00109"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html">00109</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html">Deoptimizer</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1_malloced.html">Malloced</a> {
<a name="l00110"></a>00110  <span class="keyword">public</span>:
<a name="l00111"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">00111</a>   <span class="keyword">enum</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">BailoutType</a> {
<a name="l00112"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7a9600dea830361b4e85a07443854ecd48">00112</a>     <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7a9600dea830361b4e85a07443854ecd48">EAGER</a>,
<a name="l00113"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7a50c8ec0b8f985e997b39c510b380ed75">00113</a>     <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7a50c8ec0b8f985e997b39c510b380ed75">LAZY</a>,
<a name="l00114"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7ad38f08d0838f7a676042bc600d58fc6a">00114</a>     <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7ad38f08d0838f7a676042bc600d58fc6a">OSR</a>,
<a name="l00115"></a>00115     <span class="comment">// This last bailout type is not really a bailout, but used by the</span>
<a name="l00116"></a>00116     <span class="comment">// debugger to deoptimize stack frames to allow inspection.</span>
<a name="l00117"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7ada7ef8d1b438b917b8bf011109c4a0cd">00117</a>     <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7ada7ef8d1b438b917b8bf011109c4a0cd">DEBUGGER</a>
<a name="l00118"></a>00118   };
<a name="l00119"></a>00119 
<a name="l00120"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a9d094f3a522f8ade8b6616045354ca9d">00120</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a9d094f3a522f8ade8b6616045354ca9d">output_count</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> output_count_; }
<a name="l00121"></a>00121 
<a name="l00122"></a>00122   <span class="comment">// Number of created JS frames. Not all created frames are necessarily JS.</span>
<a name="l00123"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#aca6d326518745b46fad81099cf2bba12">00123</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#aca6d326518745b46fad81099cf2bba12">jsframe_count</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> jsframe_count_; }
<a name="l00124"></a>00124 
<a name="l00125"></a>00125   <span class="keyword">static</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html">Deoptimizer</a>* <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a2ba617cb5ef7bc82cc0c30c041ae6b00">New</a>(<a class="code" href="classv8_1_1internal_1_1_j_s_function.html">JSFunction</a>* <span class="keyword">function</span>,
<a name="l00126"></a>00126                           <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">BailoutType</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>,
<a name="l00127"></a>00127                           <span class="keywordtype">unsigned</span> bailout_id,
<a name="l00128"></a>00128                           <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> from,
<a name="l00129"></a>00129                           <span class="keywordtype">int</span> fp_to_sp_delta,
<a name="l00130"></a>00130                           <a class="code" href="classv8_1_1internal_1_1_isolate.html">Isolate</a>* isolate);
<a name="l00131"></a>00131   <span class="keyword">static</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html">Deoptimizer</a>* <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a078aeb9b54269abe7f5f922c2ca540e8">Grab</a>(<a class="code" href="classv8_1_1internal_1_1_isolate.html">Isolate</a>* isolate);
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 <span class="preprocessor">#ifdef ENABLE_DEBUGGER_SUPPORT</span>
<a name="l00134"></a>00134 <span class="preprocessor"></span>  <span class="comment">// The returned object with information on the optimized frame needs to be</span>
<a name="l00135"></a>00135   <span class="comment">// freed before another one can be generated.</span>
<a name="l00136"></a>00136   <span class="keyword">static</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#ad768f50809f35947f37316cdfe284e92">DeoptimizedFrameInfo</a>* DebuggerInspectableFrame(<a class="code" href="classv8_1_1internal_1_1_java_script_frame.html">JavaScriptFrame</a>* frame,
<a name="l00137"></a>00137                                                         <span class="keywordtype">int</span> jsframe_index,
<a name="l00138"></a>00138                                                         <a class="code" href="classv8_1_1internal_1_1_isolate.html">Isolate</a>* isolate);
<a name="l00139"></a>00139   <span class="keyword">static</span> <span class="keywordtype">void</span> DeleteDebuggerInspectableFrame(<a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#ad768f50809f35947f37316cdfe284e92">DeoptimizedFrameInfo</a>* info,
<a name="l00140"></a>00140                                              <a class="code" href="classv8_1_1internal_1_1_isolate.html">Isolate</a>* isolate);
<a name="l00141"></a>00141 <span class="preprocessor">#endif</span>
<a name="l00142"></a>00142 <span class="preprocessor"></span>
<a name="l00143"></a>00143   <span class="comment">// Makes sure that there is enough room in the relocation</span>
<a name="l00144"></a>00144   <span class="comment">// information of a code object to perform lazy deoptimization</span>
<a name="l00145"></a>00145   <span class="comment">// patching. If there is not enough room a new relocation</span>
<a name="l00146"></a>00146   <span class="comment">// information object is allocated and comments are added until it</span>
<a name="l00147"></a>00147   <span class="comment">// is big enough.</span>
<a name="l00148"></a>00148   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a24bf34f5595b88f37234a55fdb4491a3">EnsureRelocSpaceForLazyDeoptimization</a>(<a class="code" href="classv8_1_1internal_1_1_handle.html">Handle&lt;Code&gt;</a> <a class="code" href="namespacev8_1_1internal.html#a7500f5d92d93409e192a671bd4425496">code</a>);
<a name="l00149"></a>00149 
<a name="l00150"></a>00150   <span class="comment">// Deoptimize the function now. Its current optimized code will never be run</span>
<a name="l00151"></a>00151   <span class="comment">// again and any activations of the optimized code will get deoptimized when</span>
<a name="l00152"></a>00152   <span class="comment">// execution returns.</span>
<a name="l00153"></a>00153   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a37eeae721317de053d14471471235308">DeoptimizeFunction</a>(<a class="code" href="classv8_1_1internal_1_1_j_s_function.html">JSFunction</a>* <span class="keyword">function</span>);
<a name="l00154"></a>00154 
<a name="l00155"></a>00155   <span class="comment">// Deoptimize all functions in the heap.</span>
<a name="l00156"></a>00156   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#abbbcd0b45ca88fefffea6bf4ba06739e">DeoptimizeAll</a>();
<a name="l00157"></a>00157 
<a name="l00158"></a>00158   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a58cf995255d734234820c8c5e8dc6fea">DeoptimizeGlobalObject</a>(<a class="code" href="classv8_1_1internal_1_1_j_s_object.html">JSObject</a>* <span class="keywordtype">object</span>);
<a name="l00159"></a>00159 
<a name="l00160"></a>00160   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a7848f6ccb82c2053d3d3d7bc53254651">VisitAllOptimizedFunctionsForContext</a>(
<a name="l00161"></a>00161       <a class="code" href="classv8_1_1internal_1_1_context.html">Context</a>* context, OptimizedFunctionVisitor* visitor);
<a name="l00162"></a>00162 
<a name="l00163"></a>00163   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#aa859b1e8b4c5c4a3c3ec6899c345c326">VisitAllOptimizedFunctionsForGlobalObject</a>(
<a name="l00164"></a>00164       <a class="code" href="classv8_1_1internal_1_1_j_s_object.html">JSObject</a>* <span class="keywordtype">object</span>, OptimizedFunctionVisitor* visitor);
<a name="l00165"></a>00165 
<a name="l00166"></a>00166   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a61d19aff39622fd680a3704339d5f942">VisitAllOptimizedFunctions</a>(OptimizedFunctionVisitor* visitor);
<a name="l00167"></a>00167 
<a name="l00168"></a>00168   <span class="comment">// The size in bytes of the code required at a lazy deopt patch site.</span>
<a name="l00169"></a>00169   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a1f7f2485ba574423fed32fab44e6a15b">patch_size</a>();
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <span class="comment">// Patch all stack guard checks in the unoptimized code to</span>
<a name="l00172"></a>00172   <span class="comment">// unconditionally call replacement_code.</span>
<a name="l00173"></a>00173   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#af8481eb3e7a44e0a6853581640e57cd8">PatchStackCheckCode</a>(<a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* unoptimized_code,
<a name="l00174"></a>00174                                   <a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* check_code,
<a name="l00175"></a>00175                                   <a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* replacement_code);
<a name="l00176"></a>00176 
<a name="l00177"></a>00177   <span class="comment">// Patch stack guard check at instruction before pc_after in</span>
<a name="l00178"></a>00178   <span class="comment">// the unoptimized code to unconditionally call replacement_code.</span>
<a name="l00179"></a>00179   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a8da1b2c10d542ad18e6e08d0603d99a6">PatchStackCheckCodeAt</a>(<a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* unoptimized_code,
<a name="l00180"></a>00180                                     <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> pc_after,
<a name="l00181"></a>00181                                     <a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* check_code,
<a name="l00182"></a>00182                                     <a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* replacement_code);
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   <span class="comment">// Change all patched stack guard checks in the unoptimized code</span>
<a name="l00185"></a>00185   <span class="comment">// back to a normal stack guard check.</span>
<a name="l00186"></a>00186   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a29dd3d8f16e0b6df4448e6cd19c82a4b">RevertStackCheckCode</a>(<a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* unoptimized_code,
<a name="l00187"></a>00187                                    <a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* check_code,
<a name="l00188"></a>00188                                    <a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* replacement_code);
<a name="l00189"></a>00189 
<a name="l00190"></a>00190   <span class="comment">// Change all patched stack guard checks in the unoptimized code</span>
<a name="l00191"></a>00191   <span class="comment">// back to a normal stack guard check.</span>
<a name="l00192"></a>00192   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#abe165eb7fbc9588a89ffab9d1e1c1eb5">RevertStackCheckCodeAt</a>(<a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* unoptimized_code,
<a name="l00193"></a>00193                                      <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> pc_after,
<a name="l00194"></a>00194                                      <a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* check_code,
<a name="l00195"></a>00195                                      <a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* replacement_code);
<a name="l00196"></a>00196 
<a name="l00197"></a>00197   <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a8d16c823870aa610d5ee67ea1576d140">~Deoptimizer</a>();
<a name="l00198"></a>00198 
<a name="l00199"></a>00199   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#aa4360dd1adad4a6baca9a74ba2c56b97">MaterializeHeapNumbers</a>();
<a name="l00200"></a>00200 <span class="preprocessor">#ifdef ENABLE_DEBUGGER_SUPPORT</span>
<a name="l00201"></a>00201 <span class="preprocessor"></span>  <span class="keywordtype">void</span> MaterializeHeapNumbersForDebuggerInspectableFrame(
<a name="l00202"></a>00202       <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> parameters_top,
<a name="l00203"></a>00203       uint32_t parameters_size,
<a name="l00204"></a>00204       <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> expressions_top,
<a name="l00205"></a>00205       uint32_t expressions_size,
<a name="l00206"></a>00206       <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#ad768f50809f35947f37316cdfe284e92">DeoptimizedFrameInfo</a>* info);
<a name="l00207"></a>00207 <span class="preprocessor">#endif</span>
<a name="l00208"></a>00208 <span class="preprocessor"></span>
<a name="l00209"></a>00209   <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a27cf077b48bd6ef6ff9905b2ebccc6c1">ComputeOutputFrames</a>(<a class="code" href="classv8_1_1internal_1_1_deoptimizer.html">Deoptimizer</a>* deoptimizer);
<a name="l00210"></a>00210 
<a name="l00211"></a>00211   <span class="keyword">static</span> <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#afcc3e47274ad171c7d415ee89602d660">GetDeoptimizationEntry</a>(<span class="keywordtype">int</span> <span class="keywordtype">id</span>, <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">BailoutType</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>);
<a name="l00212"></a>00212   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a67c40113470513f8b6606e8609e7bf83">GetDeoptimizationId</a>(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr, <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">BailoutType</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>);
<a name="l00213"></a>00213   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#abe21645c4a42afb3bef7a5adebd0949b">GetOutputInfo</a>(<a class="code" href="classv8_1_1internal_1_1_deoptimization_output_data.html">DeoptimizationOutputData</a>* data,
<a name="l00214"></a>00214                            <span class="keywordtype">unsigned</span> node_id,
<a name="l00215"></a>00215                            <a class="code" href="classv8_1_1internal_1_1_shared_function_info.html">SharedFunctionInfo</a>* shared);
<a name="l00216"></a>00216 
<a name="l00217"></a>00217   <span class="comment">// Code generation support.</span>
<a name="l00218"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a596fc3bd6f8ae86360b9aecb5a240ce6">00218</a>   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a596fc3bd6f8ae86360b9aecb5a240ce6">input_offset</a>() { <span class="keywordflow">return</span> <a class="code" href="globals_8h.html#ab2bccdfdccc67d9e76421f12925e1452">OFFSET_OF</a>(<a class="code" href="classv8_1_1internal_1_1_deoptimizer.html">Deoptimizer</a>, input_); }
<a name="l00219"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a76a3faf66ccb1821e439a49f206b51bf">00219</a>   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a76a3faf66ccb1821e439a49f206b51bf">output_count_offset</a>() {
<a name="l00220"></a>00220     <span class="keywordflow">return</span> <a class="code" href="globals_8h.html#ab2bccdfdccc67d9e76421f12925e1452">OFFSET_OF</a>(<a class="code" href="classv8_1_1internal_1_1_deoptimizer.html">Deoptimizer</a>, output_count_);
<a name="l00221"></a>00221   }
<a name="l00222"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a210da11b9db7b0d1fab095ff6d9d122d">00222</a>   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a210da11b9db7b0d1fab095ff6d9d122d">output_offset</a>() { <span class="keywordflow">return</span> <a class="code" href="globals_8h.html#ab2bccdfdccc67d9e76421f12925e1452">OFFSET_OF</a>(<a class="code" href="classv8_1_1internal_1_1_deoptimizer.html">Deoptimizer</a>, output_); }
<a name="l00223"></a>00223 
<a name="l00224"></a>00224   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a880004c229c7157a3d87ce9ea312f889">GetDeoptimizedCodeCount</a>(<a class="code" href="classv8_1_1internal_1_1_isolate.html">Isolate</a>* isolate);
<a name="l00225"></a>00225 
<a name="l00226"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a670edfccf46146bdfbb870239c84f0a9">00226</a>   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a670edfccf46146bdfbb870239c84f0a9">kNotDeoptimizationEntry</a> = -1;
<a name="l00227"></a>00227 
<a name="l00228"></a>00228   <span class="comment">// Generators for the deoptimization entry code.</span>
<a name="l00229"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html">00229</a>   <span class="keyword">class </span>EntryGenerator <a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html">BASE_EMBEDDED</a> {
<a name="l00230"></a>00230    <span class="keyword">public</span>:
<a name="l00231"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#aae25089beddd785710a1bfaedfc42078">00231</a>     EntryGenerator(<a class="code" href="classv8_1_1internal_1_1_macro_assembler.html">MacroAssembler</a>* masm, <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">BailoutType</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>)
<a name="l00232"></a>00232         : masm_(masm), <a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a>(type) { }
<a name="l00233"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ac5bfeabad9a46696ee49e8228559045f">00233</a>     <span class="keyword">virtual</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ac5bfeabad9a46696ee49e8228559045f">~EntryGenerator</a>() { }
<a name="l00234"></a>00234 
<a name="l00235"></a>00235     <span class="keywordtype">void</span> Generate();
<a name="l00236"></a>00236 
<a name="l00237"></a>00237    <span class="keyword">protected</span>:
<a name="l00238"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ae11d3fa7d6c126b35985e6da88818b4a">00238</a>     <a class="code" href="classv8_1_1internal_1_1_macro_assembler.html">MacroAssembler</a>* <a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ae11d3fa7d6c126b35985e6da88818b4a">masm</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> masm_; }
<a name="l00239"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a1ee53b32318046535c5d383eb719001e">00239</a>     <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">BailoutType</a> <a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a1ee53b32318046535c5d383eb719001e">type</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a>; }
<a name="l00240"></a>00240 
<a name="l00241"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ad94d456560c0c35abc036ca2785f4e43">00241</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ad94d456560c0c35abc036ca2785f4e43">GeneratePrologue</a>() { }
<a name="l00242"></a>00242 
<a name="l00243"></a>00243    <span class="keyword">private</span>:
<a name="l00244"></a>00244     <a class="code" href="classv8_1_1internal_1_1_macro_assembler.html">MacroAssembler</a>* masm_;
<a name="l00245"></a>00245     <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">Deoptimizer::BailoutType</a> <a class="code" href="namespacev8_1_1internal.html#af6a7fd6561b7b6a736ce8e1e3ab4bd45">type_</a>;
<a name="l00246"></a>00246   };
<a name="l00247"></a>00247 
<a name="l00248"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_table_entry_generator.html">00248</a>   <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_table_entry_generator.html">TableEntryGenerator</a> : <span class="keyword">public</span> EntryGenerator {
<a name="l00249"></a>00249    <span class="keyword">public</span>:
<a name="l00250"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_table_entry_generator.html#a87f52923286fff085069d1f27060a35d">00250</a>     <a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_table_entry_generator.html#a87f52923286fff085069d1f27060a35d">TableEntryGenerator</a>(<a class="code" href="classv8_1_1internal_1_1_macro_assembler.html">MacroAssembler</a>* masm, <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">BailoutType</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>,  <span class="keywordtype">int</span> count)
<a name="l00251"></a>00251         : EntryGenerator(masm, type), count_(count) { }
<a name="l00252"></a>00252 
<a name="l00253"></a>00253    <span class="keyword">protected</span>:
<a name="l00254"></a>00254     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer_1_1_table_entry_generator.html#a7bc43f4dce5b2828dcac332f193a8c5c">GeneratePrologue</a>();
<a name="l00255"></a>00255 
<a name="l00256"></a>00256    <span class="keyword">private</span>:
<a name="l00257"></a>00257     <span class="keywordtype">int</span> count()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> count_; }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259     <span class="keywordtype">int</span> count_;
<a name="l00260"></a>00260   };
<a name="l00261"></a>00261 
<a name="l00262"></a>00262   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a1223f29e38a82108ea65481efce7b517">ConvertJSFrameIndexToFrameIndex</a>(<span class="keywordtype">int</span> jsframe_index);
<a name="l00263"></a>00263 
<a name="l00264"></a>00264  <span class="keyword">private</span>:
<a name="l00265"></a>00265   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> kNumberOfEntries = 16384;
<a name="l00266"></a>00266 
<a name="l00267"></a>00267   Deoptimizer(<a class="code" href="classv8_1_1_isolate.html">Isolate</a>* isolate,
<a name="l00268"></a>00268               JSFunction* <span class="keyword">function</span>,
<a name="l00269"></a>00269               <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">BailoutType</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>,
<a name="l00270"></a>00270               <span class="keywordtype">unsigned</span> bailout_id,
<a name="l00271"></a>00271               <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> from,
<a name="l00272"></a>00272               <span class="keywordtype">int</span> fp_to_sp_delta,
<a name="l00273"></a>00273               Code* optimized_code);
<a name="l00274"></a>00274   <span class="keywordtype">void</span> DeleteFrameDescriptions();
<a name="l00275"></a>00275 
<a name="l00276"></a>00276   <span class="keywordtype">void</span> DoComputeOutputFrames();
<a name="l00277"></a>00277   <span class="keywordtype">void</span> DoComputeOsrOutputFrame();
<a name="l00278"></a>00278   <span class="keywordtype">void</span> DoComputeJSFrame(TranslationIterator* iterator, <span class="keywordtype">int</span> frame_index);
<a name="l00279"></a>00279   <span class="keywordtype">void</span> DoComputeArgumentsAdaptorFrame(TranslationIterator* iterator,
<a name="l00280"></a>00280                                       <span class="keywordtype">int</span> frame_index);
<a name="l00281"></a>00281   <span class="keywordtype">void</span> DoComputeConstructStubFrame(TranslationIterator* iterator,
<a name="l00282"></a>00282                                    <span class="keywordtype">int</span> frame_index);
<a name="l00283"></a>00283   <span class="keywordtype">void</span> DoTranslateCommand(TranslationIterator* iterator,
<a name="l00284"></a>00284                           <span class="keywordtype">int</span> frame_index,
<a name="l00285"></a>00285                           <span class="keywordtype">unsigned</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a210da11b9db7b0d1fab095ff6d9d122d">output_offset</a>);
<a name="l00286"></a>00286   <span class="comment">// Translate a command for OSR.  Updates the input offset to be used for</span>
<a name="l00287"></a>00287   <span class="comment">// the next command.  Returns false if translation of the command failed</span>
<a name="l00288"></a>00288   <span class="comment">// (e.g., a number conversion failed) and may or may not have updated the</span>
<a name="l00289"></a>00289   <span class="comment">// input offset.</span>
<a name="l00290"></a>00290   <span class="keywordtype">bool</span> DoOsrTranslateCommand(TranslationIterator* iterator,
<a name="l00291"></a>00291                              <span class="keywordtype">int</span>* <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a596fc3bd6f8ae86360b9aecb5a240ce6">input_offset</a>);
<a name="l00292"></a>00292 
<a name="l00293"></a>00293   <span class="keywordtype">unsigned</span> ComputeInputFrameSize() <span class="keyword">const</span>;
<a name="l00294"></a>00294   <span class="keywordtype">unsigned</span> ComputeFixedSize(JSFunction* <span class="keyword">function</span>) <span class="keyword">const</span>;
<a name="l00295"></a>00295 
<a name="l00296"></a>00296   <span class="keywordtype">unsigned</span> ComputeIncomingArgumentSize(JSFunction* <span class="keyword">function</span>) <span class="keyword">const</span>;
<a name="l00297"></a>00297   <span class="keywordtype">unsigned</span> ComputeOutgoingArgumentSize() <span class="keyword">const</span>;
<a name="l00298"></a>00298 
<a name="l00299"></a>00299   <a class="code" href="classv8_1_1_object.html">Object</a>* ComputeLiteral(<span class="keywordtype">int</span> index) <span class="keyword">const</span>;
<a name="l00300"></a>00300 
<a name="l00301"></a>00301   <span class="keywordtype">void</span> AddDoubleValue(intptr_t slot_address, <span class="keywordtype">double</span> value);
<a name="l00302"></a>00302 
<a name="l00303"></a>00303   <span class="keyword">static</span> MemoryChunk* CreateCode(<a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">BailoutType</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>);
<a name="l00304"></a>00304   <span class="keyword">static</span> <span class="keywordtype">void</span> GenerateDeoptimizationEntries(
<a name="l00305"></a>00305       MacroAssembler* masm, <span class="keywordtype">int</span> count, <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">BailoutType</a> <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>);
<a name="l00306"></a>00306 
<a name="l00307"></a>00307   <span class="comment">// Weak handle callback for deoptimizing code objects.</span>
<a name="l00308"></a>00308   <span class="keyword">static</span> <span class="keywordtype">void</span> HandleWeakDeoptimizedCode(
<a name="l00309"></a>00309       <a class="code" href="classv8_1_1_persistent.html">v8::Persistent&lt;v8::Value&gt;</a> obj, <span class="keywordtype">void</span>* data);
<a name="l00310"></a>00310   <span class="keyword">static</span> Code* FindDeoptimizingCodeFromAddress(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr);
<a name="l00311"></a>00311   <span class="keyword">static</span> <span class="keywordtype">void</span> RemoveDeoptimizingCode(Code* <a class="code" href="namespacev8_1_1internal.html#a7500f5d92d93409e192a671bd4425496">code</a>);
<a name="l00312"></a>00312 
<a name="l00313"></a>00313   <span class="comment">// Fill the input from from a JavaScript frame. This is used when</span>
<a name="l00314"></a>00314   <span class="comment">// the debugger needs to inspect an optimized frame. For normal</span>
<a name="l00315"></a>00315   <span class="comment">// deoptimizations the input frame is filled in generated code.</span>
<a name="l00316"></a>00316   <span class="keywordtype">void</span> FillInputFrame(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> tos, JavaScriptFrame* frame);
<a name="l00317"></a>00317 
<a name="l00318"></a>00318   <a class="code" href="classv8_1_1_isolate.html">Isolate</a>* isolate_;
<a name="l00319"></a>00319   JSFunction* function_;
<a name="l00320"></a>00320   Code* optimized_code_;
<a name="l00321"></a>00321   <span class="keywordtype">unsigned</span> bailout_id_;
<a name="l00322"></a>00322   <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a25e154e5dc24b78aa0bd15b207eb3be7">BailoutType</a> bailout_type_;
<a name="l00323"></a>00323   <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> from_;
<a name="l00324"></a>00324   <span class="keywordtype">int</span> fp_to_sp_delta_;
<a name="l00325"></a>00325 
<a name="l00326"></a>00326   <span class="comment">// Input frame description.</span>
<a name="l00327"></a>00327   <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a224be72dc184a8c14bfe381aba312774">FrameDescription</a>* input_;
<a name="l00328"></a>00328   <span class="comment">// Number of output frames.</span>
<a name="l00329"></a>00329   <span class="keywordtype">int</span> output_count_;
<a name="l00330"></a>00330   <span class="comment">// Number of output js frames.</span>
<a name="l00331"></a>00331   <span class="keywordtype">int</span> jsframe_count_;
<a name="l00332"></a>00332   <span class="comment">// Array of output frame descriptions.</span>
<a name="l00333"></a>00333   <a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a224be72dc184a8c14bfe381aba312774">FrameDescription</a>** output_;
<a name="l00334"></a>00334 
<a name="l00335"></a>00335   List&lt;HeapNumberMaterializationDescriptor&gt; deferred_heap_numbers_;
<a name="l00336"></a>00336 
<a name="l00337"></a>00337   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> table_entry_size_;
<a name="l00338"></a>00338 
<a name="l00339"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#a224be72dc184a8c14bfe381aba312774">00339</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_frame_description.html">FrameDescription</a>;
<a name="l00340"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#aeeb596a0b06d3468f397135c4ce15405">00340</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html">DeoptimizingCodeListNode</a>;
<a name="l00341"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#ad768f50809f35947f37316cdfe284e92">00341</a>   <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_deoptimizer.html#ad768f50809f35947f37316cdfe284e92">DeoptimizedFrameInfo</a>;
<a name="l00342"></a>00342 };
<a name="l00343"></a>00343 
<a name="l00344"></a>00344 
<a name="l00345"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html">00345</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_frame_description.html">FrameDescription</a> {
<a name="l00346"></a>00346  <span class="keyword">public</span>:
<a name="l00347"></a>00347   <a class="code" href="classv8_1_1internal_1_1_frame_description.html#ab045b4005ef63ed2e2e38f2aba4b2f4a">FrameDescription</a>(uint32_t frame_size,
<a name="l00348"></a>00348                    <a class="code" href="classv8_1_1internal_1_1_j_s_function.html">JSFunction</a>* <span class="keyword">function</span>);
<a name="l00349"></a>00349 
<a name="l00350"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#adb31357a74efb87f90ea81886d4baa74">00350</a>   <span class="keywordtype">void</span>* <a class="code" href="classv8_1_1internal_1_1_frame_description.html#adb31357a74efb87f90ea81886d4baa74">operator new</a>(<span class="keywordtype">size_t</span> <a class="code" href="namespacev8_1_1internal.html#abf135806b67fe9f9a823fbbbe25de86b">size</a>, uint32_t frame_size) {
<a name="l00351"></a>00351     <span class="comment">// Subtracts kPointerSize, as the member frame_content_ already supplies</span>
<a name="l00352"></a>00352     <span class="comment">// the first element of the area to store the frame.</span>
<a name="l00353"></a>00353     <span class="keywordflow">return</span> malloc(size + frame_size - <a class="code" href="namespacev8_1_1internal.html#a023300bfff7e3bace1bbc934a501681c">kPointerSize</a>);
<a name="l00354"></a>00354   }
<a name="l00355"></a>00355 
<a name="l00356"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#aee5885f86760273016b3e67405389c58">00356</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#aee5885f86760273016b3e67405389c58">operator delete</a>(<span class="keywordtype">void</span>* pointer, uint32_t frame_size) {
<a name="l00357"></a>00357     free(pointer);
<a name="l00358"></a>00358   }
<a name="l00359"></a>00359 
<a name="l00360"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#ab39a58e397a051f4b77eb31964790891">00360</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#ab39a58e397a051f4b77eb31964790891">operator delete</a>(<span class="keywordtype">void</span>* description) {
<a name="l00361"></a>00361     free(description);
<a name="l00362"></a>00362   }
<a name="l00363"></a>00363 
<a name="l00364"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a72013fd7ea12656feaee3bddd2b5f57a">00364</a>   uint32_t <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a72013fd7ea12656feaee3bddd2b5f57a">GetFrameSize</a>()<span class="keyword"> const </span>{
<a name="l00365"></a>00365     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(static_cast&lt;uint32_t&gt;(frame_size_) == frame_size_);
<a name="l00366"></a>00366     <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(frame_size_);
<a name="l00367"></a>00367   }
<a name="l00368"></a>00368 
<a name="l00369"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a67112bd1da927e0ba7780bab778ddffd">00369</a>   <a class="code" href="classv8_1_1internal_1_1_j_s_function.html">JSFunction</a>* <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a67112bd1da927e0ba7780bab778ddffd">GetFunction</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> function_; }
<a name="l00370"></a>00370 
<a name="l00371"></a>00371   <span class="keywordtype">unsigned</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a11310120b9a6165d3e072840d8ab346c">GetOffsetFromSlotIndex</a>(<span class="keywordtype">int</span> slot_index);
<a name="l00372"></a>00372 
<a name="l00373"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#ad0706670dac1b0c2b6452eff67946d1e">00373</a>   intptr_t <a class="code" href="classv8_1_1internal_1_1_frame_description.html#ad0706670dac1b0c2b6452eff67946d1e">GetFrameSlot</a>(<span class="keywordtype">unsigned</span> offset) {
<a name="l00374"></a>00374     <span class="keywordflow">return</span> *GetFrameSlotPointer(offset);
<a name="l00375"></a>00375   }
<a name="l00376"></a>00376 
<a name="l00377"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a9ad39f89378cc4c0bc027fab2803e67e">00377</a>   <span class="keywordtype">double</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a9ad39f89378cc4c0bc027fab2803e67e">GetDoubleFrameSlot</a>(<span class="keywordtype">unsigned</span> offset) {
<a name="l00378"></a>00378     intptr_t* ptr = GetFrameSlotPointer(offset);
<a name="l00379"></a>00379 <span class="preprocessor">#if V8_TARGET_ARCH_MIPS</span>
<a name="l00380"></a>00380 <span class="preprocessor"></span>    <span class="comment">// Prevent gcc from using load-double (mips ldc1) on (possibly)</span>
<a name="l00381"></a>00381     <span class="comment">// non-64-bit aligned double. Uses two lwc1 instructions.</span>
<a name="l00382"></a>00382     <span class="keyword">union </span>conversion {
<a name="l00383"></a>00383       <span class="keywordtype">double</span> d;
<a name="l00384"></a>00384       uint32_t u[2];
<a name="l00385"></a>00385     } c;
<a name="l00386"></a>00386     c.u[0] = *<span class="keyword">reinterpret_cast&lt;</span>uint32_t*<span class="keyword">&gt;</span>(ptr);
<a name="l00387"></a>00387     c.u[1] = *(<span class="keyword">reinterpret_cast&lt;</span>uint32_t*<span class="keyword">&gt;</span>(ptr) + 1);
<a name="l00388"></a>00388     <span class="keywordflow">return</span> c.d;
<a name="l00389"></a>00389 <span class="preprocessor">#else</span>
<a name="l00390"></a>00390 <span class="preprocessor"></span>    <span class="keywordflow">return</span> *<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">double</span>*<span class="keyword">&gt;</span>(ptr);
<a name="l00391"></a>00391 <span class="preprocessor">#endif</span>
<a name="l00392"></a>00392 <span class="preprocessor"></span>  }
<a name="l00393"></a>00393 
<a name="l00394"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#aee24b65bf66e1559372f8b386a91e66a">00394</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#aee24b65bf66e1559372f8b386a91e66a">SetFrameSlot</a>(<span class="keywordtype">unsigned</span> offset, intptr_t value) {
<a name="l00395"></a>00395     *GetFrameSlotPointer(offset) = value;
<a name="l00396"></a>00396   }
<a name="l00397"></a>00397 
<a name="l00398"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a464042607a8ecfac1ab8828b5b4e07aa">00398</a>   intptr_t <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a464042607a8ecfac1ab8828b5b4e07aa">GetRegister</a>(<span class="keywordtype">unsigned</span> n)<span class="keyword"> const </span>{
<a name="l00399"></a>00399     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(n &lt; <a class="code" href="globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(registers_));
<a name="l00400"></a>00400     <span class="keywordflow">return</span> registers_[n];
<a name="l00401"></a>00401   }
<a name="l00402"></a>00402 
<a name="l00403"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#abe31ff65790d30f949b2e4cebd344697">00403</a>   <span class="keywordtype">double</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#abe31ff65790d30f949b2e4cebd344697">GetDoubleRegister</a>(<span class="keywordtype">unsigned</span> n)<span class="keyword"> const </span>{
<a name="l00404"></a>00404     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(n &lt; <a class="code" href="globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(double_registers_));
<a name="l00405"></a>00405     <span class="keywordflow">return</span> double_registers_[n];
<a name="l00406"></a>00406   }
<a name="l00407"></a>00407 
<a name="l00408"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#ad33b0f70e0f5546c8b3a2f959d9e18d4">00408</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#ad33b0f70e0f5546c8b3a2f959d9e18d4">SetRegister</a>(<span class="keywordtype">unsigned</span> n, intptr_t value) {
<a name="l00409"></a>00409     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(n &lt; <a class="code" href="globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(registers_));
<a name="l00410"></a>00410     registers_[n] = value;
<a name="l00411"></a>00411   }
<a name="l00412"></a>00412 
<a name="l00413"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#afc19d2102fcc6fbff3aec5555e019838">00413</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#afc19d2102fcc6fbff3aec5555e019838">SetDoubleRegister</a>(<span class="keywordtype">unsigned</span> n, <span class="keywordtype">double</span> value) {
<a name="l00414"></a>00414     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(n &lt; <a class="code" href="globals_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(double_registers_));
<a name="l00415"></a>00415     double_registers_[n] = value;
<a name="l00416"></a>00416   }
<a name="l00417"></a>00417 
<a name="l00418"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a71dc3b43cff6cb49546f26913b86fa49">00418</a>   intptr_t <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a71dc3b43cff6cb49546f26913b86fa49">GetTop</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> top_; }
<a name="l00419"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a507805a514c01e31ab3f7da43c40ed76">00419</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a507805a514c01e31ab3f7da43c40ed76">SetTop</a>(intptr_t top) { top_ = top; }
<a name="l00420"></a>00420 
<a name="l00421"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a313f43d3ae30256f7142b88bdd5f33ad">00421</a>   intptr_t <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a313f43d3ae30256f7142b88bdd5f33ad">GetPc</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> pc_; }
<a name="l00422"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a60ffdebbc8aa595d7a2f018159387d4f">00422</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a60ffdebbc8aa595d7a2f018159387d4f">SetPc</a>(intptr_t <a class="code" href="namespacev8_1_1internal.html#a7b4bab853ce065995f0c729a4106d405">pc</a>) { pc_ = <a class="code" href="namespacev8_1_1internal.html#a7b4bab853ce065995f0c729a4106d405">pc</a>; }
<a name="l00423"></a>00423 
<a name="l00424"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a58e14c806998cdb91140dd05593712e8">00424</a>   intptr_t <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a58e14c806998cdb91140dd05593712e8">GetFp</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fp_; }
<a name="l00425"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#ac2a6abd6017520e773baa025d97f8575">00425</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#ac2a6abd6017520e773baa025d97f8575">SetFp</a>(intptr_t <a class="code" href="namespacev8_1_1internal.html#a4a386ae11af05619d1a8ac6e22cc102a">fp</a>) { fp_ = <a class="code" href="namespacev8_1_1internal.html#a4a386ae11af05619d1a8ac6e22cc102a">fp</a>; }
<a name="l00426"></a>00426 
<a name="l00427"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#ad1acd78235fbe965d2b548a150a74eb2">00427</a>   intptr_t <a class="code" href="classv8_1_1internal_1_1_frame_description.html#ad1acd78235fbe965d2b548a150a74eb2">GetContext</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> context_; }
<a name="l00428"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a5fc78bc552024cec985c0f72f73b64b9">00428</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a5fc78bc552024cec985c0f72f73b64b9">SetContext</a>(intptr_t context) { context_ = context; }
<a name="l00429"></a>00429 
<a name="l00430"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#aec20e83b4f049b81cce18155d31f96b5">00430</a>   <a class="code" href="classv8_1_1internal_1_1_smi.html">Smi</a>* <a class="code" href="classv8_1_1internal_1_1_frame_description.html#aec20e83b4f049b81cce18155d31f96b5">GetState</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> state_; }
<a name="l00431"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#acc3588585217a35a61e2a25b7c8eb830">00431</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#acc3588585217a35a61e2a25b7c8eb830">SetState</a>(<a class="code" href="classv8_1_1internal_1_1_smi.html">Smi</a>* state) { state_ = state; }
<a name="l00432"></a>00432 
<a name="l00433"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#af49bf55d8c0aaed488fa63be8a8437ab">00433</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#af49bf55d8c0aaed488fa63be8a8437ab">SetContinuation</a>(intptr_t <a class="code" href="namespacev8_1_1internal.html#a7b4bab853ce065995f0c729a4106d405">pc</a>) { continuation_ = <a class="code" href="namespacev8_1_1internal.html#a7b4bab853ce065995f0c729a4106d405">pc</a>; }
<a name="l00434"></a>00434 
<a name="l00435"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#afc9664f529d60d00b063f86cd5b8ec44">00435</a>   StackFrame::Type <a class="code" href="classv8_1_1internal_1_1_frame_description.html#afc9664f529d60d00b063f86cd5b8ec44">GetFrameType</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> type_; }
<a name="l00436"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#aacabcb7771af112f31d989cef656c240">00436</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#aacabcb7771af112f31d989cef656c240">SetFrameType</a>(StackFrame::Type <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>) { type_ = <a class="code" href="namespacev8_1_1internal.html#af325044478c719d86be7dc7a017f250a">type</a>; }
<a name="l00437"></a>00437 
<a name="l00438"></a>00438   <span class="comment">// Get the incoming arguments count.</span>
<a name="l00439"></a>00439   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a1ba9b3a4c821408569b6073e78a4eaa0">ComputeParametersCount</a>();
<a name="l00440"></a>00440 
<a name="l00441"></a>00441   <span class="comment">// Get a parameter value for an unoptimized frame.</span>
<a name="l00442"></a>00442   <a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a9affbb5e0e3d815052267a1276cd0ed7">GetParameter</a>(<span class="keywordtype">int</span> index);
<a name="l00443"></a>00443 
<a name="l00444"></a>00444   <span class="comment">// Get the expression stack height for a unoptimized frame.</span>
<a name="l00445"></a>00445   <span class="keywordtype">unsigned</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#ae43af919957e19cf424edadb7f53a8d1">GetExpressionCount</a>();
<a name="l00446"></a>00446 
<a name="l00447"></a>00447   <span class="comment">// Get the expression stack value for an unoptimized frame.</span>
<a name="l00448"></a>00448   <a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a8fc4596c5b6a6b4572504d61006868b5">GetExpression</a>(<span class="keywordtype">int</span> index);
<a name="l00449"></a>00449 
<a name="l00450"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#aca4e7553fe5d6b6ee5cde8e13ec0f83f">00450</a>   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#aca4e7553fe5d6b6ee5cde8e13ec0f83f">registers_offset</a>() {
<a name="l00451"></a>00451     <span class="keywordflow">return</span> <a class="code" href="globals_8h.html#ab2bccdfdccc67d9e76421f12925e1452">OFFSET_OF</a>(<a class="code" href="classv8_1_1internal_1_1_frame_description.html">FrameDescription</a>, registers_);
<a name="l00452"></a>00452   }
<a name="l00453"></a>00453 
<a name="l00454"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#ad153c3c5f0a21b9bec32568e73d93d15">00454</a>   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#ad153c3c5f0a21b9bec32568e73d93d15">double_registers_offset</a>() {
<a name="l00455"></a>00455     <span class="keywordflow">return</span> <a class="code" href="globals_8h.html#ab2bccdfdccc67d9e76421f12925e1452">OFFSET_OF</a>(<a class="code" href="classv8_1_1internal_1_1_frame_description.html">FrameDescription</a>, double_registers_);
<a name="l00456"></a>00456   }
<a name="l00457"></a>00457 
<a name="l00458"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a06dd3cd8ae0d2dfb9da60e5244ccce61">00458</a>   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a06dd3cd8ae0d2dfb9da60e5244ccce61">frame_size_offset</a>() {
<a name="l00459"></a>00459     <span class="keywordflow">return</span> <a class="code" href="globals_8h.html#ab2bccdfdccc67d9e76421f12925e1452">OFFSET_OF</a>(<a class="code" href="classv8_1_1internal_1_1_frame_description.html">FrameDescription</a>, frame_size_);
<a name="l00460"></a>00460   }
<a name="l00461"></a>00461 
<a name="l00462"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#ade843b58760cc40ad09c3eb3d0376281">00462</a>   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#ade843b58760cc40ad09c3eb3d0376281">pc_offset</a>() {
<a name="l00463"></a>00463     <span class="keywordflow">return</span> <a class="code" href="globals_8h.html#ab2bccdfdccc67d9e76421f12925e1452">OFFSET_OF</a>(<a class="code" href="classv8_1_1internal_1_1_frame_description.html">FrameDescription</a>, pc_);
<a name="l00464"></a>00464   }
<a name="l00465"></a>00465 
<a name="l00466"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a885ed0fb1005c60ce5628571f605ef01">00466</a>   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a885ed0fb1005c60ce5628571f605ef01">state_offset</a>() {
<a name="l00467"></a>00467     <span class="keywordflow">return</span> <a class="code" href="globals_8h.html#ab2bccdfdccc67d9e76421f12925e1452">OFFSET_OF</a>(<a class="code" href="classv8_1_1internal_1_1_frame_description.html">FrameDescription</a>, state_);
<a name="l00468"></a>00468   }
<a name="l00469"></a>00469 
<a name="l00470"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a555ca7a3c4118a4bdff2936a7048754e">00470</a>   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a555ca7a3c4118a4bdff2936a7048754e">continuation_offset</a>() {
<a name="l00471"></a>00471     <span class="keywordflow">return</span> <a class="code" href="globals_8h.html#ab2bccdfdccc67d9e76421f12925e1452">OFFSET_OF</a>(<a class="code" href="classv8_1_1internal_1_1_frame_description.html">FrameDescription</a>, continuation_);
<a name="l00472"></a>00472   }
<a name="l00473"></a>00473 
<a name="l00474"></a><a class="code" href="classv8_1_1internal_1_1_frame_description.html#a6758b613b805fc441d2def08e7a5eabe">00474</a>   <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a6758b613b805fc441d2def08e7a5eabe">frame_content_offset</a>() {
<a name="l00475"></a>00475     <span class="keywordflow">return</span> <a class="code" href="globals_8h.html#ab2bccdfdccc67d9e76421f12925e1452">OFFSET_OF</a>(<a class="code" href="classv8_1_1internal_1_1_frame_description.html">FrameDescription</a>, frame_content_);
<a name="l00476"></a>00476   }
<a name="l00477"></a>00477 
<a name="l00478"></a>00478  <span class="keyword">private</span>:
<a name="l00479"></a>00479   <span class="keyword">static</span> <span class="keyword">const</span> uint32_t kZapUint32 = 0xbeeddead;
<a name="l00480"></a>00480 
<a name="l00481"></a>00481   <span class="comment">// Frame_size_ must hold a uint32_t value.  It is only a uintptr_t to</span>
<a name="l00482"></a>00482   <span class="comment">// keep the variable-size array frame_content_ of type intptr_t at</span>
<a name="l00483"></a>00483   <span class="comment">// the end of the structure aligned.</span>
<a name="l00484"></a>00484   uintptr_t frame_size_;  <span class="comment">// Number of bytes.</span>
<a name="l00485"></a>00485   <a class="code" href="classv8_1_1internal_1_1_j_s_function.html">JSFunction</a>* function_;
<a name="l00486"></a>00486   intptr_t registers_[<a class="code" href="namespacev8_1_1internal.html#afaac3cc4a40f6f5494b861f6313bf922">Register::kNumRegisters</a>];
<a name="l00487"></a>00487   <span class="keywordtype">double</span> double_registers_[<a class="code" href="structv8_1_1internal_1_1_dw_vfp_register.html#a87d64304a9189d79c74a6aa11f7e8396">DoubleRegister::kNumAllocatableRegisters</a>];
<a name="l00488"></a>00488   intptr_t top_;
<a name="l00489"></a>00489   intptr_t pc_;
<a name="l00490"></a>00490   intptr_t fp_;
<a name="l00491"></a>00491   intptr_t context_;
<a name="l00492"></a>00492   StackFrame::Type type_;
<a name="l00493"></a>00493   <a class="code" href="classv8_1_1internal_1_1_smi.html">Smi</a>* state_;
<a name="l00494"></a>00494 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00495"></a>00495 <span class="preprocessor"></span>  <a class="code" href="classv8_1_1internal_1_1_code.html#aabd99abf83167f429b6ad4f0b761466e">Code::Kind</a> kind_;
<a name="l00496"></a>00496 <span class="preprocessor">#endif</span>
<a name="l00497"></a>00497 <span class="preprocessor"></span>
<a name="l00498"></a>00498   <span class="comment">// Continuation is the PC where the execution continues after</span>
<a name="l00499"></a>00499   <span class="comment">// deoptimizing.</span>
<a name="l00500"></a>00500   intptr_t continuation_;
<a name="l00501"></a>00501 
<a name="l00502"></a>00502   <span class="comment">// This must be at the end of the object as the object is allocated larger</span>
<a name="l00503"></a>00503   <span class="comment">// than it&#39;s definition indicate to extend this array.</span>
<a name="l00504"></a>00504   intptr_t frame_content_[1];
<a name="l00505"></a>00505 
<a name="l00506"></a>00506   intptr_t* GetFrameSlotPointer(<span class="keywordtype">unsigned</span> offset) {
<a name="l00507"></a>00507     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(offset &lt; frame_size_);
<a name="l00508"></a>00508     <span class="keywordflow">return</span> <span class="keyword">reinterpret_cast&lt;</span>intptr_t*<span class="keyword">&gt;</span>(
<a name="l00509"></a>00509         <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a><span class="keyword">&gt;</span>(<span class="keyword">this</span>) + <a class="code" href="classv8_1_1internal_1_1_frame_description.html#a6758b613b805fc441d2def08e7a5eabe">frame_content_offset</a>() + offset);
<a name="l00510"></a>00510   }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512   <span class="keywordtype">int</span> ComputeFixedSize();
<a name="l00513"></a>00513 };
<a name="l00514"></a>00514 
<a name="l00515"></a>00515 
<a name="l00516"></a>00516 <span class="keyword">class </span>TranslationBuffer <a class="code" href="allocation_8h.html#abab81306d90d0b82732d5bed93a0a588">BASE_EMBEDDED</a> {
<a name="l00517"></a>00517  <span class="keyword">public</span>:
<a name="l00518"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a35a3630bf2081c67ad850274db4f8540">00518</a>   <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a35a3630bf2081c67ad850274db4f8540">TranslationBuffer</a>() : contents_(256) { }
<a name="l00519"></a>00519 
<a name="l00520"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a32a969c79ae9055ddfad6fed536752b3">00520</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a32a969c79ae9055ddfad6fed536752b3">CurrentIndex</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> contents_.length(); }
<a name="l00521"></a>00521   <span class="keywordtype">void</span> Add(<a class="code" href="namespaceunibrow.html#a60d2324d08aaa746bbaaa291aca51448">int32_t</a> value);
<a name="l00522"></a>00522 
<a name="l00523"></a>00523   <a class="code" href="classv8_1_1internal_1_1_handle.html">Handle&lt;ByteArray&gt;</a> CreateByteArray();
<a name="l00524"></a>00524 
<a name="l00525"></a>00525  <span class="keyword">private</span>:
<a name="l00526"></a>00526   <a class="code" href="classv8_1_1internal_1_1_zone_list.html">ZoneList&lt;uint8_t&gt;</a> contents_;
<a name="l00527"></a>00527 };
<a name="l00528"></a>00528 
<a name="l00529"></a>00529 
<a name="l00530"></a>00530 <span class="keyword">class </span>TranslationIterator <a class="code" href="allocation_8h.html#abab81306d90d0b82732d5bed93a0a588">BASE_EMBEDDED</a> {
<a name="l00531"></a>00531  <span class="keyword">public</span>:
<a name="l00532"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#aadf59f3ce7625862d0abcb819748852f">00532</a>   TranslationIterator(<a class="code" href="classv8_1_1internal_1_1_byte_array.html">ByteArray</a>* buffer, <span class="keywordtype">int</span> index)
<a name="l00533"></a>00533       : <a class="code" href="v8conversions_8cc.html#abaa947ae4ec386dbfc4be8d21ffbd5ec">buffer_</a>(buffer), index_(index) {
<a name="l00534"></a>00534     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(index &gt;= 0 &amp;&amp; index &lt; buffer-&gt;length());
<a name="l00535"></a>00535   }
<a name="l00536"></a>00536 
<a name="l00537"></a>00537   <a class="code" href="namespaceunibrow.html#a60d2324d08aaa746bbaaa291aca51448">int32_t</a> Next();
<a name="l00538"></a>00538 
<a name="l00539"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ac0b29094eb9052e601792fa67b0e3751">00539</a>   <span class="keywordtype">bool</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ac0b29094eb9052e601792fa67b0e3751">HasNext</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> index_ &lt; <a class="code" href="v8conversions_8cc.html#abaa947ae4ec386dbfc4be8d21ffbd5ec">buffer_</a>-&gt;length(); }
<a name="l00540"></a>00540 
<a name="l00541"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a778cf7d9b2915e845667b0044bfd4b7b">00541</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a778cf7d9b2915e845667b0044bfd4b7b">Skip</a>(<span class="keywordtype">int</span> n) {
<a name="l00542"></a>00542     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; n; i++) Next();
<a name="l00543"></a>00543   }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545  <span class="keyword">private</span>:
<a name="l00546"></a>00546   <a class="code" href="classv8_1_1internal_1_1_byte_array.html">ByteArray</a>* <a class="code" href="v8conversions_8cc.html#abaa947ae4ec386dbfc4be8d21ffbd5ec">buffer_</a>;
<a name="l00547"></a>00547   <span class="keywordtype">int</span> index_;
<a name="l00548"></a>00548 };
<a name="l00549"></a>00549 
<a name="l00550"></a>00550 
<a name="l00551"></a>00551 <span class="keyword">class </span>Translation <a class="code" href="allocation_8h.html#abab81306d90d0b82732d5bed93a0a588">BASE_EMBEDDED</a> {
<a name="l00552"></a>00552  <span class="keyword">public</span>:
<a name="l00553"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9">00553</a>   <span class="keyword">enum</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9">Opcode</a> {
<a name="l00554"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a7f7042357243e5e2bf1dec695f7d6909">00554</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a7f7042357243e5e2bf1dec695f7d6909">BEGIN</a>,
<a name="l00555"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a6c75c4beee5753d4af61121902cbcd4a">00555</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a6c75c4beee5753d4af61121902cbcd4a">JS_FRAME</a>,
<a name="l00556"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9ac2cdb7bca5465b140e496d885dd2e7a1">00556</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9ac2cdb7bca5465b140e496d885dd2e7a1">CONSTRUCT_STUB_FRAME</a>,
<a name="l00557"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a4e863b1db14968458d26c24ecb29d482">00557</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a4e863b1db14968458d26c24ecb29d482">ARGUMENTS_ADAPTOR_FRAME</a>,
<a name="l00558"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a055e968c3063f119877ac4e4fd32507c">00558</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a055e968c3063f119877ac4e4fd32507c">REGISTER</a>,
<a name="l00559"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9aca5017dd6166071c9311d290665c22a1">00559</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9aca5017dd6166071c9311d290665c22a1">INT32_REGISTER</a>,
<a name="l00560"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9aa3b9e5fcc4a09aff1d0812794cf3c5bb">00560</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9aa3b9e5fcc4a09aff1d0812794cf3c5bb">DOUBLE_REGISTER</a>,
<a name="l00561"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a4081cc760d4bfb7f3626d0f7c6635c22">00561</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a4081cc760d4bfb7f3626d0f7c6635c22">STACK_SLOT</a>,
<a name="l00562"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a81606315dcfdc42092cc50a3874c1aac">00562</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a81606315dcfdc42092cc50a3874c1aac">INT32_STACK_SLOT</a>,
<a name="l00563"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a5effd5de94d24c3111ee230db693b3f6">00563</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9a5effd5de94d24c3111ee230db693b3f6">DOUBLE_STACK_SLOT</a>,
<a name="l00564"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79a241d31f331f43df5f092fed26a11841b">00564</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79a241d31f331f43df5f092fed26a11841b">LITERAL</a>,
<a name="l00565"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9ac702de60f98ab804f06871c6d34e1c3f">00565</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9ac702de60f98ab804f06871c6d34e1c3f">ARGUMENTS_OBJECT</a>,
<a name="l00566"></a>00566 
<a name="l00567"></a>00567     <span class="comment">// A prefix indicating that the next command is a duplicate of the one</span>
<a name="l00568"></a>00568     <span class="comment">// that follows it.</span>
<a name="l00569"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a796e8c3cc9a53628565341f982d2afc9ab3fec6952514d4c9756f4ecd9ba9cd78">00569</a>     DUPLICATE
<a name="l00570"></a>00570   };
<a name="l00571"></a>00571 
<a name="l00572"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0bb366ffab896d2a0daba4baed419489">00572</a>   Translation(TranslationBuffer* buffer, <span class="keywordtype">int</span> frame_count, <span class="keywordtype">int</span> jsframe_count)
<a name="l00573"></a>00573       : <a class="code" href="v8conversions_8cc.html#abaa947ae4ec386dbfc4be8d21ffbd5ec">buffer_</a>(buffer),
<a name="l00574"></a>00574         index_(buffer-&gt;CurrentIndex()) {
<a name="l00575"></a>00575     <a class="code" href="v8conversions_8cc.html#abaa947ae4ec386dbfc4be8d21ffbd5ec">buffer_</a>-&gt;Add(BEGIN);
<a name="l00576"></a>00576     <a class="code" href="v8conversions_8cc.html#abaa947ae4ec386dbfc4be8d21ffbd5ec">buffer_</a>-&gt;Add(frame_count);
<a name="l00577"></a>00577     <a class="code" href="v8conversions_8cc.html#abaa947ae4ec386dbfc4be8d21ffbd5ec">buffer_</a>-&gt;Add(jsframe_count);
<a name="l00578"></a>00578   }
<a name="l00579"></a>00579 
<a name="l00580"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a96c5297cf77a89dca171ef93fcd51b01">00580</a>   <span class="keywordtype">int</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a96c5297cf77a89dca171ef93fcd51b01">index</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> index_; }
<a name="l00581"></a>00581 
<a name="l00582"></a>00582   <span class="comment">// Commands.</span>
<a name="l00583"></a>00583   <span class="keywordtype">void</span> BeginJSFrame(<span class="keywordtype">int</span> node_id, <span class="keywordtype">int</span> literal_id, <span class="keywordtype">unsigned</span> height);
<a name="l00584"></a>00584   <span class="keywordtype">void</span> BeginArgumentsAdaptorFrame(<span class="keywordtype">int</span> literal_id, <span class="keywordtype">unsigned</span> height);
<a name="l00585"></a>00585   <span class="keywordtype">void</span> BeginConstructStubFrame(<span class="keywordtype">int</span> literal_id, <span class="keywordtype">unsigned</span> height);
<a name="l00586"></a>00586   <span class="keywordtype">void</span> StoreRegister(<a class="code" href="structv8_1_1internal_1_1_register.html">Register</a> reg);
<a name="l00587"></a>00587   <span class="keywordtype">void</span> StoreInt32Register(<a class="code" href="structv8_1_1internal_1_1_register.html">Register</a> reg);
<a name="l00588"></a>00588   <span class="keywordtype">void</span> StoreDoubleRegister(<a class="code" href="structv8_1_1internal_1_1_dw_vfp_register.html">DoubleRegister</a> reg);
<a name="l00589"></a>00589   <span class="keywordtype">void</span> StoreStackSlot(<span class="keywordtype">int</span> index);
<a name="l00590"></a>00590   <span class="keywordtype">void</span> StoreInt32StackSlot(<span class="keywordtype">int</span> index);
<a name="l00591"></a>00591   <span class="keywordtype">void</span> StoreDoubleStackSlot(<span class="keywordtype">int</span> index);
<a name="l00592"></a>00592   <span class="keywordtype">void</span> StoreLiteral(<span class="keywordtype">int</span> literal_id);
<a name="l00593"></a>00593   <span class="keywordtype">void</span> StoreArgumentsObject();
<a name="l00594"></a>00594   <span class="keywordtype">void</span> MarkDuplicate();
<a name="l00595"></a>00595 
<a name="l00596"></a>00596   <span class="keyword">static</span> <span class="keywordtype">int</span> NumberOfOperandsFor(<a class="code" href="namespacev8_1_1internal.html#a1bac8f655a6db57b1d674989a34fd2c7">Opcode</a> opcode);
<a name="l00597"></a>00597 
<a name="l00598"></a>00598 <span class="preprocessor">#if defined(OBJECT_PRINT) || defined(ENABLE_DISASSEMBLER)</span>
<a name="l00599"></a>00599 <span class="preprocessor"></span>  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* StringFor(<a class="code" href="namespacev8_1_1internal.html#a1bac8f655a6db57b1d674989a34fd2c7">Opcode</a> opcode);
<a name="l00600"></a>00600 <span class="preprocessor">#endif</span>
<a name="l00601"></a>00601 <span class="preprocessor"></span>
<a name="l00602"></a>00602  <span class="keyword">private</span>:
<a name="l00603"></a>00603   TranslationBuffer* <a class="code" href="v8conversions_8cc.html#abaa947ae4ec386dbfc4be8d21ffbd5ec">buffer_</a>;
<a name="l00604"></a>00604   <span class="keywordtype">int</span> index_;
<a name="l00605"></a>00605 };
<a name="l00606"></a>00606 
<a name="l00607"></a>00607 
<a name="l00608"></a>00608 <span class="comment">// Linked list holding deoptimizing code objects. The deoptimizing code objects</span>
<a name="l00609"></a>00609 <span class="comment">// are kept as weak handles until they are no longer activated on the stack.</span>
<a name="l00610"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html">00610</a> <span class="keyword">class </span><a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html">DeoptimizingCodeListNode</a> : <span class="keyword">public</span> <a class="code" href="classv8_1_1internal_1_1_malloced.html">Malloced</a> {
<a name="l00611"></a>00611  <span class="keyword">public</span>:
<a name="l00612"></a>00612   <span class="keyword">explicit</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html#a782e6c62a448b348ffac4172082994b6">DeoptimizingCodeListNode</a>(<a class="code" href="classv8_1_1internal_1_1_code.html">Code</a>* <a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html#a417bed537f8272c842b60d1899b6649a">code</a>);
<a name="l00613"></a>00613   <a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html#a12449924f662698aec9b755755653cfe">~DeoptimizingCodeListNode</a>();
<a name="l00614"></a>00614 
<a name="l00615"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html#a690c0bbc28465208eb7c5037123d9082">00615</a>   <a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html">DeoptimizingCodeListNode</a>* <a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html#a690c0bbc28465208eb7c5037123d9082">next</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> next_; }
<a name="l00616"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html#abafa19ea7ecc484b2b6fee5124124dff">00616</a>   <span class="keywordtype">void</span> <a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html#abafa19ea7ecc484b2b6fee5124124dff">set_next</a>(<a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html">DeoptimizingCodeListNode</a>* <a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html#a690c0bbc28465208eb7c5037123d9082">next</a>) { next_ = <a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html#a690c0bbc28465208eb7c5037123d9082">next</a>; }
<a name="l00617"></a><a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html#a417bed537f8272c842b60d1899b6649a">00617</a>   <a class="code" href="classv8_1_1internal_1_1_handle.html">Handle&lt;Code&gt;</a> <a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html#a417bed537f8272c842b60d1899b6649a">code</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> code_; }
<a name="l00618"></a>00618 
<a name="l00619"></a>00619  <span class="keyword">private</span>:
<a name="l00620"></a>00620   <span class="comment">// Global (weak) handle to the deoptimizing code object.</span>
<a name="l00621"></a>00621   <a class="code" href="classv8_1_1internal_1_1_handle.html">Handle&lt;Code&gt;</a> code_;
<a name="l00622"></a>00622 
<a name="l00623"></a>00623   <span class="comment">// Next pointer for linked list.</span>
<a name="l00624"></a>00624   <a class="code" href="classv8_1_1internal_1_1_deoptimizing_code_list_node.html">DeoptimizingCodeListNode</a>* next_;
<a name="l00625"></a>00625 };
<a name="l00626"></a>00626 
<a name="l00627"></a>00627 
<a name="l00628"></a>00628 <span class="keyword">class </span>SlotRef <a class="code" href="allocation_8h.html#abab81306d90d0b82732d5bed93a0a588">BASE_EMBEDDED</a> {
<a name="l00629"></a>00629  <span class="keyword">public</span>:
<a name="l00630"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79">00630</a>   <span class="keyword">enum</span> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79">SlotRepresentation</a> {
<a name="l00631"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79a84fefe2208baa1c3305cbb28ad377dc0">00631</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79a84fefe2208baa1c3305cbb28ad377dc0">UNKNOWN</a>,
<a name="l00632"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79a10b4b62e13898760d5c51c18dd2fea22">00632</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79a10b4b62e13898760d5c51c18dd2fea22">TAGGED</a>,
<a name="l00633"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79a001feeecc0c796b2c5f31ea6fc61bc7e">00633</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79a001feeecc0c796b2c5f31ea6fc61bc7e">INT32</a>,
<a name="l00634"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79a50dd77513c4d1d6898cd8cc693f43fd0">00634</a>     <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79a50dd77513c4d1d6898cd8cc693f43fd0">DOUBLE</a>,
<a name="l00635"></a>00635     LITERAL
<a name="l00636"></a>00636   };
<a name="l00637"></a>00637 
<a name="l00638"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a63ff5cdc5ca28c6f6b80004dc6eada89">00638</a>   SlotRef()
<a name="l00639"></a>00639       : addr_(<a class="code" href="namespacev8_1_1internal.html#a5c7edd76ae40d6f54c6a23a039b15551">NULL</a>), representation_(<a class="code" href="namespacev8_1_1internal.html#a37d3283f29231d9d11daeb4991a6d9c2a8af59335260009b216cf3a8e24b0ed08">UNKNOWN</a>) { }
<a name="l00640"></a>00640 
<a name="l00641"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a70729921674724c451ebdf8948a556dc">00641</a>   SlotRef(<a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr, <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a0a4a22b0347663cb13591a3a0750ba79">SlotRepresentation</a> representation)
<a name="l00642"></a>00642       : addr_(addr), representation_(representation) { }
<a name="l00643"></a>00643 
<a name="l00644"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#a988cd45fe89af1310e199551e83d8b74">00644</a>   <span class="keyword">explicit</span> SlotRef(<a class="code" href="classv8_1_1internal_1_1_object.html">Object</a>* literal)
<a name="l00645"></a>00645       : literal_(literal), representation_(LITERAL) { }
<a name="l00646"></a>00646 
<a name="l00647"></a><a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ab4a60a2de1928983b15a10de3c09a00c">00647</a>   <a class="code" href="classv8_1_1internal_1_1_handle.html">Handle&lt;Object&gt;</a> <a class="code" href="classv8_1_1internal_1_1_b_a_s_e___e_m_b_e_d_d_e_d.html#ab4a60a2de1928983b15a10de3c09a00c">GetValue</a>() {
<a name="l00648"></a>00648     <span class="keywordflow">switch</span> (representation_) {
<a name="l00649"></a>00649       <span class="keywordflow">case</span> TAGGED:
<a name="l00650"></a>00650         <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_handle.html">Handle&lt;Object&gt;</a>(<a class="code" href="classv8_1_1internal_1_1_memory.html#a44b9d30b0f35df05e29aca423839b4f5">Memory::Object_at</a>(addr_));
<a name="l00651"></a>00651 
<a name="l00652"></a>00652       <span class="keywordflow">case</span> INT32: {
<a name="l00653"></a>00653         <span class="keywordtype">int</span> value = <a class="code" href="classv8_1_1internal_1_1_memory.html#afdb183a08970e652c8186765e89eef06">Memory::int32_at</a>(addr_);
<a name="l00654"></a>00654         <span class="keywordflow">if</span> (<a class="code" href="classv8_1_1internal_1_1_smi.html#adffa6d4355e3788451eb340ff5013f73">Smi::IsValid</a>(value)) {
<a name="l00655"></a>00655           <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_handle.html">Handle&lt;Object&gt;</a>(<a class="code" href="classv8_1_1internal_1_1_smi.html#ab8a06699d9e96c9c50be9bf54c29ea86">Smi::FromInt</a>(value));
<a name="l00656"></a>00656         } <span class="keywordflow">else</span> {
<a name="l00657"></a>00657           <span class="keywordflow">return</span> Isolate::Current()-&gt;factory()-&gt;NewNumberFromInt(value);
<a name="l00658"></a>00658         }
<a name="l00659"></a>00659       }
<a name="l00660"></a>00660 
<a name="l00661"></a>00661       <span class="keywordflow">case</span> DOUBLE: {
<a name="l00662"></a>00662         <span class="keywordtype">double</span> value = <a class="code" href="classv8_1_1internal_1_1_memory.html#ae6df6e6ff180d5ca8d3b1e03c528a5a4">Memory::double_at</a>(addr_);
<a name="l00663"></a>00663         <span class="keywordflow">return</span> Isolate::Current()-&gt;factory()-&gt;NewNumber(value);
<a name="l00664"></a>00664       }
<a name="l00665"></a>00665 
<a name="l00666"></a>00666       <span class="keywordflow">case</span> LITERAL:
<a name="l00667"></a>00667         <span class="keywordflow">return</span> literal_;
<a name="l00668"></a>00668 
<a name="l00669"></a>00669       <span class="keywordflow">default</span>:
<a name="l00670"></a>00670         <a class="code" href="checks_8h.html#a0bc63b24b654ca433be7b97a3edde132">UNREACHABLE</a>();
<a name="l00671"></a>00671         <span class="keywordflow">return</span> <a class="code" href="classv8_1_1internal_1_1_handle.html">Handle&lt;Object&gt;::null</a>();
<a name="l00672"></a>00672     }
<a name="l00673"></a>00673   }
<a name="l00674"></a>00674 
<a name="l00675"></a>00675   <span class="keyword">static</span> <a class="code" href="classv8_1_1internal_1_1_vector.html">Vector&lt;SlotRef&gt;</a> ComputeSlotMappingForArguments(
<a name="l00676"></a>00676       <a class="code" href="classv8_1_1internal_1_1_java_script_frame.html">JavaScriptFrame</a>* frame,
<a name="l00677"></a>00677       <span class="keywordtype">int</span> inlined_frame_index,
<a name="l00678"></a>00678       <span class="keywordtype">int</span> <a class="code" href="namespacev8_1_1internal.html#ade425a0f26139a3421c8d55cc4461eef">formal_parameter_count</a>);
<a name="l00679"></a>00679 
<a name="l00680"></a>00680  <span class="keyword">private</span>:
<a name="l00681"></a>00681   <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> addr_;
<a name="l00682"></a>00682   <a class="code" href="classv8_1_1internal_1_1_handle.html">Handle&lt;Object&gt;</a> literal_;
<a name="l00683"></a>00683   SlotRepresentation representation_;
<a name="l00684"></a>00684 
<a name="l00685"></a>00685   <span class="keyword">static</span> <a class="code" href="namespacev8_1_1internal.html#a91038d135bfd26927f854d52e3e54379">Address</a> SlotAddress(<a class="code" href="classv8_1_1internal_1_1_java_script_frame.html">JavaScriptFrame</a>* frame, <span class="keywordtype">int</span> slot_index) {
<a name="l00686"></a>00686     <span class="keywordflow">if</span> (slot_index &gt;= 0) {
<a name="l00687"></a>00687       <span class="keyword">const</span> <span class="keywordtype">int</span> offset = <a class="code" href="classv8_1_1internal_1_1_java_script_frame_constants.html#ad5f6058185016ce289f43a9fdec4b3a7">JavaScriptFrameConstants::kLocal0Offset</a>;
<a name="l00688"></a>00688       <span class="keywordflow">return</span> frame-&gt;fp() + offset - (slot_index * <a class="code" href="namespacev8_1_1internal.html#a023300bfff7e3bace1bbc934a501681c">kPointerSize</a>);
<a name="l00689"></a>00689     } <span class="keywordflow">else</span> {
<a name="l00690"></a>00690       <span class="keyword">const</span> <span class="keywordtype">int</span> offset = <a class="code" href="classv8_1_1internal_1_1_java_script_frame_constants.html#a4c1637c6c343dc8552738899f22c6f2a">JavaScriptFrameConstants::kLastParameterOffset</a>;
<a name="l00691"></a>00691       <span class="keywordflow">return</span> frame-&gt;fp() + offset - ((slot_index + 1) * <a class="code" href="namespacev8_1_1internal.html#a023300bfff7e3bace1bbc934a501681c">kPointerSize</a>);
<a name="l00692"></a>00692     }
<a name="l00693"></a>00693   }
<a name="l00694"></a>00694 
<a name="l00695"></a>00695   <span class="keyword">static</span> SlotRef ComputeSlotForNextArgument(TranslationIterator* iterator,
<a name="l00696"></a>00696                                             DeoptimizationInputData* data,
<a name="l00697"></a>00697                                             JavaScriptFrame* frame);
<a name="l00698"></a>00698 
<a name="l00699"></a>00699   <span class="keyword">static</span> <span class="keywordtype">void</span> ComputeSlotsForArguments(
<a name="l00700"></a>00700       Vector&lt;SlotRef&gt;* args_slots,
<a name="l00701"></a>00701       TranslationIterator* iterator,
<a name="l00702"></a>00702       DeoptimizationInputData* data,
<a name="l00703"></a>00703       JavaScriptFrame* frame);
<a name="l00704"></a>00704 };
<a name="l00705"></a>00705 
<a name="l00706"></a>00706 
<a name="l00707"></a>00707 <span class="preprocessor">#ifdef ENABLE_DEBUGGER_SUPPORT</span>
<a name="l00708"></a>00708 <span class="preprocessor"></span><span class="comment">// Class used to represent an unoptimized frame when the debugger</span>
<a name="l00709"></a>00709 <span class="comment">// needs to inspect a frame that is part of an optimized frame. The</span>
<a name="l00710"></a>00710 <span class="comment">// internally used FrameDescription objects are not GC safe so for use</span>
<a name="l00711"></a>00711 <span class="comment">// by the debugger frame information is copied to an object of this type.</span>
<a name="l00712"></a>00712 <span class="comment">// Represents parameters in unadapted form so their number might mismatch</span>
<a name="l00713"></a>00713 <span class="comment">// formal parameter count.</span>
<a name="l00714"></a>00714 <span class="keyword">class </span>DeoptimizedFrameInfo : <span class="keyword">public</span> Malloced {
<a name="l00715"></a>00715  <span class="keyword">public</span>:
<a name="l00716"></a>00716   DeoptimizedFrameInfo(Deoptimizer* deoptimizer,
<a name="l00717"></a>00717                        <span class="keywordtype">int</span> frame_index,
<a name="l00718"></a>00718                        <span class="keywordtype">bool</span> has_arguments_adaptor,
<a name="l00719"></a>00719                        <span class="keywordtype">bool</span> has_construct_stub);
<a name="l00720"></a>00720   <span class="keyword">virtual</span> ~DeoptimizedFrameInfo();
<a name="l00721"></a>00721 
<a name="l00722"></a>00722   <span class="comment">// GC support.</span>
<a name="l00723"></a>00723   <span class="keywordtype">void</span> Iterate(ObjectVisitor* v);
<a name="l00724"></a>00724 
<a name="l00725"></a>00725   <span class="comment">// Return the number of incoming arguments.</span>
<a name="l00726"></a>00726   <span class="keywordtype">int</span> parameters_count() { <span class="keywordflow">return</span> parameters_count_; }
<a name="l00727"></a>00727 
<a name="l00728"></a>00728   <span class="comment">// Return the height of the expression stack.</span>
<a name="l00729"></a>00729   <span class="keywordtype">int</span> expression_count() { <span class="keywordflow">return</span> expression_count_; }
<a name="l00730"></a>00730 
<a name="l00731"></a>00731   <span class="comment">// Get the frame function.</span>
<a name="l00732"></a>00732   JSFunction* GetFunction() {
<a name="l00733"></a>00733     <span class="keywordflow">return</span> function_;
<a name="l00734"></a>00734   }
<a name="l00735"></a>00735 
<a name="l00736"></a>00736   <span class="comment">// Check if this frame is preceded by construct stub frame.  The bottom-most</span>
<a name="l00737"></a>00737   <span class="comment">// inlined frame might still be called by an uninlined construct stub.</span>
<a name="l00738"></a>00738   <span class="keywordtype">bool</span> HasConstructStub() {
<a name="l00739"></a>00739     <span class="keywordflow">return</span> has_construct_stub_;
<a name="l00740"></a>00740   }
<a name="l00741"></a>00741 
<a name="l00742"></a>00742   <span class="comment">// Get an incoming argument.</span>
<a name="l00743"></a>00743   <a class="code" href="namespacev8_1_1internal.html#a7986609369321bb6f6ecb264c345b5c7">Object</a>* GetParameter(<span class="keywordtype">int</span> index) {
<a name="l00744"></a>00744     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(0 &lt;= index &amp;&amp; index &lt; parameters_count());
<a name="l00745"></a>00745     <span class="keywordflow">return</span> parameters_[index];
<a name="l00746"></a>00746   }
<a name="l00747"></a>00747 
<a name="l00748"></a>00748   <span class="comment">// Get an expression from the expression stack.</span>
<a name="l00749"></a>00749   <a class="code" href="namespacev8_1_1internal.html#a7986609369321bb6f6ecb264c345b5c7">Object</a>* GetExpression(<span class="keywordtype">int</span> index) {
<a name="l00750"></a>00750     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(0 &lt;= index &amp;&amp; index &lt; expression_count());
<a name="l00751"></a>00751     <span class="keywordflow">return</span> expression_stack_[index];
<a name="l00752"></a>00752   }
<a name="l00753"></a>00753 
<a name="l00754"></a>00754   <span class="keywordtype">int</span> GetSourcePosition() {
<a name="l00755"></a>00755     <span class="keywordflow">return</span> source_position_;
<a name="l00756"></a>00756   }
<a name="l00757"></a>00757 
<a name="l00758"></a>00758  <span class="keyword">private</span>:
<a name="l00759"></a>00759   <span class="comment">// Set an incoming argument.</span>
<a name="l00760"></a>00760   <span class="keywordtype">void</span> SetParameter(<span class="keywordtype">int</span> index, <a class="code" href="namespacev8_1_1internal.html#a7986609369321bb6f6ecb264c345b5c7">Object</a>* obj) {
<a name="l00761"></a>00761     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(0 &lt;= index &amp;&amp; index &lt; parameters_count());
<a name="l00762"></a>00762     parameters_[index] = obj;
<a name="l00763"></a>00763   }
<a name="l00764"></a>00764 
<a name="l00765"></a>00765   <span class="comment">// Set an expression on the expression stack.</span>
<a name="l00766"></a>00766   <span class="keywordtype">void</span> SetExpression(<span class="keywordtype">int</span> index, <a class="code" href="namespacev8_1_1internal.html#a7986609369321bb6f6ecb264c345b5c7">Object</a>* obj) {
<a name="l00767"></a>00767     <a class="code" href="checks_8h.html#ac22830a985e1daed0c9eadba8c6f606e">ASSERT</a>(0 &lt;= index &amp;&amp; index &lt; expression_count());
<a name="l00768"></a>00768     expression_stack_[index] = obj;
<a name="l00769"></a>00769   }
<a name="l00770"></a>00770 
<a name="l00771"></a>00771   JSFunction* function_;
<a name="l00772"></a>00772   <span class="keywordtype">bool</span> has_construct_stub_;
<a name="l00773"></a>00773   <span class="keywordtype">int</span> parameters_count_;
<a name="l00774"></a>00774   <span class="keywordtype">int</span> expression_count_;
<a name="l00775"></a>00775   <a class="code" href="namespacev8_1_1internal.html#a7986609369321bb6f6ecb264c345b5c7">Object</a>** parameters_;
<a name="l00776"></a>00776   <a class="code" href="namespacev8_1_1internal.html#a7986609369321bb6f6ecb264c345b5c7">Object</a>** expression_stack_;
<a name="l00777"></a>00777   <span class="keywordtype">int</span> source_position_;
<a name="l00778"></a>00778 
<a name="l00779"></a>00779   <span class="keyword">friend</span> <span class="keyword">class </span>Deoptimizer;
<a name="l00780"></a>00780 };
<a name="l00781"></a>00781 <span class="preprocessor">#endif</span>
<a name="l00782"></a>00782 <span class="preprocessor"></span>
<a name="l00783"></a>00783 } }  <span class="comment">// namespace v8::internal</span>
<a name="l00784"></a>00784 
<a name="l00785"></a>00785 <span class="preprocessor">#endif  // V8_DEOPTIMIZER_H_</span>
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="deoptimizer_8h.html">deoptimizer.h</a>      </li>

    <li class="footer">Generated on Tue Apr 24 2012 13:06:09 for V8 API Reference Guide by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.0 </li>
   </ul>
 </div>


</body>
</html>
